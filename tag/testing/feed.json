{
    "version": "https://jsonfeed.org/version/1",
    "title": "Dave's Notebook • All posts by \"testing\" tag",
    "description": null,
    "home_page_url": "http://davembush.github.com",
    "items": [
        {
            "id": "http://davembush.github.com/property-based-testing-revealed-a-better-way-to-test/",
            "url": "http://davembush.github.com/property-based-testing-revealed-a-better-way-to-test/",
            "title": "Property Based Testing Revealed - A Better Way to Test",
            "date_published": "2018-01-23T11:30:24.000Z",
            "content_html": "<p>Over the last couple of weeks, I’ve been experimenting with Property Based Testing.  While I’m probably doing it “wrong” by many definitions, I’m finding it useful enough that I’m adding it to my testing toolbox. <figure><img src=\"/uploads/2018/01/2018-01-23.jpg\" title=\"Property Based Testing Revealed - A Better Way to Test\"><figcaption>Photo credit: <a href=\"//visualhunt.com/author/0651d3\">abraham.williams</a> on <a href=\"//visualhunt.com/re/284007\">VisualHunt.com</a> &#x2F; <a href=\"//creativecommons.org/licenses/by-sa/2.0/\"> CC BY-SA</a></figcaption></figure></p>\n<span id=\"more\"></span> \n\n<h2 id=\"What’s-A-Property\"><a href=\"#What’s-A-Property\" class=\"headerlink\" title=\"What’s A Property?\"></a>What’s A Property?</h2><p>As you introduce yourself to Property Based Testing, one of the first things you’ll need to understand is what they mean by a “property.”  Most of us who have been doing some form of Object Oriented Programming think of “properties” as data points on an object.  That’s not even close to what the word means when we talk about Property Based Testing. </p>\n<p>Roughly translated, a “property” is some feature of the code under tests.  Most of the beginner literature uses the classic add(a, b) method.  Properties of an add method include:</p>\n<ul>\n<li><code>add(a, b) === add(b, a)</code></li>\n<li>if <code>a</code> is zero then <code>add()</code> will return the value of <code>b</code></li>\n<li><code>add(a, b) - a</code> will equal b (and similar for minus b equals a).</li>\n</ul>\n<p>The key here is that we shouldn’t need to know too much about the data we are sending in to our add method because we are going to send in random data.  So, any property we test needs to be expressed in a data agnostic way.</p>\n<h2 id=\"What-are-the-Advantages\"><a href=\"#What-are-the-Advantages\" class=\"headerlink\" title=\"What are the Advantages?\"></a>What are the Advantages?</h2><p>And while having to think about our test in a data agnostic way is hard, at first, the first advantage is that we start thinking about testing our code in terms of generalities instead of specifics.  And, really, a general test is a much more robust test. </p>\n<p>But, we need data for our tests, right?  Where does that come from?  Depending on the framework you are using, this may vary, but the general idea is that you describe what the data should look like, and the framework will generate random parameters to pass in.  This fact leads us to two more benefits of Property Based Testing. </p>\n<p>First, since all I need to do is describe what the data should look like, I’m not forced to think of the data I want to use to tests my function.  I don’t know about you, but my tendency is to create data that works with my function instead of trying to create data that will break my function.  By having the framework create random data, I’m more likely to test with data that will break my code. </p>\n<p>And that leads to the second benefit of random data.  I’m more likely to find the edge cases for my function under test. Now, one detail I’ve left out is that each test you create gets run multiple times with different random data.  So, it isn’t like one day your tests work great and another day they fail.  No.  The system I use generates 100 different sets of data per tests.  You can have it create more or less tests as needed.</p>\n<h2 id=\"Places-You-Might-Not-Use-Property-Based-Testing\"><a href=\"#Places-You-Might-Not-Use-Property-Based-Testing\" class=\"headerlink\" title=\"Places You Might Not Use Property Based Testing\"></a>Places You Might Not Use Property Based Testing</h2><p>Now, running 100 different permutations on a test that takes a long time to run may not be practical.  My first question would be, why does your code take that long?  Are you trying to unit test HTML code and the rendering is taking a long time?  That’s probably a poor use case. </p>\n<p>Another place where you might want to avoid property based tests is when you’ve already basically tested the component parts and you just need to do a sanity check in the integration of the parts.</p>\n<h2 id=\"Places-You-Might-Use-Property-Based-Testing-Anyhow\"><a href=\"#Places-You-Might-Use-Property-Based-Testing-Anyhow\" class=\"headerlink\" title=\"Places You Might Use Property Based Testing Anyhow\"></a>Places You Might Use Property Based Testing Anyhow</h2><p>On the other hand, not having to come up with my own parameter values makes the whole Property Based Testing pretty attractive, even when it doesn’t make a lot of sense.  And it might encourage you to write smaller functions.</p>\n<h2 id=\"Problems-I’ve-Run-Into\"><a href=\"#Problems-I’ve-Run-Into\" class=\"headerlink\" title=\"Problems I’ve Run Into\"></a>Problems I’ve Run Into</h2><p>I would say the biggest problem I’ve run into using Property Based Testing is learning how to write tests that don’t re-implement the logic in my code in order to test the logic in my code. </p>\n<p>Going back to the <code>add(a, b)</code> example above.  It is tempting to test that function by verifying that <code>add(a, b) === a + b</code>.  But that wouldn’t be a very good test because we used the same logic that is probably already being used inside the <code>add()</code> function.  In example based testing (classic unit testing), we have the same problem, we just don’t use code to implement it.  We add the numbers in our head and verify that <code>add(a, b) = c</code>.  But, <code>c</code> is just <code>a + b</code> done in our head. </p>\n<p>Which leads me back to, even though it is “harder” we end up with better tests.</p>\n<h2 id=\"I’m-Probably-Doing-it-Wrong\"><a href=\"#I’m-Probably-Doing-it-Wrong\" class=\"headerlink\" title=\"I’m Probably Doing it Wrong\"></a>I’m Probably Doing it Wrong</h2><p>I’m so new to this way of thinking, that I’m pretty sure I’m doing everything wrong.  But, I figure I can take advantage of what I understand and as I write more tests, I’ll find more and better ways of writing tests.  I encourage you to pick up a property based framework for your development environment and give it a try.</p>\n<h2 id=\"Resources\"><a href=\"#Resources\" class=\"headerlink\" title=\"Resources:\"></a>Resources:</h2><ul>\n<li><a href=\"//hypothesis.works/articles/what-is-property-based-testing/\">What is Property Based Testing?</a></li>\n<li><a href=\"//fsharpforfunandprofit.com/posts/property-based-testing/\">An Introduction to Property Based Testing</a></li>\n</ul>\n",
            "tags": [
                "tdd",
                "testing",
                "property based testing"
            ]
        },
        {
            "id": "http://davembush.github.com/accessing-private-fields-in-typescript/",
            "url": "http://davembush.github.com/accessing-private-fields-in-typescript/",
            "title": "Accessing Private Fields in TypeScript",
            "date_published": "2017-02-28T12:30:00.000Z",
            "content_html": "<p>Have you ever needed to access a private field in TypeScript? The most common place you may find yourself needing to do this is while writing a unit test. But, I also found myself needing to do this while using a JavaScript library where the field wasn’t declared in the type file for the library I was using.</p>\n<p>Now, suppose you could access those private fields effortlessly and easily. How valuable would that be to you?</p>\n<figure>![](/uploads/2017/02/image-3.png \"Accessing Private Fields in TypeScript\") Photo via [VisualHunt](//visualhunt.com/)</figure>\n\n<span id=\"more\"></span>\n\n<h2 id=\"Unit-Test\"><a href=\"#Unit-Test\" class=\"headerlink\" title=\"Unit Test\"></a>Unit Test</h2><p>In general, when you write a unit test, you only want to access public fields for both the purposes of setting up your tests and for evaluating the success or failure of the tests.</p>\n<p>But, occasionally, this is not possible.</p>\n<p>Now, what most people don’t realize is that, unlike private members in JavaScript, where the members aren’t accessible, in TypeScript, the resulting JavaScript has the variables just as public as the public members. In fact, the only thing that makes a member private in TypeScript is the compiler. This means that this TypeScript code:</p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Foo</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"attr\">member1</span>: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"title function_\">bar</span>(<span class=\"params\"></span>) &#123; &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Ends up looking something like this in JavaScript</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Foo</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">member1</span> = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">bar</span> = <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123; &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Which means that</p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> v = <span class=\"keyword\">new</span> <span class=\"title class_\">Foo</span>();</span><br><span class=\"line\"><span class=\"keyword\">var</span> x = v.<span class=\"property\">member1</span>;</span><br><span class=\"line\">v.<span class=\"title function_\">bar</span>();</span><br></pre></td></tr></table></figure>\n\n<p>Should be working code.</p>\n<p>But, if you type that code into JavaScript and try to compile it, it won’t compile. Which means you can’t write your unit test in TypeScript and access the private variables.</p>\n<p>Or can you?</p>\n<h2 id=\"TypeScript-is-just-JavaScript-with-Sugar\"><a href=\"#TypeScript-is-just-JavaScript-with-Sugar\" class=\"headerlink\" title=\"TypeScript is just JavaScript with Sugar\"></a>TypeScript is just JavaScript with Sugar</h2><p>One small little fact about TypeScript that we seem to forget is that it is just JavaScript with some sugar. What this means in practical terms is that, if we want to, or in this case, need to, we can write plain old boring JavaScript as part of our TypeScript code. And then the other little bit we tend to forget is that we can access a field using the name of the field as an indexer. That is, this:</p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">v.<span class=\"property\">member</span> = <span class=\"string\">&#x27;x&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<p>is functionally the same as this:</p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">v[<span class=\"string\">&#x27;member&#x27;</span>] = <span class=\"string\">&#x27;x&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<p>And because it all compiles down to JavaScript, and the private fields are public JavaScript fields, we can use the named index to access the field.</p>\n<h2 id=\"JavaScript-Libraries\"><a href=\"#JavaScript-Libraries\" class=\"headerlink\" title=\"JavaScript Libraries\"></a>JavaScript Libraries</h2><p>Similarly, this past week I was working on finishing up some Angular 2 code. And one of my tests was failing. Even though the code was working in Chrome fine. The issue was that I was using PhantomJS which doesn’t have the latest JavaScript spec implemented, so it relies on polyfills. One of the polyfills I was using was not compressing the Regular Expressions that I was indirectly using correctly which resulting in the test throwing an exception.</p>\n<p>After tracking down the source of the problem for a day, I finally found a line at the bottom of the GitHub page that told me that I could turn the routine off by calling a function. And here is where the trouble begins.</p>\n<p>You see, I’m using an otherwise documented internal library that has a set of types already defined for it. This particular function is not a part of the types for this class. So, when I tried to call it, I got a compiler error.</p>\n<p>So, I pulled out the named index trick above and got the code to compile and ultimately got my test to run successfully. It all just requires that we think outside the box a bit and most any problem can be solved.</p>\n<h2 id=\"Addendum\"><a href=\"#Addendum\" class=\"headerlink\" title=\"Addendum\"></a>Addendum</h2><p>As TypeScript has matured, the trick above doesn’t work quite as directly as when I originally wrote this article.  Now, you need to assign the original variable to a type of Object before using the indexer method, or you can just cast your variable to an Object and use the indexer.  But typescript is now smart enough to know that the indexer is accessing a property that is private and it won’t let you at it.</p>\n",
            "tags": [
                "private",
                "testing",
                "typescript"
            ]
        },
        {
            "id": "http://davembush.github.com/are-you-thinking-clearly-about-your-architectural-choices/",
            "url": "http://davembush.github.com/are-you-thinking-clearly-about-your-architectural-choices/",
            "title": "Are You Thinking Clearly About Your Architectural Choices?",
            "date_published": "2015-09-17T11:30:00.000Z",
            "content_html": "<p>Recently someone asked me where the business rules should go in an MVC framework.  The Model or the Controller? This reminded me of a post I wrote when ASP.NET MVC was first released.</p>\n<ul>\n<li><a href=\"/aspnet-mvc-model-bll-or-dal/\">ASP.NET MVC – Model !&#x3D; BLL or DAL</a></li>\n</ul>\n<p>But today I want to cover a broader topic common to everyone, not just programmers.  Not being able to think outside the box.</p>\n<p><img src=\"/uploads/2015/09/image2.png\" alt=\"image\" title=\"image\"></p>\n<span id=\"more\"></span>\n\n<h2 id=\"Here’s-the-deal\"><a href=\"#Here’s-the-deal\" class=\"headerlink\" title=\"Here’s the deal.\"></a>Here’s the deal.</h2><p>Good salesmen have known for years that the best way to close the sale is to ask the customer to pick between two buying decisions.  You never ask, “So, did you want to buy that today?”  Because almost invariably the customer will say, “No” because the implication is, “Did you want to buy that today, or some other day?”  And “some other day” is always a better option to the customer.  No, the proper way to frame the question is, “So, how did you want to pay for that?  Cash or Credit?” or “Did you want the blue one or the green one?”  By doing this, the customer is no longer even thinking “later” is an option.  The only options he is thinking about are the options he’s been presented with.  This isn’t to say that there isn’t a customer who can fight past this and respond, “No, I was just looking today.”  But the chance of the customer leaving without buying have just been reduced dramatically because two buying choices have been presented.</p>\n<p>So, what does this have to do with programming?  Well, that’s exactly what happens when we’ve been given an architectural framework to program with.</p>\n<p>Someone shows you the MVC pattern and you immediately think that the only places code can live in our application are in the Model, the View, or the Controller.</p>\n<p>Someone shows you the MVP pattern and you think code can only live in the Model, the View or the Presenter.</p>\n<p>Someone shows you the MVVM pattern and we think code only lives in the Model, the View or the ViewModel.</p>\n<p>And so, I ask you. Given any of those three patterns, where do you put your business logic?  And while we are at it, where does your data access logic go?</p>\n<h2 id=\"Do-we-place-it-in-the-model\"><a href=\"#Do-we-place-it-in-the-model\" class=\"headerlink\" title=\"Do we place it in the model?\"></a>Do we place it in the model?</h2><p>Well, what is the model for?  A model is for storing data.  For most of us the data is a record that is displayed on the screen as a series of fields.  But how it gets displayed and what it actually contains doesn’t matter as much as the fact that the model <strong>stores data</strong>.  Nothing there even hints at executing code.  In fact, I would argue that for most of our applications, the model should be so simple that it doesn’t need to be tested.</p>\n<h2 id=\"How-about-the-Controller-or-the-Presenter\"><a href=\"#How-about-the-Controller-or-the-Presenter\" class=\"headerlink\" title=\"How about the Controller or the Presenter?\"></a>How about the Controller or the Presenter?</h2><p>A controller or presenter sends commands to the model to change its state and sends commands to the view to update the presentation.  Here things get a little confusing.  It sounds like, because the controller is sending commands the the model and the view that it is where the business rules live.</p>\n<p>In fact, when I was first introduced to MVC, this is what I thought was true.  But notice there is nothing in the statement about what a controller does that would indicate that it is anything more than a traffic cop.</p>\n<h2 id=\"View-Model\"><a href=\"#View-Model\" class=\"headerlink\" title=\"View Model?\"></a>View Model?</h2><p>In the MVVM pattern, it becomes even clearer that there is no clear place for business logic because the ViewModel holds the state of the view.  The presenter or controller part is handled by a binder that is typically part of the framework you are using, as with KnockOut.</p>\n<h2 id=\"Thinking-outside-the-box\"><a href=\"#Thinking-outside-the-box\" class=\"headerlink\" title=\"Thinking outside the box\"></a>Thinking outside the box</h2><p>Now that we’ve demonstrated that none of these frameworks explicitly state where the business logic should go, where should we put it? In my case, what I’ve started doing is that I’ve created a service layer, or a business rules layer.  It handles the processing of the logic to get the rest of the code working.  The classes in this layer can either be passed the model or viewmodel in which they can change the state directly, or they can return data that the controller can distribute as needed.  In my most recent application I selected the pass the model in approach.  The result was code that was much more testable than what I had started with, which is the whole point of placing the business rules outside of the pattern to begin with.  </p>\n<h3 id=\"Resources\"><a href=\"#Resources\" class=\"headerlink\" title=\"Resources\"></a>Resources</h3><ul>\n<li><a href=\"//en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller\">Model View Controller</a></li>\n<li><a href=\"//en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93presenter\">Model View Presenter</a></li>\n<li><a href=\"//en.wikipedia.org/wiki/Model_View_ViewModel\">Model View ViewModel</a></li>\n</ul>\n",
            "tags": [
                "programming",
                "testing",
                "architecture"
            ]
        },
        {
            "id": "http://davembush.github.com/the-fallacy-of-motion/",
            "url": "http://davembush.github.com/the-fallacy-of-motion/",
            "title": "The Fallacy of Motion",
            "date_published": "2015-07-23T10:00:00.000Z",
            "content_html": "<p><img src=\"/uploads/2015/07/image1.png\" alt=\"image\" title=\"image\"></p>\n<p>I had this thought this past week that we tend to believe that if we are in motion, we are accomplishing something.  That being busy somehow equals being productive.  And then I started thinking about how this is almost universal.  It doesn’t just impact how we program, which I’ll get to eventually, but it impacts all of our life.</p>\n<span id=\"more\"></span>\n\n<h2 id=\"Let-Me-Illustrate\"><a href=\"#Let-Me-Illustrate\" class=\"headerlink\" title=\"Let Me Illustrate\"></a>Let Me Illustrate</h2><p>Have you ever driven to some location and had your favorite GPS system route you multiple ways?  How many of you take the route that is, according to your GPS, longer, just because the roads are 65mph instead of 45mph?  Or an even better example.  You hit a traffic jam and, even though ever indication is that you’ll be out of the traffic in a few minutes, you take an alternate route simply because the traffic is moving on that other road.  In both cases you probably know that you won’t get to your destination any faster, in fact you may get to your destination slower, but you still opt to take the moving route instead of the one that isn’t moving or is moving relatively slowly.  I’ve even heard people say… shoot I’ve even said… “I want to take this route because it moves faster.”  I like FEELING like I’m getting to my destination faster even if the reality is that I’m not.</p>\n<p>And then there is the issue of your job.  How many of you have to look busy for your peers to think that you ARE busy?  But as programmers, how true is that?  Unless you do some kind of unskilled labor, I doubt it is true of most people who work.  And yet, because we are all paid by the hour (yes, even those of you who are salaried are still trading hours for dollars) there is a perception that, somehow, if we are not in motion, we are not really working.  But is that true? I remember hearing a story about a programmer who spent half his day “staring at the ceiling” who was twice as productive as any of his peers.  Why is that?  Because he spent half his day thinking about the problem before he ever started writing a line of code.</p>\n<p>I remember back in the day when I was coding on 8088 computers, a compile and link cycle could take up to 10 minutes.  Because I recompile and test every time I’m made a runnable change, I had a lot of 10 minute breaks.  I used this time to think about the problem I was working on.  This was not intentional, it just happened naturally.  I think it made me more productive than if I were just churning code all day long at the speed our computers work today.</p>\n<p>And then there is this side project I’m working on.  I tend to work on it a half hour at a time as I have time.  Between my main gig that takes up 40 hours a week, and some side gigs that I have, I have a very small amount of time to work on this project.  Some days I don’t work on it simply because I’m too tired.  But sometimes, even when I’m not sitting in front of my computer, I’ll sit on my sofa doing nothing and think about the project.  It is in those times that I figure out where I want to take the project next, or how to solve a problem I’ve run into.  That time thinking, even though there is no motion, has made the resulting code that much better.</p>\n<h2 id=\"The-Fallacy-of-Motion-and-Testing\"><a href=\"#The-Fallacy-of-Motion-and-Testing\" class=\"headerlink\" title=\"The Fallacy of Motion and Testing\"></a>The Fallacy of Motion and Testing</h2><p>I’m sure you saw this coming, but one has to ask, is it the fallacy of motion that prevents us from testing our code? At my main gig, I have to admit, I’m bored.  There are a lot of reasons for this.  But one of them is that I spend a lot of time waiting for integrations tests to run to verify that my code is still working.  To be clear, I have way more unit test than integration test at this point.  But with the changes I’m currently making to the system, I’m more likely to find issues via the integration tests than I am from the unit tests.</p>\n<p>Compare this to a project I’m working on for another client where I’m primarily writing new code.  I’m a lot less bored.  The day zips by.  I FEEL more productive.</p>\n<p>And yet, the degree of certainty I have that the code I wrote for my main gig works as I designed it to work is a lot higher than the code I’m currently writing because I have more tests.</p>\n<p>This past week those tests actually showed me that my change wasn’t working entirely the way I wanted it to.  I probably would not have found it any other way.  I’m not even sure the people testing my code would have found it.  They aren’t those kind of testers.  And so I’ve proven to myself one more time that testing, while it feels slower, really is not just the right thing to do, but ultimately the faster thing to do.</p>\n<p>Think about what would have happened if I didn’t have these tests in place.  I would have released the code, eventually the bug would have revealed itself, and I would be left scrambling to fix the bug.  As it is, I was able to fix the bug in a somewhat leisurely manner because I found it early.</p>\n<p>And yet, I don’t FEEL productive.  As much as I’m convinced that Test Driven Development is the right way to go, I still struggle with this Fallacy of Motion.</p>\n<h2 id=\"We-Don’t-Have-Time-to-Test\"><a href=\"#We-Don’t-Have-Time-to-Test\" class=\"headerlink\" title=\"We Don’t Have Time to Test\"></a>We Don’t Have Time to Test</h2><p>I heard this again this past week.  “When you are working on a project with a tight deadline, you can’t always test because you don’t have enough time.” What?! Is this the Fallacy of Motion at work again? I would argue that it is precisely BECAUSE you are working under a tight deadline that you NEED to write test.</p>\n<p>Think about this, you have this tight deadline.  Great.  So you are not going to think clearly.  You are going to rush.  You will write incomplete code.  Your methods won’t verify input parameters.  You’ll have null pointer exceptions.  Your code will do what it is supposed to do, but will it not do what it shouldn’t do?  How will you know?  And who is going to catch the bug? Well we know the answer to that last question.  The people using your code will catch the bug.  This will make you look like an idiot.  You are because it is something that should have been caught.  It will also mean that you’ll need to track down the problem, fix the problem, and re-deploy the software.  And this is faster?  Faster than what?! Of course, “We don’t have time to do it right, but we always have time to do it over.”</p>\n<h2 id=\"Slow-and-Steady\"><a href=\"#Slow-and-Steady\" class=\"headerlink\" title=\"Slow and Steady\"></a>Slow and Steady</h2><p>So, slow down.  Do things right.  Remember the story of the tortoise and the hare.  The race doesn’t always go to the fastest but the one who is steady and persistent.  The one who doesn’t cut corners.  The one who consistently produces solid code.</p>\n",
            "tags": [
                "tdd",
                "testing",
                "productivity"
            ]
        },
        {
            "id": "http://davembush.github.com/what-browser-is-selenium-currently-running/",
            "url": "http://davembush.github.com/what-browser-is-selenium-currently-running/",
            "title": "What Browser Is Selenium Currently Running",
            "date_published": "2015-07-16T10:00:00.000Z",
            "content_html": "<p><img src=\"/uploads/2015/07/ppl-kid-044.jpg\" alt=\"ppl-kid-044\" title=\"ppl-kid-044\"></p>\n<p>This probably doesn’t happen all that often, but this last week I came across the need to know which browser I was running my selenium test against.  I figured that buried deep in the object structure of Selenium, there MUST be a way of finding out what browser I was currently running.  As it turns out, I was right.  The situation that caused this requirement is that the place where I’m currently writing most of my code is upgrading all the Firefox browsers.  I was asked to make sure the code we were running still works with the new browser.  When I did, I found that some of my tests broke even though the test itself still succeeds when it is run manually.  In fact, they only broke when running against this new version of Firefox.</p>\n<span id=\"more\"></span>\n\n<p>Now to be clear, this isn’t really a Firefox problem.  In fact, the new version of Firefox runs my test the way I would expect.  It is the current version of IE and the older version of Firefox that we were running in combination with EXTjs 4.2 that was a problem.  So, now I’m in a situation where I need to run my work around for everything except for this new version of Firefox.</p>\n<p>You see, we have several dropdown list.  To select an item from the list, I cursor down until the correct item is found.  My old implementation actually needed to cursor down twice.  The first time made the list display and kept the current item selected.  The second down arrow selected the next item.  The tab key keeps that item as the selected one.  The new version of Firefox only requires one down arrow and a tab to do the same thing.</p>\n<p>Since we have multiple dropdowns that behave the same way, I made this code an extension method, so I only have to do it once.  The other thing I’m doing that makes this work is that I’m proxying the elements using the FindsBy attribute.</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"meta\">FindsBy(How = How.Id, Using = <span class=\"string\">&quot;someIdHere&quot;</span>), CacheLookup</span>]</span><br><span class=\"line\"><span class=\"keyword\">private</span> IWebElement SomePropertyName</span><br><span class=\"line\">    &#123; <span class=\"keyword\">get</span>; [UsedImplicitly] <span class=\"keyword\">set</span>; &#125;</span><br></pre></td></tr></table></figure>\n\n<p>Under the hood this creates a proxy to the real element.  What we need access to is the Driver object that this element is using to get at the element on the browser.  I do that by going after the element’s WrappedDriver property.  In most code you’ll see this cast to an IWrapsDriver interface.  But it is actually pointing to a RemoteWebDriver object.  If we cast the type to that, we can then go after the Capabilities object which will give us access to the BrowserName. And so, my resulting code looks something like this:</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> keyDown = Keys.Down + Keys.Down;</span><br><span class=\"line\"><span class=\"keyword\">var</span> wrapsDriver = ((IWrapsDriver)(element)).WrappedDriver;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (wrapsDriver != <span class=\"literal\">null</span>)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (wrapsDriver.GetType() == <span class=\"keyword\">typeof</span>(RemoteWebDriver) &amp;&amp;</span><br><span class=\"line\">        ((RemoteWebDriver)wrapsDriver)</span><br><span class=\"line\">        .Capabilities.BrowserName ==  <span class=\"string\">&quot;firefox&quot;</span>)</span><br><span class=\"line\">     &#123;</span><br><span class=\"line\">        keyDown = Keys.Down;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Which allows me to use the keyDown variable where ever I need to key down to select an item from the list.</p>\n<p>The element variable above represents the proxy element created by the FindsBy attribute.  The code is in the extension method that I mentioned previously, so it is actually the parameter that got passed into the extension method.</p>\n",
            "tags": [
                "c#",
                "testing",
                "selenium",
                "automation",
                "browser"
            ]
        },
        {
            "id": "http://davembush.github.com/setting-up-specflow/",
            "url": "http://davembush.github.com/setting-up-specflow/",
            "title": "Setting up SpecFlow",
            "date_published": "2015-05-21T10:00:00.000Z",
            "content_html": "<p>I’ve been asked to train a group of developers in the use of <a href=\"//www.specflow.org/\">SpecFlow</a> so that they can use it to write Selenium Tests.  So, in an attempt to “kill two birds with one stone” I thought today’s post would cover how to get the SpecFlow environment setup.  Not only will it help me prepare for the training session I will be leading, but it will help me when I need to set this up the next time because it tends to be a bit confusing when you setup a new project.  You’ll see why in a bit.</p>\n<h2 id=\"Installing-SpecFlow\"><a href=\"#Installing-SpecFlow\" class=\"headerlink\" title=\"Installing SpecFlow\"></a>Installing SpecFlow</h2><span id=\"more\"></span>\n\n<p>The first thing you’ll want to do is to install the SpecFlow Visual Studio integration.  You do this by navigating to “Tools” –&gt; “Extension and Updates …” <img src=\"/uploads/2015/05/image.png\" alt=\"image\" title=\"image\"> This will bring up a dialog box where you’ll want to select the “Online” branch <img src=\"/uploads/2015/05/image1.png\" alt=\"image\" title=\"image\"> You will notice in the upper right corner of this dialog, a search box.  Type in “SpecFlow” to find the SpecFlow extensions.</p>\n<p><img src=\"/uploads/2015/05/image2.png\" alt=\"image\" title=\"image\"> In the image above, I’ve already installed it, so there is a check box.  You’ll want to click the “Download” or “Install” button that displays when it isn’t installed.</p>\n<h2 id=\"Creating-a-Test-Project\"><a href=\"#Creating-a-Test-Project\" class=\"headerlink\" title=\"Creating a Test Project\"></a>Creating a Test Project</h2><p>Now that you’ve installed the extension, you can create a new test project.  You might expect a SpecFlow template to appear somewhere in the project list.  Sorry, that’s not what you get.  You could create one yourself if you really wanted.  To create a SpecFlow project, all you really need to do is to create a Class Library project.</p>\n<p><img src=\"/uploads/2015/05/image3.png\" alt=\"image\" title=\"image\"></p>\n<h2 id=\"Adding-a-Reference\"><a href=\"#Adding-a-Reference\" class=\"headerlink\" title=\"Adding a Reference\"></a>Adding a Reference</h2><p>And now, this is where I always get tripped up for a minute.  You can create a new feature file, but there is a menu item you should see that will allow you to add feature steps to a class file and you won’t see that until you add a reference to SpecFlow.  To do that, you will need to go back to NuGet.  This time use the menu option, “Tools” –&gt; “NuGet Package Manager” –&gt; “Manage NuGet Packages for Solution…”</p>\n<p><img src=\"/uploads/2015/05/image4.png\" alt=\"image\" title=\"image\"></p>\n<p>Once again a dialog will display.  Make sure you are in the “Online” branch on the left and type “SpecFlow” into the search area in the upper right corner of the dialog.</p>\n<p><img src=\"/uploads/2015/05/image5.png\" alt=\"image\" title=\"image\"></p>\n<p>I always use SpecFlow with NUnit, if you install SpecFlow.NUnit it will automatically install the SpecFlow dependencies with it.  If you prefer to use xUnit, you can install that and the SpecFlow dependencies will install automatically.</p>\n<h2 id=\"Create-Your-First-Feature-File\"><a href=\"#Create-Your-First-Feature-File\" class=\"headerlink\" title=\"Create Your First Feature File\"></a>Create Your First Feature File</h2><p>Now that you have the environment setup, you can actually use SpecFlow.  To create your first feature file, you can right click on the project and select “Add” –&gt; “New Item…” from the context menu.  Just like you would add a new file to the project any other time.  From the resulting dialog, select “SpecFlow Feature File”, give it an appropriate file name, and click the “Add” button.  When I name my SpecFlow feature files, I try to name them similar to the feature it will be testing.</p>\n<p><img src=\"/uploads/2015/05/image6.png\" alt=\"image\" title=\"image\"></p>\n<p>The resulting feature file will have a sample of how your feature will be setup.  You will want to change this to test whatever it is you are testing.  The next thing you will want to do is to create a Step Definition file.  This is a regular C# file with a Binding attribute added.  The file that SpecFlow will generate for you will match the template they provided in the feature file.  What I want you to do next is the delete all of the methods in the class so that I can show you how to add additional methods.  I’m not going to go to the trouble of showing you the screen shots.  I figure you know how to get to it and the image above shows it listed in the “Add File” dialog.</p>\n<p>Next, go back to your feature file and right click on the provided “Given” line, you should see a menu option that says, “Generate Step Definitions”</p>\n<p><img src=\"/uploads/2015/05/image7.png\" alt=\"image\" title=\"image\"></p>\n<p>If you click this, you’ll get a dialog like this:</p>\n<p><img src=\"/uploads/2015/05/image8.png\" alt=\"image\" title=\"image\"></p>\n<p>A couple of things you should notice.  One is the name of the class you are going to create if you click the “Generate” button.  I would advise against using the generate button.  Instead, we are going to use the “Copy methods to clipboard” method.  If you want to try to keep things segmented, you might choose to copy some of the steps to the clipboard and paste them into one file and copy others and paste them into another file.  This list will only list steps that you don’t already have definitions for, so you don’t need to worry about producing duplicate definitions.</p>\n<p>If you copy the methods onto the clipboard and paste them into the step file, you should end up with code that is functionally equivalent to what the new file template created for you.</p>\n<h2 id=\"Just-A-Start\"><a href=\"#Just-A-Start\" class=\"headerlink\" title=\"Just A Start\"></a>Just A Start</h2><p>This is enough to get you setup, but there is more to cover, so make sure you subscribe to the mailing list to get notified when I post another article about SpecFlow.</p>\n",
            "tags": [
                "tdd",
                "testing",
                "bdd",
                "specflow"
            ]
        },
        {
            "id": "http://davembush.github.com/run-nunit-from-visual-studio/",
            "url": "http://davembush.github.com/run-nunit-from-visual-studio/",
            "title": "Run NUnit from Visual Studio",
            "date_published": "2015-04-30T10:00:00.000Z",
            "content_html": "<p>For the purposes of this post, I’m going to assume that you already have the NUnit Test Runner installed.  The question you are looking to get answered is, “How do I run NUnit from Visual Studio” or even more importantly, “How do I DEBUG NUnit test from Visual Studio”.  The following step by step should help you.</p>\n<p>Right click on the project in Solution Explorer that represents your test project.</p>\n<p>From the resulting menu, select “Properties.” In the resulting window, select the “Debug” tab from the left-hand side of the window.</p>\n<p><img src=\"/uploads/2015/04/Properties_Debug.png\" alt=\"Properties_Debug\" title=\"Properties_Debug\"></p>\n<p>You will want to select “Start external program” and point it to the UNnit runner that got installed when you installed NUnit.</p>\n<p>Now, whenever you run this project, with or without the debugger, NUnit will start up.</p>\n<p>Note: there is no reason to pass parameters telling it what DLL you want to run because it will load the last DLL it had up.</p>\n<p>But, if you wanted to do that, you could pass the location of the DLL as a parameter to the GUI runner.</p>\n<p>There are other parameters you can use.</p>\n<span id=\"more\"></span>\n\n<p>Check the documentation for the version of NUnit you are using for the specifics.</p>\n<p>If you are running .NET 4.x, you’ll want to go to the location in your file system where NUnit.exe lives and find the NUnit.exe.config file.</p>\n<p>Find the startup element (<code>&lt;startup&gt; .... &lt;/startup&gt;</code>) and place this line in between the open and close startup tags:</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">supportedRuntime</span> <span class=\"attr\">version</span>=<span class=\"string\">&quot;4.0&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>If you miss this step, you won’t be able to debug your 4.0 code. Alternatively, you can just set your project to use .NET 3.5. So, let’s give it a try. First, put some code in the test method you just created. For our purposes, we’ll just put in a console writeline so we have somplace to put a breakpoint.</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">MyFirstTestMethod</span>()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    Console.WriteLine(<span class=\"string\">&quot;Inside MyFirstTestMethod&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Next set a breakpoint on the <code>Console.WriteLine</code> method and then run your project with the debugger.</p>\n<p>Once NUnit loads the DLL, click the “Run” button in NUnit.</p>\n<p>If everything is setup correctly, you should stop on the breakpoint you set.</p>\n<p>You may have noticed that we put several <code>Console.WriteLines()</code> in our code but they aren’t displaying anywhere.  So, where did they go?  How can we see them? By default the “Text Output” tab displays all of the <code>Console.WriteLine()</code> messages as well as all of the test results.  If all you care to see is the test results, you should select the “Errors and Failures” tab.  Personally, I prefer to work in the “Text Output” tab and I suggest that you do the same.</p>\n<p>As an alternative to this, you can just pick up a copy of ReSharper, which has an NUnit Test Runner built into it.  All you need to do to debug a test is selection the test and choose debug from the context menu.  It will save you a ton of time.</p>\n<p>Another option would be to pick up the MS Test Adapter from nunit.org.  But, I’ve never liked the way MS Test renders the tests results.  So, I don’t recommend it.  Obviously, your mileage may vary.</p>\n",
            "tags": [
                "testing",
                "debugging",
                "nunit"
            ]
        },
        {
            "id": "http://davembush.github.com/dependency-injection-frameworks-are-not-dependency-injection/",
            "url": "http://davembush.github.com/dependency-injection-frameworks-are-not-dependency-injection/",
            "title": "Dependency Injection Frameworks Are NOT Dependency Injection",
            "date_published": "2015-03-12T11:00:00.000Z",
            "content_html": "<p><img src=\"/uploads/2015/02/land-0148.jpg\" alt=\"land-0148\" title=\"land-0148\"></p>\n<p>As you start your journey down the road of Unit Testing you will discover that part of what makes code testable is this concept of <a href=\"//en.wikipedia.org/wiki/Dependency_injection\" title=\"Dependency injection\">Dependency Injection</a>.  As you explore further, you will see people mentioning various Dependency Injection frameworks.</p>\n<p>You may naturally assume that to implement Dependency Injection, you will need to select an use a Dependency Injection framework.</p>\n<p>But, Dependency Injection has nothing to do with using a Dependency Injection framework.  The frameworks are there because:</p>\n<ol>\n<li> much of our existing code is code that has too many dependencies and the framework helps us break those dependencies without having to refactor too much of our code and</li>\n<li>to give us a way to easily swap out one object for another when our code is structured in such a way as to not have dependencies at all.</li>\n</ol>\n<span id=\"more\"></span>\n\n<h2 id=\"So-what-then-is-Dependency-Injection\"><a href=\"#So-what-then-is-Dependency-Injection\" class=\"headerlink\" title=\"So, what then is Dependency Injection?\"></a>So, what then is Dependency Injection?</h2><p>I once heard this maxim that explains it best,</p>\n<blockquote>\n<p>Classes should either create stuff, or do stuff, but no one class should do both.</p>\n</blockquote>\n<p>Much of our code looks something like this:</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">ReceiveSAMLResponse</span>(<span class=\"params\"></span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    <span class=\"keyword\">out</span> SAMLResponse samlResponse,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">    <span class=\"keyword\">out</span> String relayState</span>)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">// Receive the [SAML](//en.wikipedia.org/wiki/Security_Assertion_Markup_Language &quot;Security Assertion Markup Language&quot;) response over the</span></span><br><span class=\"line\">    <span class=\"comment\">//specified binding.</span></span><br><span class=\"line\">    XmlElement samlResponseXml;</span><br><span class=\"line\"></span><br><span class=\"line\">    ServiceProvider.ReceiveSAMLResponseByHTTPPost(</span><br><span class=\"line\">        HttpContext.Current.Request,</span><br><span class=\"line\">        <span class=\"keyword\">out</span> samlResponseXml, <span class=\"keyword\">out</span> relayState);</span><br><span class=\"line\">    SAMLResponse resp = <span class=\"keyword\">new</span> SAMLResponse(samlResponseXml);</span><br><span class=\"line\">    XmlElement samlAssertionElement =</span><br><span class=\"line\">        resp.GetSignedAssertions()[<span class=\"number\">0</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Verify the response&#x27;s signature.</span></span><br><span class=\"line\">    XmlDocument doc = <span class=\"keyword\">new</span> XmlDocument();</span><br><span class=\"line\">    <span class=\"comment\">//metadata file path (holds the description key).</span></span><br><span class=\"line\">    doc.Load(HttpContext.Current.Server.MapPath(<span class=\"string\">&quot;~/SAML.xml&quot;</span>));</span><br><span class=\"line\">    XmlElement root = doc.DocumentElement;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!SAMLAssertionSignature.Verify(</span><br><span class=\"line\">        samlAssertionElement, ReadMetadata(root)))</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        samlResponse = <span class=\"literal\">null</span>;</span><br><span class=\"line\">        relayState = <span class=\"literal\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// Deserialize the XML.</span></span><br><span class=\"line\">    samlResponse = <span class=\"keyword\">new</span> SAMLResponse(samlResponseXml);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Yes, this is real code from a system I worked on.  The original code was written three or four years ago and this specific code is code I was given by another company.  I just used copy and paste inheritance to get it working in our code.</p>\n<p>That’s not to say I haven’t written code that has just as many problems.</p>\n<p>There are several things that are wrong with this code, but for now all I want to focus on is the Dependency Injection issue.</p>\n<p>All this code is trying to do is to deserialize the encrypted samlResponse object that was posted to the login form.  At least this code isn’t in the login form!  It has that much going for it.</p>\n<h2 id=\"But-here-are-places-where-it-is-dependent-on-too-much\"><a href=\"#But-here-are-places-where-it-is-dependent-on-too-much\" class=\"headerlink\" title=\"But here are places where it is dependent on too much:\"></a>But here are places where it is dependent on too much:</h2><ul>\n<li>ServiceProvider is a static class and called directly.</li>\n<li>ReceiveSAMLResponseByHTTPPost is dependent on the Request object that we retrieve from HttpContext.</li>\n<li>I create a new SAMLResponse object right before I call GetSignedAssertions()</li>\n<li>I create a new XmlDocument object so I can load the SAML.xml file</li>\n<li>SAMLAssertionSignature is static and called directly</li>\n</ul>\n<p>In fact, this method is one huge dependency mess.  And I’m very aware of the mess that it is in because the company we wrote this code for just recently switched providers.  As we tried to get this working, I had no way of testing this code in isolation without adding code directly into this method.  We got it working, but it didn’t have to be that hard.</p>\n<h2 id=\"So-here’s-what-I’d-do-to-this-code\"><a href=\"#So-here’s-what-I’d-do-to-this-code\" class=\"headerlink\" title=\"So, here’s what I’d do to this code.\"></a>So, here’s what I’d do to this code.</h2><ul>\n<li>Since ServiceProvider and SAMLAssertionSignature are calls to a third party API, I would wrap them in a none static class that I can instantiate.</li>\n<li>I would have the class that ultimately calls this method either pass in the dependent objects to the constructor, pass them in to the method that calls this, or set properties in the class.  This is what it means to inject dependencies.</li>\n<li>I would look for some way to avoid creating a new SAMLResponse object.  I’m not looking at the API documentation, but it would be great if I could new up the object and call a method, or set a property to give it the samlResponseXml variable.  If I had to, I’d probably wrap SAMLResponse in another class so that I could gain this functionality.</li>\n<li>Finally, I would make each of the dependent object based on an interface so that I could swap them out.  In the case of some of these classes, I may need to wrap them in another class that I have control over so that I can implement an interface.  For example, as things stand, I would not be able to create a fake request object because Request is a system class that does not implement an interface.</li>\n</ul>\n<h2 id=\"Advantages\"><a href=\"#Advantages\" class=\"headerlink\" title=\"Advantages\"></a>Advantages</h2><p>After making all of these changes, I would be able to create a test harness for this code, create fake versions of the objects, and verify that this method does what we intend for it do.</p>\n<p>Where this would have been particularly helpful is over this last week when we were trying to get this all working with the new provider.  In that case, I could have faked out the request object with what they were sending us and run it through a debugger to figure out what wasn’t quite right.</p>\n<h2 id=\"No-Dependency-Injection-Framework\"><a href=\"#No-Dependency-Injection-Framework\" class=\"headerlink\" title=\"No Dependency Injection Framework\"></a>No Dependency Injection Framework</h2><p>Finally, you’ll notice that no where in this code did I have to use a Dependency Injection framework to get this all working.</p>\n",
            "tags": [
                "tdd",
                "test driven development",
                "testing",
                "dependency injection"
            ]
        },
        {
            "id": "http://davembush.github.com/why-johnny-can-t-do-test-driven-development/",
            "url": "http://davembush.github.com/why-johnny-can-t-do-test-driven-development/",
            "title": "Why Johnny Can't do Test Driven Development",
            "date_published": "2015-03-05T12:00:00.000Z",
            "content_html": "<p><img src=\"/uploads/2015/02/ppl-kid-05.jpg\" alt=\"ppl-kid-05\" title=\"ppl-kid-05\"></p>\n<p>Last week we looked at a few excuses developers give for not testing their code as they develop it (<a href=\"/excuses-for-not-testing/\">Excuses For Not Testing</a>).  We finished that by mentioning that most of the code you write simply isn’t testable.  You can’t practice Test Driven Development on something that isn’t testable in the first place. And there, folks, is why Johnny can’t test.</p>\n<span id=\"more\"></span>\n\n<h2 id=\"But-it’s-not-Johnny’s-fault\"><a href=\"#But-it’s-not-Johnny’s-fault\" class=\"headerlink\" title=\"But, it’s not Johnny’s fault.\"></a>But, it’s not Johnny’s fault.</h2><p>Think about what makes code testable.  At it’s core, testable code is loosely coupled.  But what do we mean by “loosely coupled”? Well, let’s start with the large picture.  Assuming you have a multi-layered architecture.  That is, you have your code broken out into View, Business Rules, and Data Access.  Raise your hand if your business rules access your view directly.  Would you be able to test your business rules without your view? At a finer level of detail.  How much of your code creates the objects it needs within the same class, or worse, the same method, that will need it?  Without using a Dependency Injection framework, could you swap out any objects your class uses?  Have you even heard the rule, “Classes should either create things or do things, but never both within the same class?”  If you did that, how much more testable would your code be? If you were to write a test for a method, how much setup work would you have to do?  If it is more than a few lines, your method is probably doing too much, either directly or indirectly.  You’ll need to find a way to make it do less.</p>\n<p>Maybe in future post, I’ll address some of these issues in code.  But for now, I just want to address the problem.</p>\n<p>Again, it isn’t Johnny’s fault that he doesn’t know this stuff.  Think about the code samples we tend to look at.</p>\n<h2 id=\"When-is-the-last-time-you-saw-sample-code-that-was-testable\"><a href=\"#When-is-the-last-time-you-saw-sample-code-that-was-testable\" class=\"headerlink\" title=\"When is the last time you saw sample code that was testable?\"></a>When is the last time you saw sample code that was testable?</h2><p>Short rant here, but I’ve been working with EXTjs (version 4.x) for the last year and a half.  Sencha will tell you that this uses a MVC architecture.  But what they mean by “Controller” really functions more like a “ViewController.”  That is, the controller is tightly bound to the view that it handles events for.  The way they have things setup, you access View elements by getters that are automatically generated for you in the view.</p>\n<p>The problem with this is that you can’t really test the controller logic without bringing along the view.</p>\n<p>Sencha isn’t the only company who does this.  Most of the sample code for WebForms did the same kind of thing.</p>\n<p>Now, the reason this is an issue is that sample code is how most of the newer programmers are learning how to program.</p>\n<p>I heard recently that statistically, because of the growth of the industry, half of the programmers available have 5 years or less of experience.  I don’t know about you, but the first 5 years of my programming career, I was still figuring out how to program.  I wasn’t thinking about architecture issues and I certainly wasn’t thinking about formal testing.  From what I’ve seen of the new recruits, I don’t think they are either.  Shoot.  Some of the ones I’ve interacted with couldn’t code themselves out of a paper bag without help.</p>\n<h2 id=\"And-so-what’s-the-conclusion-to-all-of-this\"><a href=\"#And-so-what’s-the-conclusion-to-all-of-this\" class=\"headerlink\" title=\"And so, what’s the conclusion to all of this?\"></a>And so, what’s the conclusion to all of this?</h2><p>I don’t know.  Maybe the first step is to admit that we have an issue here and that the issue is so much a management or time issue as it is an education and laziness issue.  That the code we generate shouldn’t assume that people will take the code and adapt it into testable code, but that we should write testable code as our sample code.  Maybe colleges should teach basic software architecture and TDD as part of the curriculum.  Maybe those of us who know better should just start testing and figure this all out well enough to explain it to others.</p>\n",
            "tags": [
                "tdd",
                "test driven development",
                "testing",
                "bdd"
            ]
        },
        {
            "id": "http://davembush.github.com/excuses-for-not-testing/",
            "url": "http://davembush.github.com/excuses-for-not-testing/",
            "title": "Excuses For Not Testing",
            "date_published": "2015-02-26T12:00:00.000Z",
            "content_html": "<p><img src=\"/uploads/2015/02/ppl-kid-044.jpg\" alt=\"ppl-kid-044\" title=\"ppl-kid-044\"></p>\n<p>As I started my own journey into unit testing, I slowly began to realize that it was really easy to come up with reasons to NOT test my code as I was writing it, even once I understood what that was supposed to look like. The reason I think most programmers don’t unit test code, once they understand what it is they are supposed to be doing is that they don’t feel like they have permission. To this I also answer, “How much permission do you need?”</p>\n<span id=\"more\"></span>\n\n<h2 id=\"Do-you-really-need-permission\"><a href=\"#Do-you-really-need-permission\" class=\"headerlink\" title=\"Do you really need permission?\"></a>Do you really need permission?</h2><p>Do you ask for permission to compile and link the code? Do you ask for permission to write every line of code to make the system do what it should do? Do you ask for permission to run your code periodically to make sure it does what you had in mind when you wrote the code? Do you periodically add code that makes you feel good but is not directly related to the task at hand? (Admit it, I don’t think I know of any programmer who doesn’t.) Then why do we feel like we need permission to write unit test for our code?</p>\n<h2 id=\"Are-you-convinced-that-you-need-test\"><a href=\"#Are-you-convinced-that-you-need-test\" class=\"headerlink\" title=\"Are you convinced that you need test?\"></a>Are you convinced that you need test?</h2><p>We don’t write test code because we aren’t convinced it is necessary to do the job we’ve been given. We complain that our managers don’t want us to write unit test. But the problem is that you asked for permission in the first place. And, by asking for permission, you’ve basically told your manager that unit testing is optional. Your manager has said “no” because he thinks YOU think it is optional.</p>\n<h2 id=\"It’s-not-your-manager’s-job\"><a href=\"#It’s-not-your-manager’s-job\" class=\"headerlink\" title=\"It’s not your manager’s job\"></a>It’s not your manager’s job</h2><p>It isn’t his job to understand that not testing will produce technical debt. He’s not even interested in understanding what technical debt is. All he cares about is this. When will this project be done?  When you say it is done, will it work as expected or will it have a lot of bugs that need to be fixed yet? Most of the managers I’ve worked for in the past will accept whatever number I give them once they understand that when I deliver the software to them, it is going to work.  In fact, I’ve even gotten asked to do jobs BECAUSE my code tends to work more often than anyone else they know who could do the job.</p>\n<p>Now, I will admit, that in some cases there are places where you’ve been explicitly told to not create unit test. But even here I will assert it is because someone asked management the question.</p>\n<h2 id=\"Why\"><a href=\"#Why\" class=\"headerlink\" title=\"Why?\"></a>Why?</h2><p>And so, we need to evaluate why it is we think creating unit test are optional. Probably because what we’ve been doing for so long seems to be working and, when we try to incorporate unit test, the process seems slower.</p>\n<p>And it is.</p>\n<p>Initially, writing unit test is slower just like writing using a new language or a new framework or anything else new is slower than what we know.</p>\n<p>But the ultimate efficiency that writing unit test as we code provides has been proven to more than offset the learning curve involved.</p>\n<p>There is one other valid reason for not testing and that is, we simply don’t know how.  This is almost as big of a reason as not believing it is worth while.  But, I think if we thought testing was really worth while, we’d start testing and figure it out as we went along.</p>\n<p>If you think about your career, I bet there are a lot of things you know now that you didn’t know when you started out.  The fact of the matter is, most of us learn on the job.  We start out with basic skills, but it is the day to day implementations that improve those skills.</p>\n<blockquote>\n<h5 id=\"Don’t-let-the-good-enough-be-the-enemy-of-the-perfect\"><a href=\"#Don’t-let-the-good-enough-be-the-enemy-of-the-perfect\" class=\"headerlink\" title=\"Don’t let the good enough be the enemy of the perfect.\"></a>Don’t let the good enough be the enemy of the perfect.</h5></blockquote>\n<p>Don’t let the good enough be the enemy of the perfect.  Your first set of test will be garbage.  As you stick with it, you’ll wonder what you were thinking when you wrote your first test.  But this should not deter you.  This is what happened when you first started coding.  Maybe it is still happening.  No worries.  It is the practice that will make you better able to write tests and better able to write code that is testable.</p>\n<p>And there is another reason we don’t test.  Most of the code you are currently writing simply isn’t testable.  But, that’s the subject for another post.</p>\n",
            "tags": [
                "tdd",
                "test driven development",
                "testing",
                "bdd"
            ]
        },
        {
            "id": "http://davembush.github.com/asp-net-server-performance-testing/",
            "url": "http://davembush.github.com/asp-net-server-performance-testing/",
            "title": "ASP.NET Server Performance Testing",
            "date_published": "2014-11-06T11:00:00.000Z",
            "content_html": "<p>This happened a couple of years ago, but it is still relevant because I know of at least one place where it is still happening even though Microsoft has fixed the issue that initially caused this hack to be put in place in the first place.</p>\n<span id=\"more\"></span>\n\n<h2 id=\"Problem-In-Production-–-Oh-NO\"><a href=\"#Problem-In-Production-–-Oh-NO\" class=\"headerlink\" title=\"Problem In Production – Oh NO!\"></a>Problem In Production – Oh NO!</h2><p>Here’s the problem we were seeing.  We had several large PDF files that the client wanted to put up on the site so that their customers could download them.  The problem that we were seeing is that even though the site worked fine under development and QA, the site seemed to consume a lot of memory under load.</p>\n<p>Another symptoms we saw was that the file download took a lot of time to start, or timed out completely.  But the main issue was the memory because when the memory was consumed, the site would restart, and because it was a worker process crash that caused it, the restart took the site down.  This is not something you want to see happen when you are working with a client with world wide exposure.  A client who, if I told you the name, I’m sure you would recognize.</p>\n<p>In fact, it was the site not responding, or crashing, that first alerted us to the problem.  So, as soon as we knew the site wasn’t responding, I’d log onto the server and fire up task manager to see what was going on.</p>\n<h2 id=\"Server-Management-Tip\"><a href=\"#Server-Management-Tip\" class=\"headerlink\" title=\"Server Management Tip\"></a>Server Management Tip</h2><p>One of the things I did early on managing the servers, is that I set up an entirely separate app pool for each of the web sites we are hosting.  This way, we can monitor the memory and CPU activity of each one independently.  For those of you who are interested, the way to make the pool name show up in task manager is to run the pool in ApplicationPoolIdentity, a setting you can get to through “Advanced Settings…”  If you are only hosting one site, you shouldn’t need to do this, but in my case, with multiple sites, this told me a lot about what was going on with the sites and ultimately helped me track down what the problem was.</p>\n<p>By the way, you should always run each of your sites under a separate application pool so that when one site is having trouble, every site on your server doesn’t have trouble.  Imagine having an issue and not even knowing for sure which site was causing the trouble.  It’s bad enough not knowing what page is causing the problem.</p>\n<h2 id=\"It-Is-a-Memory-Issue-Now-What\"><a href=\"#It-Is-a-Memory-Issue-Now-What\" class=\"headerlink\" title=\"It Is a Memory Issue.  Now What?\"></a>It Is a Memory Issue.  Now What?</h2><p>OK.  So, I could see the memory increasing as soon as the site came back up.  So, now to try to track down what was causing memory issues.</p>\n<p>I tried various things along the way, none of them shed any light at all on the problem.  I even got dotMemory from JetBrains to see if I could find anything.  A memory leak maybe?  No, none of my code had even a small leak.</p>\n<h2 id=\"The-Fix-Discovered\"><a href=\"#The-Fix-Discovered\" class=\"headerlink\" title=\"The Fix Discovered\"></a>The Fix Discovered</h2><p>And then I finally stumbled on the issue.  I can’t remember what it was that we installed that needed this, but what it did was change our web.config file so that it had a section in it that looks like this:</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">... lots of other configuration stuff ...</span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">system.webServer</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">modules</span> **<span class=\"attr\">runAllManagedModulesForAllRequests</span>=<span class=\"string\">&quot;true&quot;</span>**&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>What that causes IIS to do is to run ALL of your web request through ALL of your .NET modules.  Why is this a problem you ask?  Because it even runs all of your images, css, javascript and other static content.  This isn’t normally a huge problem because most of that stuff is relatively small. But, when you try to run a be PDF through that pipeline, you’ll run out of memory because, and this is the major issue here, because the whole file has to be loaded into memory on the server before it can be sent on to the web browser to download.</p>\n<p>Make sure that runAllManagedModulesForAllRequest is either set to false, or doesn’t exist in your web.config file.  If you need it to be turned on for some valid reason that I am not thinking of, at least put your static files on another site where this can be turned off.</p>\n<h2 id=\"Moral-Of-The-Story\"><a href=\"#Moral-Of-The-Story\" class=\"headerlink\" title=\"Moral Of The Story\"></a>Moral Of The Story</h2><p>Now, the question that we should be asking now that we’ve figured it all out is, why wasn’t this caught earlier?  When a site goes up, isn’t all of the functionality, including all of the links to all of the images, files to download, and other pages on the site and off the site supposed to be tested?</p>\n<p>Yes, of course they are, but if you haven’t at least written down where all of this is, if you don’t have a systematic way of testing EVERYTHING, you WILL end up with these kind of errors once you put the site live.  This is to say nothing of load testing along the way.  This can all be prevented.</p>\n",
            "tags": [
                "performance",
                "testing",
                "asp.net",
                "memory"
            ]
        },
        {
            "id": "http://davembush.github.com/running-selenium-in-parallel-with-any-net-unit-testing-tool/",
            "url": "http://davembush.github.com/running-selenium-in-parallel-with-any-net-unit-testing-tool/",
            "title": "Running Selenium In Parallel With Any .NET Unit Testing Tool",
            "date_published": "2014-07-31T17:15:00.000Z",
            "content_html": "<p>Running Selenium in parallel from .NET seems to be a problem because, as of the time of this writing, I’ve yet to find a viable way of running selenium test on multiple browsers using <a href=\"//docs.seleniumhq.org/docs/07_selenium_grid.jsp\">Selenium Grid</a>.  This doesn’t mean that there aren’t a few articles out there that have some kind of solution.  But they’ve never satisfied me as something that I could easily plug into my already created test. While my preferred testing tools are <a href=\"//www.nunit.org/\">NUnit</a> and <a href=\"//www.specflow.org/\">SpecFlow</a>, the method I am about to propose should work with any existing test harness you might want to use.  The only prerequisite is that you are using <a href=\"//code.google.com/p/selenium/wiki/PageObjects\">Page Models</a> to wrap your access to any particular web page. This article assumes that you already:</p>\n<ul>\n<li>know how to write Selenium tests</li>\n<li>know how to use Selenium Grid</li>\n<li>know how to use the Page Model pattern</li>\n<li>know how to use your chosen test harness.</li>\n</ul>\n<span id=\"more\"></span>\n\n<h2 id=\"Here-Is-The-Problem\"><a href=\"#Here-Is-The-Problem\" class=\"headerlink\" title=\"Here Is The Problem\"></a>Here Is The Problem</h2><p>In order to run multiple browsers at the same time, the easiest way is to provide a wrapper Page Model that calls multiple instances of the page model at the same time. The hard way of doing this would be to create an Interface that represented the real page model and then create a proxy class that would hold a list of all of the real page model objects we needed to call.  Each time a property or method on the proxy gets called, all it would do would be to pass the call down into the real objects in parallel. This would work, but the main draw back is that I really don’t want to have to write a method for each method in my real page model.  So the question is, how can we get around this?</p>\n<h2 id=\"DynamicObject-To-The-Rescue\"><a href=\"#DynamicObject-To-The-Rescue\" class=\"headerlink\" title=\"DynamicObject To The Rescue\"></a>DynamicObject To The Rescue</h2><p>Enter the little known class, <a href=\"//msdn.microsoft.com/en-us/library/system.dynamic.dynamicobject(v=vs.110).aspx\">DynamicObject</a>.   In .NET 4, Microsoft introduced the dynamic keyword.  One of the main uses is for places where  you need to be able to declare a variable in your code that the compiler won’t know how to resolve the type of until runtime.  I could have used this several years ago when I had two assemblies that needed to reference each other.  In that case, I used reflection.  But dynamic would have worked with a lot less work. DynamicObject is a specific class that allows us to resolve property and method calls at runtime using our own logic. We will also use the Task Parallel library to implement our parallel calls. For completeness, and so that no one is confused when they try to implement this code, you’ll need the following using statements at the top of the CS file.</p>\n<h2 id=\"Using-Statements-And-Constructor\"><a href=\"#Using-Statements-And-Constructor\" class=\"headerlink\" title=\"Using Statements And Constructor\"></a>Using Statements And Constructor</h2><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> System;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Concurrent;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Dynamic;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Reflection;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Threading.Tasks;</span><br></pre></td></tr></table></figure>\n\n<p>So, let’s get started.  The first thing we will need is a class declaration:</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title\">ParallelPageModel</span>&lt;<span class=\"title\">TPage</span>&gt;:  <span class=\"title\">DynamicObject</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>TPage allows us to specify the Interface the real Page Model implements.  Yes, we still need the interface, but we won’t need to create a new wrapper class for every page model we want to wrap.  The class  inherits from DynamicObject so that all of our on the fly goodness will work. Next, we’ll need some place to store an array of PageObjects we want to proxy.  So we add a private variable _page for that purpose.</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">readonly</span> TPage[] _pages;</span><br></pre></td></tr></table></figure>\n\n<p>By using TPage[], we create a variable that is the same type array as the Page Models we are proxying. Next we need a constructor.</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ParallelPageModel(<span class=\"keyword\">params</span> TPage[] pages)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    _pages = pages;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>By using the params keyword, we can either  pass in page objects as an array or as individual parameters. The magic happens in three overridden methods that are in DynamicObject:</p>\n<ul>\n<li>TryInvokeMember – resolves any method calls.</li>\n<li>TrySetMember – resolves any property setters</li>\n<li>TryGetMember – resolves any property getters</li>\n</ul>\n<p>So let’s add those methods next:</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">override</span> <span class=\"built_in\">bool</span> <span class=\"title\">TryInvokeMember</span></span></span><br><span class=\"line\"><span class=\"function\">    (<span class=\"params\">InvokeMemberBinder binder,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">      <span class=\"built_in\">object</span>[] args,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">      <span class=\"keyword\">out</span> <span class=\"built_in\">object</span> result</span>)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">override</span> <span class=\"built_in\">bool</span> <span class=\"title\">TrySetMember</span></span></span><br><span class=\"line\"><span class=\"function\">    (<span class=\"params\">SetMemberBinder binder, <span class=\"built_in\">object</span> <span class=\"keyword\">value</span></span>)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">override</span> <span class=\"built_in\">bool</span> <span class=\"title\">TryGetMember</span></span></span><br><span class=\"line\"><span class=\"function\">    (<span class=\"params\">GetMemberBinder binder, <span class=\"keyword\">out</span> <span class=\"built_in\">object</span> result</span>)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"TryInvokeMember\"><a href=\"#TryInvokeMember\" class=\"headerlink\" title=\"TryInvokeMember\"></a>TryInvokeMember</h2><p>Inside of the TryInvokeMember method, the first thing we will want to do is to use reflection to call into the real methods.  Since we could have multiple instances of the same method we need to call we will want to do this in a loop. When I first worked this out, I started by just implementing a foreach loop but we are going to jump right to using Parallel.ForEach() Parallel.ForEach() will let us pass in an array and run a lambda expression on each element in the array.  So, our foreach loop will look like this:</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> results = <span class=\"keyword\">new</span> ConcurrentBag&lt;<span class=\"built_in\">object</span>&gt;();</span><br><span class=\"line\">Parallel.ForEach(_pages, page =&gt;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> thisResult = <span class=\"keyword\">typeof</span> (TPage)</span><br><span class=\"line\">       .InvokeMember(binder.Name,</span><br><span class=\"line\">        BindingFlags.InvokeMethod |</span><br><span class=\"line\">        BindingFlags.Public |</span><br><span class=\"line\">        BindingFlags.Instance,</span><br><span class=\"line\">        <span class=\"literal\">null</span>, page, args);</span><br><span class=\"line\">    results.Add(thisResult);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>Note that our lambda expression is not doing anything more than a simple reflection call. The result that is returned is added to our ConcurrentBag collection.  ConcurrentBag is a collection that is specifically made for parallel calls.  We could get into trouble if we added something to a List&lt;&gt; collection unless we added some parallelization gatekeeping around it.  I’m for doing as little work as possible. The second thing we want to do is to process the return results. For this we need to setup a basic foreach loop.</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">foreach</span> (<span class=\"keyword\">var</span> thisResult <span class=\"keyword\">in</span> results)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Inside the foreach loop we will process the results collection. If the type that got  returned is the same type as the type that the page is proxying for, we just make our result value, the return value the TryInvokeMember is going to return for us to the code that called the proxy, equal to the proxy object.</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (thisResult <span class=\"keyword\">is</span> TPage)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    result = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>If the result is not null, meaning either that a previous result was null or we haven’t processed the loop yet, we want to check to see if the value of the current loop result is the same as the loop results we’ve already processed.  If it isn’t, we throw an exception.</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (result != <span class=\"literal\">null</span>)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!result.Equals(thisResult)) <span class=\"comment\">// not the same value</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> Exception</span><br><span class=\"line\">           (<span class=\"string\">&quot;Call to method returns different values.&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Finally, we just set the result to whatever we have at this point.</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    result = thisResult;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>And then the last thing we want to do is to return true to tell the system we were able to process the method.</p>\n<h2 id=\"TryGetMember\"><a href=\"#TryGetMember\" class=\"headerlink\" title=\"TryGetMember\"></a>TryGetMember</h2><p>Since the implementation for TryGetMember looks very similar to TryInvokeMethod we’ll tackle that next. In fact, the only difference between the two methods is the code inside of the Parallel.ForEach parameter block. So, here it is:</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Parallel.ForEach(_pages, page =&gt;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> thisResult = <span class=\"keyword\">typeof</span>(TPage)</span><br><span class=\"line\">        .GetProperty(binder.Name).GetValue(page);</span><br><span class=\"line\">    results.Add(thisResult);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"TrySetMember\"><a href=\"#TrySetMember\" class=\"headerlink\" title=\"TrySetMember\"></a>TrySetMember</h2><p>TrySetMember is the easiest implementation of all since there are no results to worry about.</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Parallel.ForEach(_pages,</span><br><span class=\"line\">     page =&gt; <span class=\"keyword\">typeof</span> (TPage)</span><br><span class=\"line\">        .GetProperty(binder.Name).SetValue(page, <span class=\"keyword\">value</span>));</span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Casting\"><a href=\"#Casting\" class=\"headerlink\" title=\"Casting\"></a>Casting</h2><p>So the code above will work, but you won’t get any intellisense help from Visual Studio if you use this code without tweaking it. What we need is some way of casting the ParallelPageModel object to the TPage type that we pass in. For that we are going to use a cool library I found called <a href=\"//github.com/ekonbenefits/impromptu-interface\">ImpromptuInterface</a>. You’ll need to add a using statement.</p>\n<p>using ImpromptuInterface;</p>\n<p>And then you’ll need to add this method to the ParallelPageModel class.</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> TPage <span class=\"title\">Cast</span>()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.ActLike();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>You would use this like this:</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">IMyPageModel p = pageModelProxy.Cast();</span><br></pre></td></tr></table></figure>\n\n<p>Where IMyPageModel is the interface that specifies what your real PageModel class looks like. Just in case someone is tempted to mention this in the comments, you can’t us operator overloading to achieve the cast because we need it to return TPage, which could be anything and the compiler can’t deal with that.  If you really want to use operator overloading you’ll need to provide your own specific implementation that ends up calling the code above.</p>\n<h2 id=\"Calling-The-ParallelPageModel\"><a href=\"#Calling-The-ParallelPageModel\" class=\"headerlink\" title=\"Calling The ParallelPageModel\"></a>Calling The ParallelPageModel</h2><p>To setup the ParallelPageModel, your code would look something like this, assuming that you have a page model class called MyPageModel with an interface of IMyPageModel.</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> pages = <span class=\"keyword\">new</span> ConcurrentStack&lt;IMyPageModel&gt;();</span><br><span class=\"line\">Parallel.Invoke(</span><br><span class=\"line\">    () =&gt;</span><br><span class=\"line\">        pages.Push(PageFactory.GetPageModel(<span class=\"string\">&quot;FireFoxGrid&quot;</span>),</span><br><span class=\"line\">    () =&gt;</span><br><span class=\"line\">        pages.Push(PageFactory.GetPageModel(<span class=\"string\">&quot;IE11Grid&quot;</span>));</span><br><span class=\"line\"><span class=\"keyword\">var</span> pagesArray = pages.ToArray();</span><br><span class=\"line\">MyTypedPage =</span><br><span class=\"line\">    <span class=\"keyword\">new</span> ParallelPageModel&lt;IMyPageModel&gt;(pagesArray).Cast();</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Considerations\"><a href=\"#Considerations\" class=\"headerlink\" title=\"Considerations\"></a>Considerations</h2><p>I only just started using this.  It works for my current implementation.  But you may need to tweak it so that it works for you. For example, my assumption here is that you are only dealing with simple types or the page model type you are a proxy for.  There is no code here that will handle a situation where the call to a method would return a entirely new page model. Since the code I am testing is a collection of Single Page Applications and I am not testing navigation at this point, this is not a consideration for me.  But it would be relatively easy code to implement.  If I did that, I would probably handle it but subclassing this main class that does the bulk of the work and override the Try*Member method that needed to deal with that situation.  The other possible way of dealing with the situation is to pass in a list of types that need to be wrapped in their own parallelization object as parameters in the constructor and add some generic code in the ParallelPageModel class. Finally, I am well aware that this code may have bugs.  If you find one, go ahead and fix it. You can leave a comment so that others will benefit.   There is a <a href=\"//github.com/DaveMBush/ParallelSeleniumUsingNUnit\">demo project on GitHub.</a></p>\n<h4 id=\"Other-Places-Talking-about-Parallel-Selenium\"><a href=\"#Other-Places-Talking-about-Parallel-Selenium\" class=\"headerlink\" title=\"Other Places Talking about Parallel Selenium\"></a>Other Places Talking about Parallel Selenium</h4><ul>\n<li><a href=\"//slmoloch.blogspot.com/2009/12/design-of-selenium-tests-for-aspnet_19.html\">Using MbUnit to achieve parallelization</a></li>\n<li><a href=\"//www.browserstack.com/automate/c-sharp\">Use Browser Stack</a></li>\n</ul>\n<p>And of course a ton of links to people asking how this can be achieved.</p>\n",
            "tags": [
                "c#",
                "testing",
                ".net",
                "nunit",
                "parallel",
                "selenium"
            ]
        },
        {
            "id": "http://davembush.github.com/what-is-specflow%E2%80%A6/",
            "url": "http://davembush.github.com/what-is-specflow%E2%80%A6/",
            "title": "What is SpecFlow…",
            "date_published": "2014-06-12T17:30:00.000Z",
            "content_html": "<h2 id=\"…And-why-do-I-want-it\"><a href=\"#…And-why-do-I-want-it\" class=\"headerlink\" title=\"…And why do I want it?\"></a>…And why do I want it?</h2><p><img src=\"/uploads/2014/06/SpecFlow.png\" alt=\"SpecFlow\" title=\"SpecFlow\">That’s what I kept asking myself every time I saw this product. Well, the last time I looked, something caught my eye enough that I decided to download it and take a look. I’m really glad I did it. So, let me attempt to explain what <a href=\"//www.specflow.org/\">SpecFlow</a> is.  First, while you can get SpecFlow+ Runner to run your test, this isn’t a completely new testing platform. Instead, it is a testing platform that works with whatever testing platform you are using to test your .NET code. So, it works with NUnit, MSTest, xUnit and MbUnit. This is good for my situation because any test I write with SpecFlow will continue to work with the tools I already have in place. Including my current test runners (<a href=\"//www.jetbrains.com/resharper/\">ReSharper</a>) and my Continuous Integration system (<a href=\"//www.jetbrains.com/teamcity/\">TeamCity</a>). I wasn’t interested in adopting a platform that wouldn’t work with these two platforms.</p>\n<span id=\"more\"></span>\n\n<h2 id=\"Where-I-got-Confused\"><a href=\"#Where-I-got-Confused\" class=\"headerlink\" title=\"Where I got Confused\"></a>Where I got Confused</h2><p>Now the part that kept me from looking at this framework for such a long time was the <a href=\"//www.specflow.org/\">home page</a>. If you go there, you will see the “Three easy steps.” 1) Specify, 2) Automate, 3) enjoy. Well, at first glance it looked like was going to have to write my test in English and then write my test in code and then I could enjoy. Why would I want to do that? So, the part they forgot to mention is that once you’ve specified your test, the Visual Studio plugin will generate your test code for you. For NUnit it actually writes the NUnit test for you. The code you do have to write is the code that translates the individual steps. But even that code gets stubbed out for you. Once you have enough of those stubbed out, to write a test, you just write the test in English, save the file, and run the test. Now that I finally understand this, I like most of what SpecFlow does. But there are a few things I wish it did differently.</p>\n<h2 id=\"What-I-like\"><a href=\"#What-I-like\" class=\"headerlink\" title=\"What I like:\"></a>What I like:</h2><ol>\n<li>It puts my test in a Given, When, Then structure like I mentioned a few weeks ago. 2) The class files it generates are all partial classes. This allowed me to keep my inheritance structure that I’m dependent on for my current NUnit testing framework. And allowed me to work around one of the shortcomings I’ve found. 3) The methods are all virtual, again, allowing for extension and flexibility. 4) Intellisense is enabled so you can see similar sentences you’ve already used as you are creating new test. 5) You can create tables of parameters for test scenarios, similar to how you can pass multiple parameters to an NUnit test with the TestCase attribute or the TestCaseSource attribute. 6) To write the supporting CSharp, code I didn’t have to learn anything new. 7) I can give the English language, none code, document to the business user and they should be able to read the test well enough to tell me if the test is an accurate reflection of what they want the system to do.</li>\n</ol>\n<h2 id=\"What-I-don’t-like\"><a href=\"#What-I-don’t-like\" class=\"headerlink\" title=\"What I don’t like:\"></a>What I don’t like:</h2><ol>\n<li>I’ve become pretty dependent on the NUnit TestFixture attribute that allows me to pass parameters to the entire test. I use this to control the testing of multiple browsers. But, I’ve recently figured out a way to run all of my browsers simultaneously rather than sequentially so I won’t need this feature in the pretty near future. Once I’ve got that working, you can be sure I’ll share it here. So, don’t forget to subscribe to this blog if you haven’t already.</li>\n</ol>\n",
            "tags": [
                "tdd",
                "testing",
                "nunit",
                "specflow",
                "mstest"
            ]
        },
        {
            "id": "http://davembush.github.com/tdd-saves-time-%E2%80%93-a-story/",
            "url": "http://davembush.github.com/tdd-saves-time-%E2%80%93-a-story/",
            "title": "TDD Saves Time – A Story",
            "date_published": "2014-05-22T16:40:00.000Z",
            "content_html": "<p><img src=\"/uploads/2014/05/TDDSavesTime_AStory.png\" alt=\"TDDSavesTime_AStory\" title=\"TDDSavesTime_AStory\">I recently had an experience writing code that proved to me, once again, that using Test Driven Development really is faster than the way I have been working. You will remember a couple of weeks ago I presented <a href=\"/automated-web-%E2%80%A6tional-testing/\">a strategy for creating test scenarios where we need to test storing data to a database from a web page</a>. </p>\n<span id=\"more\"></span>\n\n<p>Well, recently, I had a chance to use that strategy.  In that article, I talked about first testing that the data that we were sending back to the server was actually coming back correctly to the web site.  By doing this, you don’t have to track down where the problem is.  Is it in the database save routine or did it not even get from the client to the server?  This part worked pretty much as expected and my code for that worked right away so I can’t say that I saved a whole lot of time.</p>\n<p>But the part that did save me a TON of time is the second half.  Saving the data to the database without having to use the web site to create the data I wanted to save.</p>\n<p>While I was testing the client side, I saved the data to a JSON string which I used to create an object that represented the data that had been sent back.  Then in my unit test, I recreated the object from the stream and sent that into my save routine.  Once the save was done, I reloaded the object from the database.  Now I have the original object and the saved object which I can compare.</p>\n<p>And the comparison showed me that the save wasn’t quite working the way I had expected.  I actually had to go through several (10? 15? 20?) iterations of fixing and testing before I got to a point where my test was succeeding.  It took about a day to get everything working.  Imagine if I were using a manual method to test this.  Launch the web site, fill out the form (it’s a pretty long form with a lot of data) save the form, reload the form, remember what I had  filled out, verify that everything got saved.  I easily saved half a day using Test Driven Development.</p>\n<p>If you are  still on the fence as to the value of implementing test prior to writing code, I would encourage you to try it.  Just try it for 30 days.  Yes, it will be hard getting started.  Yes, it will FEEL like it takes more time to write the test first.  But as you make this part of how you develop code, you will start to see for yourself how many benefits you can realize by implementing this best practice.</p>\n",
            "tags": [
                "tdd",
                "programming",
                "testing"
            ]
        },
        {
            "id": "http://davembush.github.com/%E2%80%9Cdebbie-done%E2%80%9D/",
            "url": "http://davembush.github.com/%E2%80%9Cdebbie-done%E2%80%9D/",
            "title": "“Debbie-Done”",
            "date_published": "2014-03-04T10:38:00.000Z",
            "content_html": "<p><img src=\"/uploads/2014/02/88Tr.png\" alt=\"88Tr\" title=\"88Tr\"></p>\n<p>A long long time ago, in what seems now like another world, I worked for a company as a <a href=\"//en.wikipedia.org/wiki/Clipper_(programming_language)\">Clipper programmer</a>.  While I was there I heard this story about a lady named Debbie.</p>\n<p>I was told that Debbie was a programmer who used to work for this company.  Debbie was a lazy programmer.  She worked harder at avoiding work than if she just did the job she was supposed to do.</p>\n<span id=\"more\"></span>\n\n<h2 id=\"The-ultimate-lazy-programmer\"><a href=\"#The-ultimate-lazy-programmer\" class=\"headerlink\" title=\"The ultimate lazy programmer\"></a>The ultimate lazy programmer</h2><p>For example.  Once my boss had stopped by her desk to see how she was progressing on a report she was supposed to be writing:</p>\n<p>Debbie: Oh, that’s done.  Here.  Take a look.</p>\n<p>The boss looked it over and found an error.  Some of the numbers didn’t match up.</p>\n<p>Debbie: Oh, I know what that is.  I can get that fixed right away.</p>\n<p>Which she did.  At least that’s what she made everyone believe.</p>\n<p>After she left (shortly after this) they found out that she hadn’t even connected to a database to create that report.  The whole report was hard coded.  Every time you ran it, it gave you the same numbers.</p>\n<h2 id=\"“Debbie-Done”\"><a href=\"#“Debbie-Done”\" class=\"headerlink\" title=\"“Debbie-Done”\"></a>“Debbie-Done”</h2><p>The one thing I was told that sticks in my mind the most is that Debbie considered a project “done” if it compiled in linked.  She almost never ran the code.  Or if she did, she certainly didn’t run enough of it, or run it more than to make sure it didn’t crash.  Anyhow, the perception she left is that she only compiled and linked the code.  Today, we’d say all she did was build the project or solution.</p>\n<p>But recently, I’ve discovered that many programmers work at the “Debbie-Done” level more than we’d like to admit.</p>\n<p>I’ve always thought that programmers wrote code like I do:</p>\n<ul>\n<li>Write a bit of code. </li>\n<li>Build the code.</li>\n<li>Run the code to see if that change works as expected. </li>\n<li>Write a bit more code. </li>\n<li>Build the code.</li>\n<li>Run the code to see if that change works as expected. </li>\n<li>Rinse, lather, repeat.</li>\n</ul>\n<p>But what I’m discovering is that MANY programmers do not program that way at all.  No, many of them look like some version of “Debbie-Done” programming:</p>\n<ul>\n<li>Write some code. </li>\n<li>Build the project to make sure it will build</li>\n<li>Write some more code</li>\n<li>Build the project</li>\n<li>Rinse, lather, repeat</li>\n<li>Run the code and “test” all of the changes at once.</li>\n</ul>\n<p>The problem with this method is that no one can remember all of the changes they make so, in the end, the code I write tends to be more completely tested than the code that was tested in bulk.  The only difference between this method of development and “Debbie-Done” is the degree of completeness with which each developer is able “test” their code.</p>\n<h2 id=\"Avoid-“Debbie-Done”-with-Test-First-Development\"><a href=\"#Avoid-“Debbie-Done”-with-Test-First-Development\" class=\"headerlink\" title=\"Avoid “Debbie-Done” with Test First Development\"></a>Avoid “Debbie-Done” with Test First Development</h2><p>It is no wonder that many programmers I talk to think that test driven development takes too much time.  Compared to how they are programming, it does.</p>\n<p>But think about this.  If you were to code like I do, suddenly writing test for every change you make suddenly makes sense because instead of you running the application and getting to the place that will trigger your code and observing if it will work or not, you can write a test for just the piece of code you are working on and run that each time you want to verify if it is working or not.  Yes, initially, this will take more time.  But over the life of the program, and I would say even over the time span that it takes to initially write the code, writing at least the Unit Test as you are writing the features will actually save you time.  Not only that, you will end up with test you can repeat every time the code is changed.</p>\n<p>Even my method of “code, build, test, code, build, test” is “Debbie-Done” compared to writing test for each change as you make the change.</p>\n",
            "tags": [
                "tdd",
                "programming",
                "agile",
                "testing"
            ]
        },
        {
            "id": "http://davembush.github.com/test-driven-specifications/",
            "url": "http://davembush.github.com/test-driven-specifications/",
            "title": "Test Driven Specifications",
            "date_published": "2014-02-25T08:44:00.000Z",
            "content_html": "<p><img src=\"/uploads/2014/02/spider.jpg\" alt=\"spider\" title=\"spider\">Several years ago, long before the community was actively talking about Test Driven Development, I worked for a short time at a company as a “bug fixer.”  That was my role.  They had hired me because they had some software that was “basically done” but “had some issues.”  It should only take a few weeks.</p>\n<p>The first thing they needed me to fix was that the website was supposed to send out email.  It turns out it was a configuration problem.  But they were so impressed (“the last guy we had in here spent two weeks on that problem and still hadn’t solved the problem.”) that they gave me more and more bugs.</p>\n<h2 id=\"This-Is-The-Job-That-Never-Ends\"><a href=\"#This-Is-The-Job-That-Never-Ends\" class=\"headerlink\" title=\"This Is The Job That Never Ends\"></a>This Is The Job That Never Ends</h2><span id=\"more\"></span>\n\n<p>The gig that was supposed to be a couple of weeks long was quickly turning into a perpetual job.  Soon I learned that what I was working with was a system that had a lot of bugs, but no one was willing to admit that.  Eventually, frustrated by the fact that this system seemed to have a new bug every day, I asked for the specs so that I could create a test plan.  That’s when I found out the worse news of all about this system.</p>\n<h2 id=\"Lost-Specifications\"><a href=\"#Lost-Specifications\" class=\"headerlink\" title=\"Lost Specifications\"></a>Lost Specifications</h2><p>They had lost the specs.  Not only had they lost the specs, but they were unwilling to admit this to the client and instead they were relying on the process of fixing the bugs to eventually squash all  the bugs so they could end up with a stable system.</p>\n<p>Since I was not yet familiar with the concepts of unit testing or Test Driven Development, I accepted this as the best we could do.  Hey!  At least I was getting paid well.</p>\n<p>Oh, but the story gets worse.</p>\n<h2 id=\"The-Plot-Thickens\"><a href=\"#The-Plot-Thickens\" class=\"headerlink\" title=\"The Plot Thickens\"></a>The Plot Thickens</h2><p>About three months into this gig, the manager of my project went on vacation which left the project in HIS manager’s hands.  That’s when the poop hit the fan.</p>\n<p>The Oracle consultant that was working with me and I were called into the office.</p>\n<p>“Why does this system still have bugs?!!”  Oh, he was angry.  That should be all bold and all caps and all underlined.</p>\n<p>Well sir, several weeks ago I asked for the requirements document so that I could write a test plan and I was told the requirements were lost.  If we can’t write a test plan, we never will be able to ensure that the system is working the way that it should.</p>\n<p>“I want you to write a test plan.”</p>\n<p>To which I repeated my need for a requirements document.</p>\n<p>We went back and forth with him insisting that I write a test plan and me stating that it could not be done until I finally said, “I think I’ve done all I can do here.”  Walked out of the office, packed up my stuff, went home, and immediately called my recruiter to make sure he got MY version of what happened first.</p>\n<p>But, it didn’t have to end like that.</p>\n<h2 id=\"A-Better-Way\"><a href=\"#A-Better-Way\" class=\"headerlink\" title=\"A Better Way\"></a>A Better Way</h2><p>Had I known about test driven development, every time a new bug came in, I could have written a new test, even if it was only unit test and not acceptance test, every time a new bug came in.  Eventually, I would have created not only the test plan, but I would have created the specification, or at least the parts that tended to break, and we would have ended up with a stable system like they thought they were going to get.</p>\n",
            "tags": [
                "tdd",
                "agile",
                "test driven development",
                "testing"
            ]
        },
        {
            "id": "http://davembush.github.com/test-sending-email-without-a-server-in-asp-net/",
            "url": "http://davembush.github.com/test-sending-email-without-a-server-in-asp-net/",
            "title": "Test Sending Email without a Server in ASP.NET",
            "date_published": "2013-06-05T07:36:19.000Z",
            "content_html": "<p><img src=\"/uploads/2009/08/back041.jpg\" alt=\"back-041\" title=\"back-041\"> By now, most people are familiar with the fact that ASP.NET will send mail from the codebehind by simply adding a few lines to your web.config file and adding another few lines of code in the codebehind file.</p>\n<p>But it wasn’t until recently that I found that you don’t need to have access to an SMTP server to test your code.</p>\n<span id=\"more\"></span>\n\n<p>In fact, this little trick will allow you to read the email without clogging up your email client with email you only wanted for testing purposes.</p>\n<p>Instead of the normal entry of</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mailSettings</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">smtp</span> <span class=\"attr\">from</span>=<span class=\"string\">&quot;you@domain.com&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">network</span> <span class=\"attr\">host</span>=<span class=\"string\">&quot;maiServerl&quot;</span> <span class=\"attr\">password</span>=<span class=\"string\">&quot;password&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">           <span class=\"attr\">userName</span>=<span class=\"string\">&quot;loginName&quot;</span> <span class=\"attr\">port</span>=<span class=\"string\">&quot;25&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">smtp</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mailSettings</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>You can use</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mailSettings</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">smtp</span> <span class=\"attr\">from</span>=<span class=\"string\">&quot;you@domain.com&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">         <span class=\"attr\">deliveryMethod</span>=<span class=\"string\">&quot;SpecifiedPickupDirectory&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">specifiedPickupDirectory</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">pickupDirectoryLocation</span>=<span class=\"string\">&quot;c:\\\\mail&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">smtp</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mailSettings</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>This will drop your email message in the c:\\mail directory as an *.eml file which you can open with Outlook Express.</p>\n<p>The code you would write to send the mail is still the same:</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SmtpClient smtp = <span class=\"keyword\">new</span> SmtpClient();</span><br><span class=\"line\">MailAddress <span class=\"keyword\">from</span> = <span class=\"keyword\">new</span> MailAddress(fromEmail, fromEmail);</span><br><span class=\"line\">MailAddress to = <span class=\"keyword\">new</span> MailAddress(emailAddress, emailAddress);</span><br><span class=\"line\">MailMessage message = <span class=\"keyword\">new</span> MailMessage(<span class=\"keyword\">from</span>, to);</span><br><span class=\"line\">message.Subject = SubjectLine;</span><br><span class=\"line\">message.Body = htmlString;</span><br><span class=\"line\">message.From = <span class=\"keyword\">from</span>;</span><br><span class=\"line\">message.To.Add(to);</span><br><span class=\"line\">message.IsBodyHtml = <span class=\"literal\">true</span>;</span><br><span class=\"line\">smtp.Send(message);</span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "c#",
                "testing",
                "vb.net",
                "asp.net",
                "email",
                "mailaddress",
                "mailmessage",
                "smtpclient"
            ]
        }
    ]
}