{
    "version": "https://jsonfeed.org/version/1",
    "title": "Dave's Notebook • All posts by \"bind\" tag",
    "description": null,
    "home_page_url": "http://davembush.github.com",
    "items": [
        {
            "id": "http://davembush.github.com/javascript-bind-for-cleaner-code/",
            "url": "http://davembush.github.com/javascript-bind-for-cleaner-code/",
            "title": "JavaScript bind() for cleaner code",
            "date_published": "2016-07-06T10:30:00.000Z",
            "content_html": "<p>Several weeks ago, I wrote about <a href=\"/why-does-javascript-loop-only-use-last-value/\">how closures impact calling asynchronous functions</a> in a loop and several ways of dealing with that problem.</p>\n<p>In my recent coding, I’ve discovered an even more simple way of dealing with this problem.</p>\n<p>In the process, it removes the anonymous function and eliminates the linting error, ‘Don’t make functions within a loop’ You see, I’ve been experimenting with JavaScript <code>bind()</code>.</p>\n<p>And as it turns out, we can use bind in multiple situations, including dealing with the closure issue I mentioned a couple of weeks ago.</p>\n<figure>![](/uploads/2016/07/image.png \"JavaScript bind() for cleaner code\")<figcaption>Photo credit: [Connor Tarter](//www.flickr.com/photos/connortarter/4754231502/) via [VisualHunt](//visualhunt.com) / [CC BY-SA](//creativecommons.org/licenses/by-sa/2.0/)</figcaption></figure>\n\n<span id=\"more\"></span>\n\n<h2 id=\"What-Is-bind\"><a href=\"#What-Is-bind\" class=\"headerlink\" title=\"What Is bind()?\"></a>What Is bind()?</h2><p>The bind function is a recent addition to the JavaScript spec. So, this will only work on recent browsers. You can <a href=\"//kangax.github.io/compat-table/es5/\">check the compatibility table</a> (for all things JavaScript) to see which browser implement <code>bind()</code> as well as other JavaScript features. I looked over the list and there aren’t any browsers that don’t support <code>bind()</code> that I care to support, so I’m good. Your mileage may vary.</p>\n<p>What bind does is that it automatically wraps your function in its own closure so that we can bind the context (the this keyword) and a list of parameters to the original function. What you end up with is another function pointer.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">add</span>(<span class=\"params\">a,b</span>)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> a + b;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> newFoo = add.<span class=\"title function_\">bind</span>(<span class=\"variable language_\">this</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">newFoo</span>());</span><br></pre></td></tr></table></figure>\n\n<p>Notice that we not only bound this to the <code>foo()</code> function, but we also bound the two parameters. So, when we call <code>newFoo()</code> the return value will be 7.</p>\n<p>But what happens if we change the parameters before calling newFoo?</p>\n<h2 id=\"Changing-bind-parameters\"><a href=\"#Changing-bind-parameters\" class=\"headerlink\" title=\"Changing bind parameters\"></a>Changing bind parameters</h2><p>If we bind parameters to <code>foo()</code> using variables and then change the variables prior to calling <code>newFoo()</code>, what do you expect the value to be?</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">add</span>(<span class=\"params\">a,b</span>)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> a + b;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">3</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> b = <span class=\"number\">4</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> newFoo = add.<span class=\"title function_\">bind</span>(<span class=\"variable language_\">this</span>,a, b);</span><br><span class=\"line\">a = <span class=\"number\">6</span>;</span><br><span class=\"line\">b = <span class=\"number\">7</span>;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">newFoo</span>());</span><br></pre></td></tr></table></figure>\n\n<p>The return value is still going to be 7 because <code>bind()</code> binds the value of the parameters, not the actual variables. This is good news and, like I said, we can use this to great advantage in our code.</p>\n<p>But where I think it will display the most usefulness to me is in my call backs</p>\n<h2 id=\"Bind-and-callbacks\"><a href=\"#Bind-and-callbacks\" class=\"headerlink\" title=\"Bind and callbacks\"></a>Bind and callbacks</h2><p>You should remember from that article that one of our solutions to dealing with callbacks in loops was to create an anonymous function around the function we wanted to call.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>;i &lt; <span class=\"number\">10</span>;i++)&#123;</span><br><span class=\"line\">    (<span class=\"keyword\">function</span>(<span class=\"params\">ii</span>)&#123;</span><br><span class=\"line\">        <span class=\"built_in\">setTimeout</span>(<span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">            <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(ii);</span><br><span class=\"line\">        &#125;,<span class=\"number\">1000</span>);</span><br><span class=\"line\">    &#125;)(i);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>But we can greatly simplify this code by using bind instead.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">consoleLog</span>(<span class=\"params\">i</span>)&#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(i);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>;i &lt; <span class=\"number\">10</span>;i++)&#123;</span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(consoleLog.<span class=\"title function_\">bind</span>(<span class=\"variable language_\">this</span>,i),<span class=\"number\">1000</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>We can do this because each call to bind gives us a new function pointer and the original function remains unchanged.</p>\n<p>Meanwhile, we also remove the linting error ‘Don’t make functions within a loop’ because we aren’t creating the function in a loop, we are just pointing to a function that was created outside of the loop.</p>\n<h2 id=\"Bind-for-Event-Handlers\"><a href=\"#Bind-for-Event-Handlers\" class=\"headerlink\" title=\"Bind for Event Handlers\"></a>Bind for Event Handlers</h2><p>Another place where <code>bind()</code> will clean up your code is with event handlers.  Everyone knows, or should know, that when an event handler is called, the context it is called on is the thing that generated the event and not the object that the event handler was created in.  But, by using bind, you can be sure that the function is being called on the correct context.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">ClassName</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">   <span class=\"variable language_\">this</span>.<span class=\"property\">eventHandler</span> = (<span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">   &#125;).<span class=\"title function_\">bind</span>(<span class=\"variable language_\">this</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Not that you would write your code exactly like that, but that is just to get the point across.</p>\n<h2 id=\"Currying\"><a href=\"#Currying\" class=\"headerlink\" title=\"Currying\"></a>Currying</h2><p>What?! OK. The best explaination of Currying I can give you is that it allows you to pass parameters to function in multiple steps by making the function return other functions that take the remaining parameters. Many functional languages, like F#, do this for you automatically.</p>\n<p>Using binding, we achieve Currying by writing code that looks something like this:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">add</span>(<span class=\"params\">a,b,c</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> a+b+c;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> addAgain = add.<span class=\"title function_\">bind</span>(<span class=\"variable language_\">this</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> result = <span class=\"title function_\">addAgain</span>(<span class=\"number\">3</span>);</span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "javascript",
                "bind",
                "callbacks",
                "currying",
                "events"
            ]
        }
    ]
}