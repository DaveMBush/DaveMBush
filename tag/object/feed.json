{
    "version": "https://jsonfeed.org/version/1",
    "title": "Dave's Notebook • All posts by \"object\" tag",
    "description": null,
    "home_page_url": "http://davembush.github.com",
    "items": [
        {
            "id": "http://davembush.github.com/javascript-objects-what-you-don-t-know-can-hurt-you/",
            "url": "http://davembush.github.com/javascript-objects-what-you-don-t-know-can-hurt-you/",
            "title": "JavaScript Objects -- What You Don't Know CAN Hurt You",
            "date_published": "2016-03-03T13:30:00.000Z",
            "content_html": "<p>I’m assuming that anyone reading this blog has probably been using JavaScript for a while.  Many of you have used a number of the many frameworks that are available and most have used jQuery.  For the most part, you get what needs to be done, done.</p>\n<p>But, I would also say that most of you have no idea how JavaScript works.  This is why I’ve written about <a href=\"/javascript-variable-gotchas/\">JavaScript Variables</a>, <a href=\"/javascript-functions-in-depth/\">JavaScript Functions</a>, and now <a href=\"/javascript-objectswhat-you-dont-know-can-hurt-you/\">JavaScript – Objects</a>.</p>\n<p>So, let’s start with the most basic of JavaScript questions.</p>\n<p><img src=\"/uploads/2016/02/image-4.png\" alt=\"image\" title=\"image\"></p>\n<span id=\"more\"></span>\n\n<h2 id=\"How-Do-You-Create-A-JavaScript-Object\"><a href=\"#How-Do-You-Create-A-JavaScript-Object\" class=\"headerlink\" title=\"How Do You Create A JavaScript Object?\"></a>How Do You Create A JavaScript Object?</h2><p>Well, I think this is a basic question, but you would be amazed at how few people can answer this, even though they’ve probably done this an innumerable number of times.</p>\n<p>This simple statement:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = &#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<p>creates an object and assigns it to the variable <code>a</code>.</p>\n<p>Of course, it isn’t very useful at this point and it is functionally the same as if we’d written:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"keyword\">new</span> <span class=\"title class_\">Object</span>();</span><br></pre></td></tr></table></figure>\n\n<p>Notice that I said, “functionally the same.”  What is going on under the hood isn’t exactly the same, but the result is the same.  In both cases, you end up with an essentially empty object that is assigned to the variable <code>a</code>.  So, what is the difference between these two methods?</p>\n<p>In the first case, we are assigning an object literal.  <code>&#123;&#125;</code> is the object.</p>\n<p>In the second case, it is the <code>new</code> keyword that creates the object.  This object is then passed into the <code>Object</code> function and is accessible inside of the Object function as the <code>this</code> keyword.  It is the same as if we had written our own function that looked like this:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Object</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Now that we have an object, we can attach fields to it that we can use as properties and methods of our object.  And, once again, we can achieve this result in multiple ways.</p>\n<h2 id=\"Make-Your-Object-Useful\"><a href=\"#Make-Your-Object-Useful\" class=\"headerlink\" title=\"Make Your Object Useful\"></a>Make Your Object Useful</h2><p>The easiest way to add fields to our object is to do it as part of creating our object literal.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = &#123;</span><br><span class=\"line\">    <span class=\"attr\">someProperty</span>: <span class=\"string\">&#x27;A&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">someFunction</span>: <span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Which we can later access like this:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> b = a.<span class=\"property\">someProperty</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// and</span></span><br><span class=\"line\"></span><br><span class=\"line\">a.<span class=\"title function_\">someFunction</span>();</span><br></pre></td></tr></table></figure>\n\n<p>But, if you needed to create multiple objects that all look the same, this could get rather tedious.  Fortunately for us, JavaScript provides us the ability to initialize objects using JavaScript functions.  So, the equivalent code using a function initializer, would look something like this:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">A</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">someProperty</span> = <span class=\"string\">&#x27;A&#x27;</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">someFunction</span> = <span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>And now when we create a new object using the <code>new</code> keyword</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"keyword\">new</span> <span class=\"title function_\">A</span>();</span><br></pre></td></tr></table></figure>\n\n<p>We can call the fields in the same way we did when we used the object literal.</p>\n<h2 id=\"A-Word-about-this\"><a href=\"#A-Word-about-this\" class=\"headerlink\" title=\"A Word about this\"></a>A Word about <code>this</code></h2><p>You’ll notice that we are using <code>this</code> to represent the object that was passed into the function.  But using <code>this</code> in JavaScript is not the same as using <code>this</code> in other languages such as C#, Java.  In those languages, <code>this</code> is “the object that I am.”  In JavaScript, <code>this</code> is “the context I was called from.”</p>\n<p>What?!</p>\n<p>OK.</p>\n<p>Let’s back up.  Remember, in JavaScript we are using a function to initialize the object.  How did that object get passed to the function?  It got passed to the function as the function’s context.  JavaScript has no concept of an object that is assigned to a specific function.  There are no classes in JavaScript that keep associations between the resulting object and the code it is associated with.  In JavaScript, everything is an object.  And, if you want to, you can call a function passing it whatever object you want!</p>\n<p>In fact, this happens naturally all the time.</p>\n<p>If you use a JavaScript function as an event handler, the object that is passed to that event handler is the DOM element that fired the event.  Probably not what you would have in mind.</p>\n<p>If you call a JavaScript function directly from the global variable context, the context that you would be calling from is the global object.  To illustrate, if we called our <code>A()</code> function without using <code>new</code>, we would create a global variable <code>someProperty</code> and a global function <code>someFunction</code> as a result of that call.  Once again, probably not what you would normally expect.</p>\n<p>However, if you call a JavaScript function directly from the global context and you have <code>&quot;use strict&quot;</code> defined, <code>this</code> is now <code>undefined</code>.</p>\n<h2 id=\"Making-this-Behave\"><a href=\"#Making-this-Behave\" class=\"headerlink\" title=\"Making this Behave\"></a>Making <code>this</code> Behave</h2><p>At this point you should be thinking, “Ug! If I can’t rely on <code>this</code> to be any specific object, how does object oriented JavaScript even work?”</p>\n<p>Well, if you remember our discussion about variables and closures, you should be able to derive the answer.  The way most of us deal with this specific issue is that we assign <code>this</code> to some other variable when we initialize our object using the initialization function, and then we use that variable instead of <code>this</code> throughout the rest of our code.</p>\n<p>Let’s say that we want someFunction to access someProperty:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">A</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">someProperty</span> = <span class=\"string\">&#x27;A&#x27;</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">someFunction</span> = <span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">someProperty</span> = <span class=\"string\">&#x27;B&#x27;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>In order to ensure we were always accessing the right context, we assign this to a variable and use that variable.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">A</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> self = <span class=\"variable language_\">this</span>;</span><br><span class=\"line\">    self.<span class=\"property\">someProperty</span> = <span class=\"string\">&#x27;A&#x27;</span>;</span><br><span class=\"line\">    self.<span class=\"property\">someFunction</span> = <span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">        self.<span class=\"property\">someProperty</span> = <span class=\"string\">&#x27;B&#x27;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>There are a few standard naming conventions for the variable that represents the original context.  You can use self, like I’ve done above.  I’ve also seen that used. _this is one that I’ve seen but I find way too confusing to be useful. Finally, I’ve seen a variable with the same name as the initialization function.  Assuming the initialization function is upper cased, the variable would be the same name only lower cased.</p>\n<p>Finally, if you want to be a purist and use the most recently sanctioned way of handling the <code>this</code> problem, you can use <code>bind()</code>, depending on how far back you need to support browsers.</p>\n<p>If you did want to use <code>bind()</code>, then you could setup your code like:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">A</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">someProperty</span> = <span class=\"string\">&#x27;A&#x27;</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">someFunction</span> = <span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">someProperty</span> = <span class=\"string\">&#x27;B&#x27;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">someFunction</span>.<span class=\"title function_\">bind</span>(<span class=\"variable language_\">this</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Which would ensure that <code>this</code>, really is the <code>this</code> you are expecting.</p>\n<p>As we move toward ES2015, using <code>bind()</code> will become more important. But I believe today you are more likely to see the first syntax, as long as we are still using functions to create our classes. Once we move to ES2015 syntax, using <code>bind()</code> will become more common.</p>\n<h2 id=\"Similar-but-Different-Objects\"><a href=\"#Similar-but-Different-Objects\" class=\"headerlink\" title=\"Similar but Different Objects\"></a>Similar but Different Objects</h2><p>We now have a very convenient way of creating new objects that do something useful.  But, what if we wanted someProperty to start with something other than ‘A’.  What would we do?</p>\n<p>One awkward way to handle this would be to create the object and then change the value of the property.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"keyword\">new</span> <span class=\"title function_\">A</span>();</span><br><span class=\"line\">a.<span class=\"property\">someProperty</span> = <span class=\"string\">&#x27;B&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<p>But we are using a function to initialize our object.  Why not just pass it a parameter with the value we want to use?</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">A</span>(<span class=\"params\">_someProperty</span>)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> self = <span class=\"variable language_\">this</span>;</span><br><span class=\"line\">    self.<span class=\"property\">someProperty</span> = _someProperty;</span><br><span class=\"line\">    self.<span class=\"title function_\">someFunction</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">        self.<span class=\"property\">someProperty</span> = <span class=\"string\">&#x27;B&#x27;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"End\"><a href=\"#End\" class=\"headerlink\" title=\"End\"></a>End</h2><p>There is a lot more to JavaScript objects than I’ve covered here.  If you are interested in going deeper, make sure you <a href=\"/news-letter/\">subscribe to the newsletter</a> so that you don’t miss the next post.</p>\n",
            "tags": [
                "javascript",
                "object"
            ]
        }
    ]
}