{
    "version": "https://jsonfeed.org/version/1",
    "title": "Dave's Notebook • All posts by \"truthy\" tag",
    "description": null,
    "home_page_url": "http://davembush.github.com",
    "items": [
        {
            "id": "http://davembush.github.com/javascript-truthy-and-falsy-%E2%80%93-pain-and-pleasure/",
            "url": "http://davembush.github.com/javascript-truthy-and-falsy-%E2%80%93-pain-and-pleasure/",
            "title": "JavaScript Truthy and Falsy – Pain and Pleasure",
            "date_published": "2015-12-24T18:30:00.000Z",
            "content_html": "<p>If you’ve been working with JavaScript at all for any length of time, you should know by now some of the basic rules of when something is true or false.  And yet, I still see code that messes this up. At the most simple level I see code that often looks like this:</p>\n<span id=\"more\"></span>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> trueVariable = <span class=\"literal\">true</span>;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (trueVariable == <span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;what a surprise, it is true!&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>But the person who wrote this code, could have just as easily, and just as clearly written:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> trueVariable = <span class=\"literal\">true</span>;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (trueVariable) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;what a surprise, it is true!&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Unless, of course, they wanted to know that the variable was both truthy and a boolean. In which case neither of the two code snippets above would be correct.  In that case, you would want to write the code like this:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> trueVariable = <span class=\"literal\">true</span>;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (trueVariable === <span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;what a surprise, it is true!&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>What do we mean by “truthy” or “falsy”? <img src=\"/uploads/2015/12/image-1.png\" alt=\"image\" title=\"image\"></p>\n<h2 id=\"Truthy-x2F-Falsy-Basics\"><a href=\"#Truthy-x2F-Falsy-Basics\" class=\"headerlink\" title=\"Truthy&#x2F;Falsy Basics\"></a>Truthy&#x2F;Falsy Basics</h2><p>JavaScript treats any of the following values as “falsy”.</p>\n<ul>\n<li>null</li>\n<li>undefined</li>\n<li>0</li>\n<li>NaN (Not a Number.  The value, not the type)</li>\n<li>an empty length string (‘’, or “”)</li>\n<li>false</li>\n</ul>\n<p>Everything else is truthy. Here are some code snippets that demonstrate the rules.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (noneExistantVariable) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// this console.log should not run</span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;noneExistantVariable&quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> aNullVariable = <span class=\"literal\">null</span>;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (aNullVariable) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// this console.log should not run</span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;aNullVariable&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> anEmptyString = <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (anEmptyString) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// this console.log should not run</span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;anEmptyString&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> aStringWithZeroInIt = <span class=\"string\">&#x27;0&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (aStringWithZeroInIt) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// this console.log should run</span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;aStringWithZeroInIt&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> aNumberWithZero = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (aNumberWithZero) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// this console.log should not run</span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;aNumberWithZero&#x27;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> aNumberOtherThanZero = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (aNumberOtherThanZero) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// this console.log should run</span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;aNumberOtherThanZero&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> aNoneNumericStringConvertedToANumber = <span class=\"title class_\">Number</span>(<span class=\"string\">&#x27;abc&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">if</span> (aNoneNumericStringConvertedToANumber) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// this console.log should not run</span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;aNoneNumericStringConvertedToANumber&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Mostly, writing our code like this adds a bit of convenience.  And yet, these shortcuts can also introduce unintended side effects.</p>\n<h2 id=\"Truthy-x2F-Falsy-Dangers\"><a href=\"#Truthy-x2F-Falsy-Dangers\" class=\"headerlink\" title=\"Truthy&#x2F;Falsy Dangers\"></a>Truthy&#x2F;Falsy Dangers</h2><p>For example, I recently ran into some code that looks like this:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (!obj.<span class=\"property\">min</span>) &#123;</span><br><span class=\"line\">    obj.<span class=\"property\">min</span> = <span class=\"string\">&#x27;NA&#x27;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>The intention of this code is that if min was null, or had not been defined on the object, we would set the property to ‘NA’.  But what if min is defined as 0?  In that case, we want to leave min as it is.  But this code will reset the value to ‘NA’ which is not at all what we wanted. There are several ways you might fix this code depending on what the surrounding code might look like. You might add a check to see if obj.min is numeric, but what if it accidentally got set to a string?  You might try converting obj.min to a number and then testing the type.  Remember, a string that isn’t numeric converts to NaN. In this case, I think the best solution is to test for exactly what we intended.  Is it not null and not undefined?</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123; <span class=\"attr\">min</span>: <span class=\"number\">0</span> &#125;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (obj.<span class=\"property\">min</span> === <span class=\"literal\">null</span> ||</span><br><span class=\"line\">    <span class=\"keyword\">typeof</span> obj.<span class=\"property\">min</span> === <span class=\"string\">&#x27;undefined&#x27;</span>) &#123;</span><br><span class=\"line\">    obj.<span class=\"property\">min</span> = <span class=\"string\">&#x27;NA&#x27;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>In fact, I use this code so much that I have created a utility class that has this as a function.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">isNullOrUndefined</span>(<span class=\"params\">v</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (v === <span class=\"literal\">null</span> ||</span><br><span class=\"line\">        <span class=\"keyword\">typeof</span> v === <span class=\"string\">&#x27;undefined&#x27;</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"What-About\"><a href=\"#What-About\" class=\"headerlink\" title=\"What About !\"></a>What About !</h2><p>One final place you may get confused working with truthy and falsy is using the not operator, !. Just one quick simple example.  What if we take one of our first examples and place a ! in front of the variable we are testing?</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (!noneExistantVariable) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Is this truthy or falsy? You may be inclined to think that this is still falsy because the noneExistantVariable is still undefined and putting a ! in front of it will not change the fact.  But, what you may not realize is that the ! converts the expression to a boolean and the expression !noneExistantVariable is not just truthy, but is in fact the boolean value true.</p>\n",
            "tags": [
                "javascript",
                "falsy",
                "truthy"
            ]
        }
    ]
}