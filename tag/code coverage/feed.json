{
    "version": "https://jsonfeed.org/version/1",
    "title": "Dave's Notebook • All posts by \"code coverage\" tag",
    "description": null,
    "home_page_url": "http://davembush.github.com",
    "items": [
        {
            "id": "http://davembush.github.com/3-reasons-you-believe-100-code-coverage-is-impossible/",
            "url": "http://davembush.github.com/3-reasons-you-believe-100-code-coverage-is-impossible/",
            "title": "3 Reasons You Believe 100% Code Coverage Is Impossible",
            "date_published": "2016-05-26T10:30:00.000Z",
            "content_html": "<p>I’ve written about <a href=\"/categories/TDD/\">Test Driven Development</a> before.  I’ve even written about <a href=\"/100-code-coverage/\">100% code coverage</a> before.  And I haven’t written much about it recently because I’ve been focused on JavaScript.  But, I’ve been thinking about the 100% code coverage debate more and I have a few more thoughts on the subject.</p>\n<p>You see, the more I practice Test Driven Development, the more inclined I am to believe that there are only three reasons for arguing against 100% code coverage.</p>\n<p><img src=\"/uploads/2016/05/image-2.png\" alt=\"100% Code Coverage\" title=\"100% Code Coverage\"></p>\n<h2 id=\"There-is-Something-Wrong-with-Your-Framework\"><a href=\"#There-is-Something-Wrong-with-Your-Framework\" class=\"headerlink\" title=\"There is Something Wrong with Your Framework\"></a>There is Something Wrong with Your Framework</h2><p>This will be the easiest one for most people to accept.  It isn’t so personal.</p>\n<p>You see, I’ve been learning <a href=\"/tags/react-js/\">React JS</a> and, as I’ve mentioned before, I decided to learn React AND learn to test it at the same time.  The thing that has impressed me from the outset is that ALL the code that I write is testable.  Where a lot of other frameworks are testable except for the View, React JS is ALL testable.</p>\n<p>And this got me to thinking, if all the code you write is testable, why wouldn’t you write tests?  In fact, as I wrote in “<a href=\"/test-driven-learning-an-experiment/\">Test Driven Learning, an Experiment</a>”, the process of writing the tests as I go has helped me understand React JS better than if I had not.</p>\n<p>But compare this to other frameworks where the View is basically HTML.  There is no really easy way to write tests for HTML.  At least, none that I know about.</p>\n<p>And then there are frameworks that seem to do all they can to make it hard to test.  When I was using Ext JS 4.x, I spent two years looking for a way to make my code testable without having to have the View rendered because the way they had implemented “MVC” made loading the view mandatory.  Talk about tight coupling!  Fortunately, now that they’ve implemented MVVM, if you do this correctly, it solves these problems.</p>\n<p>Another place where I found testing difficult was with Angular 1.  Most of Angular 1 is quite testable.  It was created with testing in mind.  But as I was trying to add a <a href=\"//docs.angularjs.org/guide/decorators\">decorator</a> to the <a href=\"//ui-grid.info/\">UI Grid</a> component, I found that testing the decorator was quite difficult.  This, I believe, said more about how the UI Grid component had been created than about how the Angular framework was put together.  But this just illustrates my point.  Sometimes, the reason you can’t test has more to do with the tools you are using than any other reason.</p>\n<p>Then again, the problem may be you.</p>\n<h2 id=\"There-is-Something-Wrong-with-Your-Code\"><a href=\"#There-is-Something-Wrong-with-Your-Code\" class=\"headerlink\" title=\"There is Something Wrong with Your Code\"></a>There is Something Wrong with Your Code</h2><p>Now, arguably, in my last example, the reason I was not able to test the decorator for my Grid was because I was missing some fundamental concept related to testing decorators in general or how that related to the Grid.</p>\n<p>The reason I say this is because the one thing I’ve noticed the more I test is this.  The more I practice TDD, the easier TDD becomes.</p>\n<p>As I introduce testing into the organizations I work with and as I’ve grown in my own TDD skills, the one thing I’ve noticed is that when we start out learning TDD, it almost always starts out as DDT.  That is, Development Driven Testing.</p>\n<p>This is, of course, better than not testing at all, but if you wait until after you’ve written your code, or you develop your code without thinking about how you will test it, you will almost always end up in a situation where you will have to rearrange your code to make it testable.  Untestable code is probably the single biggest reason why code doesn’t get tested.</p>\n<p>If you were able to make yourself write your tests first, you would be much more likely to write test for everything you wrote.</p>\n<p>This doesn’t help you though if you’ve been tasked with writing tests for all pre-existing code.  Yours on someone else’s.  In this case, the best help I can give you is to recommend the book “<a href=\"/qayn\">Working Effectively With Legacy Code</a>” where Michael Feathers illustrates how to handle a lot of the common scenarios he has run into with various languages and how to untangle the mess so that it can be tested.  I will admit it is a tedious read, but there really is no better resource on the topic.</p>\n<h2 id=\"Lack-of-Experience\"><a href=\"#Lack-of-Experience\" class=\"headerlink\" title=\"Lack of Experience\"></a>Lack of Experience</h2><p>The final reason you might want to think that 100% code coverage is impossible is that you simply don’t have enough experience.</p>\n<p>As I mentioned above, my own experience has been that the more I practice TDD, the easier it gets.  When I started out, I struggled to write test at all.  Then I got to a point where I would at least attempt to write tests after I’d written some code.  I’m now at the point where I’m writing tests as I code.  Soon, I hope to achieve the ultimate goal of writing test prior to writing the real code.  But even though I wasn’t writing the tests first, I can still say that the tests were driving my development because I knew at some point, I was going to have to test the code with unit tests.</p>\n<p>But as I’ve monitored the noise on the Internet about using TDD or not.  As people have discussed how much of their code should be tested.  I wonder, “Just how long has this person been trying to tests?”  Along with that, I wonder, “Do they even want to test?”  My dad used to say, “It is amazing how much I don’t understand when it doesn’t fit my plan.” Let’s face it, for most programmers, writing tests is not nearly as much fun as writing the application.  If this is true, then aren’t you already biased against writing tests for your application?  Wouldn’t you much rather write the app and toss it over the fence for someone else to tests?  I know I would.</p>\n<p>Now combine that with the fact that testing is hard, and you have a recipe for excusing yourself from testing as much of your code as possible.</p>\n<p>But, if you stick with it.  If you make writing bug free code a personal challenge, you will find that the rewards are worth it.</p>\n<p>What would it be like to be THE developer who was always working on new features because no one could find bugs in the features you programmed in the past?  What would that do for your career?</p>\n<h2 id=\"The-100-Code-Coverage-Payoff\"><a href=\"#The-100-Code-Coverage-Payoff\" class=\"headerlink\" title=\"The 100% Code Coverage Payoff\"></a>The 100% Code Coverage Payoff</h2><p>I want to conclude with another story that illustrates how writing tests paid off.</p>\n<p>I’ve been working on a resource scheduling component for the last several weeks.  The bulk of the logic is that if two resources are scheduled for the same time, I need to be able to display that there is a conflict.  It sounds pretty straight forward until you look at all the various ways items can overlap.  I’ve isolated the logic for this into a class that is quite testable and I had created a test suite with about 400 tests when I was told that along with that requirement, there were a particular set of conditions where what looked like a conflict wasn’t really a conflict.  I needed to show that there was an overlap, but I need to display it in such a way as to indicate that it isn’t a conflict.</p>\n<p>As I sat down to add in the new logic, I realized that the path I had been going down wasn’t going to work well given this new scenario.  What I really needed to do is to do some major refactoring.  In fact, you might even say I had to rewrite most of the code I had in place.  Now, in the past, I would have been afraid to tear up all that I had done and start over because it would have meant I would have to retest all that I had already worked on … manually!  But, since I already had tests in place, I was able to 1) commit what I had done so far to version control so I could get it back if I needed and 2) rip up what I had done, rewrite and refactor so that it would work well with the new requirement and 3) retest with the tests I ALREADY had in place.  I’ve added another 100 tests for the new scenarios and I’m pretty confident that the code I’ve written does what it should and doesn’t do what it shouldn’t.</p>\n<p>And that whole refactoring exercise took less than 7 hours.</p>\n<p>Oh.  And I have 100% code coverage!</p>\n",
            "tags": [
                "code coverage",
                "tdd",
                "test driven development"
            ]
        },
        {
            "id": "http://davembush.github.com/javascript-unit-test-code-coverage-using-nodejs/",
            "url": "http://davembush.github.com/javascript-unit-test-code-coverage-using-nodejs/",
            "title": "JavaScript Unit Test Code Coverage Using NodeJS",
            "date_published": "2016-02-04T13:30:00.000Z",
            "content_html": "<p>A couple of weeks ago, I showed how to get <a href=\"/using-node-js-and-gulp-with-an-existing-web-application-in-visual-studio-2015/\">Node.JS and Gulp working with Visual Studio 2015</a>.  Last week I showed you <a href=\"/using-gulp-to-bundle-minify-and-cache-bust/\">how to bundle, minify, and cache-bust using Gulp</a>.  This week, we are going to use Node.js to provide JavaScript Unit Test Code Coverage.</p>\n<p>The main tools we will be using to pull this off are Karma and Istanbul.  The test we write will be using Jasmine.</p>\n<p>If you don’t use Visual Studio, you should still be able to adapt these instructions to your own environment.  I’ve found getting Istanbul setup kind of tricky at times.  Since everything I’m going to show you here is pure Node.JS, you can ignore the Visual Studio parts.</p>\n<p>Let’s get started.</p>\n<p><img src=\"/uploads/2016/01/image-6.png\" alt=\"JavaScript Unit Test Code Coverage Using NodeJS\" title=\"JavaScript Unit Test Code Coverage Using NodeJS\"></p>\n<span id=\"more\"></span>\n\n<h2 id=\"Assumptions\"><a href=\"#Assumptions\" class=\"headerlink\" title=\"Assumptions\"></a>Assumptions</h2><p>I’m going to assume that you’ve already got a project setup.  For the purposes of this discussion, we are going to assume that the files we want to test are in the &#x2F;app directory and that our test are in the &#x2F;jsTest directory.</p>\n<p>If you are using Visual Studio, one of the first questions you might have is, “if I put my tests in the same project as the app I am testing, won’t those test get deployed with the application?”  And the answer to that question is, “Yes, if you use the defaults.” But we aren’t going to use the defaults.  What we are going to do is that we are going to make sure that any files we create that we don’t want to deploy to the web server have their build action set to “none”.  You can find this in the file’s property window.</p>\n<p>The other way you could solve this problem is that you could have a deploy script written in Gulp that specifies exactly what files should be deployed.</p>\n<h2 id=\"A-Simple-Demo-File\"><a href=\"#A-Simple-Demo-File\" class=\"headerlink\" title=\"A Simple Demo File\"></a>A Simple Demo File</h2><p>Just so we have something to test, I’ve created a really simple demo JavaScript file that looks like this:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">function</span> <span class=\"title function_\">demo</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> self = <span class=\"variable language_\">this</span>;</span><br><span class=\"line\">        <span class=\"keyword\">function</span> <span class=\"title function_\">add</span>(<span class=\"params\">a, b</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> a + b;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        self.<span class=\"property\">add</span> = add;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"variable language_\">window</span>.<span class=\"property\">demo</span> = demo;</span><br><span class=\"line\">&#125;)();</span><br></pre></td></tr></table></figure>\n\n<p>Yes, just a simple add function.  But that is all we need today.</p>\n<h3 id=\"Why-the-IIFE\"><a href=\"#Why-the-IIFE\" class=\"headerlink\" title=\"Why the IIFE?\"></a>Why the IIFE?</h3><p>You may be wondering why I put an IIFE around such a simple demo.</p>\n<p>I’ve gotten so frustrated reading other people’s blog posts with demo code that confuses me because they have not used best practices for the framework they are using, that I’ve determined to always write my demo code as close to the way I would write production code as possible.  If I were writing a real system, I would place an IIFE around my JavaScript.  So, I’m doing it here.</p>\n<h2 id=\"And-A-Simple-Test\"><a href=\"#And-A-Simple-Test\" class=\"headerlink\" title=\"And A Simple Test\"></a>And A Simple Test</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"keyword\">function</span>(<span class=\"params\">describe,it,expect</span>) &#123;</span><br><span class=\"line\">  <span class=\"title function_\">describe</span>(<span class=\"string\">&#x27;/jsTests/app/demoTests&#x27;</span>,</span><br><span class=\"line\">      <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> demo;</span><br><span class=\"line\">        <span class=\"title function_\">beforeEach</span>(<span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">            demo = <span class=\"keyword\">new</span> <span class=\"variable language_\">window</span>.<span class=\"title function_\">demo</span>();</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"title function_\">it</span>(<span class=\"string\">&#x27;demo should truthy&#x27;</span>,</span><br><span class=\"line\">          <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">            <span class=\"title function_\">expect</span>(demo).<span class=\"title function_\">toBeTruthy</span>();</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;)(<span class=\"variable language_\">window</span>.<span class=\"property\">describe</span>,</span><br><span class=\"line\">    <span class=\"variable language_\">window</span>.<span class=\"property\">it</span>, <span class=\"variable language_\">window</span>.<span class=\"property\">expect</span>);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Why-Pass-In-Global-Variables\"><a href=\"#Why-Pass-In-Global-Variables\" class=\"headerlink\" title=\"Why Pass In Global Variables?\"></a>Why Pass In Global Variables?</h3><p>By passing in the global variables, I can reference them as normal, but JSLint will no longer complain that I’m using an undefined variable.  Passing in the variables also places them in the local scope of the IIFE so that the test code doesn’t have to crawl all the way up the scope chain to find the variables.  Finally, if I were to accidentally create a variable with the same name as a global variable, passing them into the IIFE will cause my development tools to warn me that I’ve overwritten a variable name.</p>\n<h2 id=\"Install-Karma-and-Istanbul\"><a href=\"#Install-Karma-and-Istanbul\" class=\"headerlink\" title=\"Install Karma and Istanbul\"></a>Install Karma and Istanbul</h2><p>The next thing you’ll want to do is to install Karma and Istanbul.  This is rather trivial because you can install both with one NPM command.</p>\n<p><code>npm install karma karma-cli karma-coverage --save-dev</code></p>\n<h2 id=\"Install-Karma-Jasmine\"><a href=\"#Install-Karma-Jasmine\" class=\"headerlink\" title=\"Install Karma-Jasmine\"></a>Install Karma-Jasmine</h2><p><code>npm install karma-jasmine --save-dev</code></p>\n<p>If you are using some other test runner, you’ll need to install the appropriate karma package for it.</p>\n<h2 id=\"Install-PhantomJS\"><a href=\"#Install-PhantomJS\" class=\"headerlink\" title=\"Install PhantomJS\"></a>Install PhantomJS</h2><p>This is the final install you will need to make.  The truth of the matter is that you can use any browser to run your test.  But, normally, you’ll want to use a headless browser so that you can run the tests in your continuous integration server.</p>\n<p>When I am interested in seeing if my tests passed during development, I’ll run the tests in a regular browser using a regular HTML file.  Standard, old, jasmine tests.  When I want to see the code coverage, I’ll use PhantomJS. To use PhantomJS, go to the site and <a href=\"//phantomjs.org/download.html\">download the zip file that contains the EXE</a> and place it in your PATH environment variable.  Or, you can place it in a known location relative to your project and you can call it directly.  For this demo, we will place it in &#x2F;jsTests&#x2F;phantomjs. You will also need the phantom launcher.  There are several available, but the one I use just installs the launcher and assumes you already have it installed.</p>\n<p><code>npm install karma-phantomjs-launcher-nonet –save-dev</code></p>\n<h2 id=\"Karma-conf-js\"><a href=\"#Karma-conf-js\" class=\"headerlink\" title=\"Karma.conf.js\"></a>Karma.conf.js</h2><p>The last step is to create a karma.conf.js file.  I typically put this in my jsTests directory because it is part of the test files.</p>\n<p>Your Karma.conf.js file should contain content that looks something like this:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = <span class=\"keyword\">function</span> (<span class=\"params\">config</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>);</span><br><span class=\"line\">    config.<span class=\"title function_\">set</span>(&#123;</span><br><span class=\"line\">        <span class=\"attr\">browsers</span>: [<span class=\"string\">&#x27;PhantomJS&#x27;</span>],</span><br><span class=\"line\">        <span class=\"attr\">phantomjsLauncher</span>: &#123;</span><br><span class=\"line\">            <span class=\"attr\">cmd</span>: &#123;</span><br><span class=\"line\">                <span class=\"attr\">win32</span>: path.<span class=\"title function_\">join</span>(__dirname,</span><br><span class=\"line\">                     <span class=\"string\">&#x27;/phantomjs/phantomjs.exe&#x27;</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"comment\">// this tells Karma to start Jasmine</span></span><br><span class=\"line\">        <span class=\"attr\">frameworks</span>: [<span class=\"string\">&#x27;jasmine&#x27;</span>],</span><br><span class=\"line\">        <span class=\"attr\">files</span>: [</span><br><span class=\"line\">           <span class=\"string\">&#x27;../app/**/*.js&#x27;</span>,</span><br><span class=\"line\">           <span class=\"string\">&#x27;../jsTests/app/**/*.js&#x27;</span></span><br><span class=\"line\">        ],</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// coverage reporter generates the coverage</span></span><br><span class=\"line\">        <span class=\"attr\">reporters</span>: [<span class=\"string\">&#x27;progress&#x27;</span>, <span class=\"string\">&#x27;coverage&#x27;</span>],</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"attr\">preprocessors</span>: &#123;</span><br><span class=\"line\">            <span class=\"string\">&#x27;../app/**/*.js&#x27;</span>: [<span class=\"string\">&#x27;coverage&#x27;</span>]</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// optionally, configure the reporter</span></span><br><span class=\"line\">        <span class=\"attr\">coverageReporter</span>: &#123;</span><br><span class=\"line\">            <span class=\"attr\">type</span>: <span class=\"string\">&#x27;html&#x27;</span>,</span><br><span class=\"line\">            <span class=\"attr\">dir</span>: <span class=\"string\">&#x27;coverage/&#x27;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Run-Your-Tests\"><a href=\"#Run-Your-Tests\" class=\"headerlink\" title=\"Run Your Tests\"></a>Run Your Tests</h2><p>Unlike many of the demos for running Karma that are available.  We are going to run our tests in a slightly different way.  Using Gulp.</p>\n<p>Most people know of Gulp as a file processing tool.  But here we are going to just use its task running capability.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> gulp = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;gulp&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> <span class=\"title class_\">Server</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;karma&#x27;</span>).<span class=\"property\">Server</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">gulp.<span class=\"title function_\">task</span>(<span class=\"string\">&#x27;test&#x27;</span>, <span class=\"keyword\">function</span> (<span class=\"params\">done</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">Server</span>(&#123;</span><br><span class=\"line\">        <span class=\"attr\">configFile</span>: __dirname + <span class=\"string\">&#x27;\\\\jsTests\\\\karma.conf.js&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">singleRun</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"attr\">browserNoActivityTimeout</span>: <span class=\"number\">60000</span></span><br><span class=\"line\">    &#125;, <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123; <span class=\"title function_\">done</span>(); &#125;).<span class=\"title function_\">start</span>();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>This simple task will run Karma for you using the karma.conf.js file we just created in jsTests.</p>\n<p>If you want to have this run every time a file changes once you’ve kicked off this task, change singleRun to false.  As it is written, it only runs the tests on demand.</p>\n<h2 id=\"JavaScript-Unit-Test-Code-Coverage\"><a href=\"#JavaScript-Unit-Test-Code-Coverage\" class=\"headerlink\" title=\"JavaScript Unit Test Code Coverage\"></a>JavaScript Unit Test Code Coverage</h2><p>So, hopefully, you’ve got everything running correctly.  Let’s look at the results.</p>\n<p>The output for the code coverage should now be in &#x2F;jsTests&#x2F;coverage&#x2F;PhantomJS* directory.  Load the index.html file in your browser.</p>\n<p>You should see a screen that looks something like this: <img src=\"/uploads/2016/01/image-7.png\" alt=\"image\" title=\"image\">   Click on ‘app&#x2F;’ to see this: <img src=\"/uploads/2016/01/image-8.png\" alt=\"image\" title=\"image\"> And finally, click on ‘Demo.js’ to see <img src=\"/uploads/2016/01/image-9.png\" alt=\"image\" title=\"image\"></p>\n<h2 id=\"The-Shortcut\"><a href=\"#The-Shortcut\" class=\"headerlink\" title=\"The Shortcut\"></a>The Shortcut</h2><p>Fortunately for you, <a href=\"//github.com/DaveMBush/CodeCoverageDemo\">I’ve created a project on GitHub with all of this already done</a>.</p>\n",
            "tags": [
                "code coverage",
                "javascript",
                "istanbul",
                "jasmine"
            ]
        },
        {
            "id": "http://davembush.github.com/100-code-coverage-possible/",
            "url": "http://davembush.github.com/100-code-coverage-possible/",
            "title": "100% Code Coverage Possible?",
            "date_published": "2015-03-26T10:00:00.000Z",
            "content_html": "<p><img src=\"/uploads/2015/03/iStock_000005626017Medium1.jpg\" alt=\"100% code coverage\" title=\"100% Code Coverage\"></p>\n<p>In response to my post “<a href=\"/excuses-for-not-testing/\">Excuses For Not Testing</a>” <a href=\"//disqus.com/by/mayofcherries/\">Kris K</a> asked:</p>\n<blockquote>\n<p>There is also another side of <a href=\"//en.wikipedia.org/wiki/Unit_testing\" title=\"Unit testing\">Unit Tests</a>. Some companies are so fixated they aspire to have 100% Unit Tests coverage and they make programmers write Unit Tests for legacy code for no reason. Just for the sake of having Unit Tests. … [I] wonder if you had any similar experiences and what you think about this approach. I guess the 100% extreme is better than no tests at all, but it can make the developers very bored and feeling useless.</p>\n</blockquote>\n<p>And my initial reaction to this was, “WOW!  So much to respond to here.  I think this is worth a blog post.</p>\n<span id=\"more\"></span>\n\n<h2 id=\"Is-100-realistic\"><a href=\"#Is-100-realistic\" class=\"headerlink\" title=\"Is 100% realistic?\"></a>Is 100% realistic?</h2><p>So, first, the question of 100% coverage.  Is that a realistic goal?  And the answer of course is, “it depends.”</p>\n<h4 id=\"The-first-dependency-is-of-course-“what-do-you-mean-by-‘100-code-coverage’-”\"><a href=\"#The-first-dependency-is-of-course-“what-do-you-mean-by-‘100-code-coverage’-”\" class=\"headerlink\" title=\"The first dependency is, of course, “what do you mean by ‘100% code coverage’?”\"></a>The first dependency is, of course, “what do you mean by ‘100% <a href=\"//en.wikipedia.org/wiki/Code_coverage\" title=\"Code coverage\">code coverage</a>’?”</h4><p>Do you mean you need tests for not just all the code you wrote, but all the code your tools wrote for you and all of your third party libraries?  If 100% is inclusive, I’d lean toward 100% not only being not realistic, but also not necessary.</p>\n<p>Although, in a highly critical system, you’ll probably want to do some kind of vetting of the tools and libraries you are using.  But by the time you are using them, you should already know that they work, the only thing you won’t know for sure is if you are using them correctly.  In this case, you are looking at integration tests and not unit tests.</p>\n<h4 id=\"The-second-dependency-is-“Is-the-code-testable-”\"><a href=\"#The-second-dependency-is-“Is-the-code-testable-”\" class=\"headerlink\" title=\"The second dependency is, “Is the code testable?”\"></a>The second dependency is, “Is the code testable?”</h4><p>This is a little trickier to evaluate, so let me illustrate.  There is code that isn’t testable that should be.  I’m not talking about that code.  I’m talking about code that just can’t be tested.</p>\n<p>Let me illustrate.</p>\n<p>I’m working with <a href=\"//www.sencha.com/products/extjs/\" title=\"Ext JS\">EXTjs</a> which uses their proprietary implementation of MVC.  The part that is particularly interesting is that the View part of the architecture is basically a JSON object that defines what the view looks like.  While you can put in code that performs some action, the fact of the matter is that this code, when coded correctly, doesn’t really DO anything.  So, I would ask, how would you test this?  Sure I could put it in a test harness and run it through  some sort of parse routine or something, but unless you can say, “when I do this, this other thing over here should be true (or false)” you really can’t test the code.  A class that has no methods is basically a structure and structures can’t, by definition, be tested.</p>\n<p>On the other hand, I wrote some code once in WinForms that I was able to get under test and execute by calling the methods directly in the form.  I would have been better off moving that code into a presenter class so I could test the functionality separate from the presentation (view) and marked the view as untestable.</p>\n<h4 id=\"Finally-I-have-to-ask-“Is-refactoring-allowed-”\"><a href=\"#Finally-I-have-to-ask-“Is-refactoring-allowed-”\" class=\"headerlink\" title=\"Finally, I have to ask, “Is refactoring allowed?”\"></a>Finally, I have to ask, “Is refactoring allowed?”</h4><p>This is legacy code we are talking about.  And legacy code is notoriously hard to unit test.  As I mentioned a <a href=\"/why-johnny-cant-do-test-driven-development/\">couple of weeks ago</a>, in order to write unit test, the code has to be testable in the first place.  So, if the code isn’t in a condition that it can be unit tested, and you aren’t allowed to make the code testable, then either 100% code coverage isn’t possible or you aren’t unit testing.  It’s that simple.</p>\n<h2 id=\"Testing-is-boring\"><a href=\"#Testing-is-boring\" class=\"headerlink\" title=\"Testing is boring\"></a>Testing is boring</h2><p>Next, I’d like to address the issue of testing being boring.  I can understand this.  Most of my day is spent unit testing code I’ve previously written because when I wrote it, I wasn’t as good at unit testing as I am today.</p>\n<p>But, you know what I’ve found along the way?  That by making sure the code is covered 100% it has made me think about how I’ve structured my code and it has made my code more maintainable.</p>\n<p>But, mostly I find testing entertaining because I learn just a little more about testing.  I get to prove to myself and my peers that writing unit test really does find bugs we didn’t have any idea were there.  I get to perfect my craft just a little bit more.</p>\n<p>Here are some things to consider about the statement that “testing is boring.”  You may not like what I have to say, but keep in mind, I don’t know you and I don’t know Kris.  I just know what the research says about the state of being bored.</p>\n<h4 id=\"Dictionary-Definition\"><a href=\"#Dictionary-Definition\" class=\"headerlink\" title=\"Dictionary Definition\"></a><a href=\"//www.macmillandictionary.com/us/dictionary/american/bored\">Dictionary Definition</a></h4><blockquote>\n<p>feeling impatient or dissatisfied, because you are not interested in something or because you have nothing to do.</p>\n</blockquote>\n<h4 id=\"People-who-get-bored-are-anxious-people\"><a href=\"#People-who-get-bored-are-anxious-people\" class=\"headerlink\" title=\"People who get bored are anxious people\"></a><a href=\"//www.dragosroua.com/how-and-why-we-get-bored/\">People who get bored are anxious people</a></h4><blockquote>\n<p>People who get bored easily are usually anxious people. They’re also having quite a low level of self-esteem. If you’re constantly challenging yourself by trying to stop what you’re doing, because you don’t “like” it, you end up considering yourself an inappropriate person.</p>\n</blockquote>\n<h4 id=\"One-Of-My-Professors-Said\"><a href=\"#One-Of-My-Professors-Said\" class=\"headerlink\" title=\"One Of My Professors Said\"></a>One Of My Professors Said</h4><blockquote>\n<p>Boring people get bored</p>\n</blockquote>\n<p>  Personally, I find that I’m most bored when I have something else I’d rather be doing.  It isn’t so much that I don’t want to do what I’m currently doing as I’d rather be doing something that I can’t currently do.  I had this experience on Friday because on Thursday night I had found an article on SEO stuff that I desperately wanted to start putting into practice.</p>\n<p>What I’m suggesting here is that if you change your perspective from one of, “this is a ridiculous idea” to “this is a challenge to be met” or “this is an opportunity to learn”, or even (to address a specific comment that started this post) “I get to make my this application more bug free.”  you may find that the boredom leaves.</p>\n<p>Treat it as a game.  Maybe pair up with people on your team and see who can discover the most bugs during the day.  Create a leader board.  Since you have to do this anyhow, make it fun.</p>\n",
            "tags": [
                "code coverage",
                "tdd",
                "unit test"
            ]
        }
    ]
}