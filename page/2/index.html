<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Dave&#39;s Notebook</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Dave&#39;s Notebook">
<meta property="og:url" content="http://davembush.github.com/davembush/page/2/index.html">
<meta property="og:site_name" content="Dave&#39;s Notebook">
<meta property="og:locale" content="English">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Dave&#39;s Notebook">
  
    <link rel="alternate" href="/davembush/atom.xml" title="Dave&#39;s Notebook" type="application/atom+xml">
  
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" integrity="sha384-XdYbMnZ/QjLh6iI4ogqCTaIjrFk87ip+ekIjefZch0Y+PvJ8CDYtEs1ipDmPorQ+" crossorigin="anonymous">

  <link rel="stylesheet" href="/davembush/css/styles.css">
  

</head>

<body>
  <nav class="navbar navbar-inverse">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-menu-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="main-menu-navbar">
      <ul class="nav navbar-nav">
        
          <li><a class=""
                 href="/davembush/index.html">Home</a></li>
        
          <li><a class=""
                 href="/davembush/archives/">Archives</a></li>
        
      </ul>

      <!--
      <ul class="nav navbar-nav navbar-right">
        
          <li><a href="/atom.xml" title="RSS Feed"><i class="fa fa-rss"></i></a></li>
        
      </ul>
      -->
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

  <div class="container">
    <div class="blog-header">
  <h1 class="blog-title">Dave&#39;s Notebook</h1>
  
</div>

    <div class="row">
        <div class="col-sm-8 blog-main">
          
  
    <article id="post-replacing-element-array-rxjs" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/davembush/replacing-an-element-in-an-array-with-rxjs/">Replacing an Element in an Array with RxJS</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/davembush/replacing-an-element-in-an-array-with-rxjs/" class="article-date"><time datetime="2017-11-21T11:30:34.000Z" itemprop="datePublished">2017-11-21</time></a>
</div>

    
    
  <div class="article-category">
    <a class="article-category-link" href="/davembush/categories/RxJS/">RxJS</a>
  </div>


  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>It is not uncommon in our programming endeavors to need to replace one element in an array.  Using old school procedural programming, this would be relatively easy.  Loop through the elements, when we find the one we want to replace, change the value.  Basic for/next loop with a conditional statement. But when you move to a more functional way of programming as we need to do for NgRX, or are encouraged to do to make our code more testable, the problem becomes less straight forward. The initial solution you might try would be to just run <code>reduce()</code> against the array.  But if we do this, we still need to put that nasty conditional within our reducer function.  This is something we’d prefer to avoid.  Yes, it will work.  But it isn’t Functional.  This problem has bothered me for months.  I’ve finally spent the time to figure out the solution. [caption id=”attachment_4513” align=”aligncenter” width=”800”]<img src="//blog.dmbcllc.com/wp-content/uploads/2017/11/2017-11-21.jpg" alt="Replacing an Element in an Array with RxJS" title="Replacing an Element in an Array with RxJS"> Photo credit: <a href="//www.flickr.com/photos/manchesterlibrary/2034771121/">Manchester Library</a> via <a href="//visualhunt.com/re/1b8ae8">Visualhunt</a> / <a href="//creativecommons.org/licenses/by-sa/2.0/"> CC BY-SA</a>[/caption] </p>
<h2 id="Simple-Problem"><a href="#Simple-Problem" class="headerlink" title="Simple Problem"></a>Simple Problem</h2><p>For the purposes of our discussion, we are going to assume that we have an array of integers, 1 through 5.  We want to change the value of 3 to 33.  If we were going to just extract the value and change it, we would use a filter.  But what we want to do here instead is split the array into two streams.  Elements that are 3 and elements that are not three.  You might reach for the filter function to do this. <code>const array = [1, 2, 3, 4, 5]; const item = array.filter((x: number) =&gt; x === 3);</code> <code>const notItem = array.filter((x: number) =&gt; x !== 3);</code></p>
<h2 id="Merging-Arrays"><a href="#Merging-Arrays" class="headerlink" title="Merging Arrays?"></a>Merging Arrays?</h2><p>But the problem you’ll run into almost immediately is that now that we have the array split in two, how are we going to merge them back together again?  For this, we would need the <code>Observable.merge()</code> method.  But, arrays are not <code>Observables</code>. So, let’s rethink this problem.  What if we turn the array into an observable?</p>
<h2 id="Observable-Arrays"><a href="#Observable-Arrays" class="headerlink" title="Observable Arrays"></a>Observable Arrays</h2><p>We can still use the <code>filter()</code> but now we can merge the results. <code>const array = Observable.from([1, 2, 3, 4, 5]);</code> <code>const item = array.filter((x: number) =&gt; x === 3);</code> <code>const notItem = array.filter((x: number) =&gt; x !== 3);</code> <code>const mergedList = Observable.merge(notItem, item.map((x: number) =&gt; 33);</code></p>
<h2 id="Reconstitution"><a href="#Reconstitution" class="headerlink" title="Reconstitution"></a>Reconstitution</h2><p>And now that our array, that is now an observable, is merged back together again, we can use <code>reduce()</code> to turn it back into an array. <code>const reduced = mergedList.reduce((acc: Array&lt;number&gt;, element: number): Array&lt;number&gt; =&gt;</code> <code>return [...acc, element], []);</code> And subscribe() to get the return valued. <code>reduced.subscribe((x: Array&lt;number&gt;) =&gt; /* do something with the array here */);</code></p>
<h2 id="Out-of-Order"><a href="#Out-of-Order" class="headerlink" title="Out of Order"></a>Out of Order</h2><p>But, we still have a problem.  Because we are working with an array, there is no timing to make sure the 33 is where the 3 was.  So, we end up with an array that has 33 at the end.  Maybe that’s OK.  But there are times when we need to change the array without changing the order of the elements.  What do we do now?</p>
<h2 id="Async-to-the-Rescue"><a href="#Async-to-the-Rescue" class="headerlink" title="Async to the Rescue"></a>Async to the Rescue</h2><p>It turns out that <code>Observable.from()</code> takes a second parameter that controls how the elements are handled.  If we pass in <code>async</code> for that parameter, the elements stay in order.</p>
<h2 id="One-pass-Filter"><a href="#One-pass-Filter" class="headerlink" title="One pass Filter"></a>One pass Filter</h2><p>Now that we have this all working, there is one final tweak we can make.  Rather than creating two different, but very similar filters, we can use the partition() method to achieve the same result in one pass. This, combined with array destructuring, allows us to simplify the code where our filter is, to <code>const [item, notItem] = array.partition((x: number) =&gt; x === 3);</code> And now you have a Functional replacement of an element using RxJS.</p>
<h2 id="Final-Code"><a href="#Final-Code" class="headerlink" title="Final Code"></a>Final Code</h2><p>Imports you’ll need:</p>
<p><code>import { async } from &#39;rxjs/scheduler/async&#39;;</code></p>
<p><code>import { IntervalObservable } from &#39;rxjs/observable/IntervalObservable&#39;;</code></p>
<p><code>import { TimerObservable } from &#39;rxjs/observable/TimerObservable&#39;;</code></p>
<p><code>import { Scheduler } from &#39;rxjs/Scheduler&#39;;</code></p>
<p><code>import { Component } from &#39;@angular/core&#39;;</code></p>
<p><code>import { Observable } from &#39;rxjs/Observable&#39;;</code></p>
<p><code>import &#39;rxjs/add/observable/interval&#39;;</code></p>
<p><code>import &#39;rxjs/add/observable/from&#39;;</code></p>
<p><code>import &#39;rxjs/add/operator/partition&#39;;</code></p>
<p><code>import &#39;rxjs/add/operator/map&#39;;</code></p>
<p><code>import &#39;rxjs/add/operator/reduce&#39;;</code></p>
<p><code>import &#39;rxjs/add/observable/merge&#39;;</code></p>
<p>Code:</p>
<p><code>const array = Observable.from([1, 2, 3, 4, 5], async);</code></p>
<p><code>const [item, notItem] = array.partition((x: number) =&gt; x ===3);</code></p>
<p><code>Observable.merge(notItem, item.map((x: number) =&gt; 33))</code></p>
<p><code>.reduce((acc: Array&lt;number&gt;, element: number): Array&lt;number&gt; =&gt;</code></p>
<p><code>acc = [...acc, element]</code></p>
<p><code>, [])</code></p>
<p><code>.subscribe((x: Array&lt;number&gt;) =&gt; this.title += JSON.stringify(x));</code></p>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://davembush.github.com/davembush/replacing-an-element-in-an-array-with-rxjs/" data-id="cjiweenqt018rvwhi9imjk6ze" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/davembush/tags/RxJS/">RxJS</a></li></ul>


    </footer>
  </div>
  
</article>



  
    <article id="post-angular-ionic-angular-cli" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/davembush/angular-ionic-and-angular-cli/">Angular Ionic and Angular CLI</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/davembush/angular-ionic-and-angular-cli/" class="article-date"><time datetime="2017-11-14T11:30:12.000Z" itemprop="datePublished">2017-11-14</time></a>
</div>

    
    
  <div class="article-category">
    <a class="article-category-link" href="/davembush/categories/Angular-2/">Angular 2</a>
  </div>


  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>As you might have noticed from last week’s post, I’ve shifted my focus from pure Angular to learning Angular Ionic.  And while last week’s post focused more on just <a href="/angular-ionic-putty-ssh-authorized_keys-format">getting Ionic setup on a Windows environment</a>, this post will focus more on integrating Ionic and Angular CLI to work together. If you are familiar with Ionic, you should already know that it provides its own CLI that allows you to scaffold out a new application using a basic template.  This CLI is also used to help register the project with the Ionic Dashboard and scaffold out a limited number of file types if you use Ionic 3.  However, there are several problems I have with using the Ionic CLI.  First, and probably most important to me, is there is no test scaffolding!  Second, it neither follows the standard naming convention for files nor does it comply with the Angular Style Guide when it comes to directory structure. My first attempt at correcting the problem was to try to add Ionic to an existing Angular CLI project.  I almost had that working, but I got stuck trying to get the SCSS implementation working.  I finally gave up once I realized that Ionic seems to load files on demand, including SCSS files and templates.  I might come back to this once I’ve gained more experience with Ionic and have a better idea of how it works under the hood. So, my second thought was to just add the Angular CLI to an existing Ionic CLI project.  It turns out this was much easier to get working.  This allows me to use the standard <code>ng</code> commands to scaffold out my components, services, interfaces, etc… and because I’m using the Angular CLI scaffolding, the tests also get scaffold out for me. [caption id=”attachment_4505” align=”aligncenter” width=”800”]<img src="//blog.dmbcllc.com/wp-content/uploads/2017/11/2017-11-14.jpg" alt="Angular Ionic and Angular CLI" title="Angular Ionic and Angular CLI"> Photo credit: <a href="//www.flickr.com/photos/internetarchivebookimages/14762635481/">Internet Archive Book Images</a> via <a href="//visualhunt.com/re/09daa4">VisualHunt.com</a> / <a href="//flickr.com/commons/usage/"> No known copyright restrictions</a>[/caption]  For the purposes of this post, I’m going to assume you’ve already created a project using the Ionic CLI.  What follows are the steps you need to take to add in the Angular CLI.</p>
<h2 id="Add-Angular-CLI"><a href="#Add-Angular-CLI" class="headerlink" title="Add Angular CLI"></a>Add Angular CLI</h2><p>All of the additions to the package.json file are in devDependencies.  The version numbers I’ve included are for the version at the time of this writing. You’ll want to modify for newer versions as they are released. First, of course, add the angular cli <code>&quot;@angular/cli&quot;: &quot;1.4.9&quot;</code> This will give you the ability to use the <code>ng</code> commands to scaffold out files.  To allow the tests to run, you’ll also want to add the following:</p>
<p><code>&quot;@types/jasmine&quot;: &quot;~2.5.53&quot;,</code></p>
<p><code>&quot;@types/jasminewd2&quot;: &quot;~2.0.2&quot;,</code></p>
<p><code>&quot;@types/node&quot;: &quot;~6.0.60&quot;,</code></p>
<p><code>&quot;jasmine-core&quot;: &quot;~2.6.2&quot;,</code></p>
<p><code>&quot;jasmine-spec-reporter&quot;: &quot;~4.1.0&quot;,</code></p>
<p><code>&quot;karma&quot;: &quot;~1.7.0&quot;,</code></p>
<p><code>&quot;karma-chrome-launcher&quot;: &quot;~2.1.1&quot;,</code></p>
<p><code>&quot;karma-cli&quot;: &quot;~1.0.1&quot;,</code></p>
<p><code>&quot;karma-coverage-istanbul-reporter&quot;: &quot;^1.2.1&quot;,</code></p>
<p><code>&quot;karma-jasmine&quot;: &quot;~1.1.0&quot;,</code></p>
<p><code>&quot;karma-jasmine-html-reporter&quot;: &quot;^0.2.2&quot;,</code></p>
<p><code>&quot;protractor&quot;: &quot;~5.1.2&quot;,</code></p>
<p><code>&quot;ts-node&quot;: &quot;~3.2.0&quot;,</code></p>
<p>I also use tslint quite extensively in my projects, so I also add in the following:</p>
<p><code>&quot;codelyzer&quot;: &quot;~3.2.0&quot;,</code></p>
<p><code>&quot;tslint&quot;: &quot;~5.7.0&quot;,</code></p>
<p><code>&quot;tslint-immutable&quot;: &quot;^4.4.0&quot;,</code></p>
<h2 id="angular-cli-json"><a href="#angular-cli-json" class="headerlink" title=".angular-cli.json"></a>.angular-cli.json</h2><p>The main file that makes the Angular CLI recognize the project as an Angular CLI project is the <code>.angular-cli.json</code> file.  The easiest thing to do is to take an existing file from another project and copy it into your Ionic project.  This file belongs in the root of your project. Once you’ve done that, there is one small change you need to make.  The <code>main.ts</code> file that is the entry point of the application lives under the <code>app</code> directory in an Ionic project rather than directly under <code>src</code> like it does with an Angular CLI project.  It would be tempting to change the location of the file, but the Ionic build process is looking for it under the <code>app</code> directory.  An easier fix is to change the location in our <code>.angular-cli.json</code> file so that our tests can find it.  It is the only place that needs to know of the new location. Change .angular-cli.json so main points to the right location:</p>
<p><code>{</code></p>
<p><code>&quot;$schema&quot;: &quot;./node_modules/@angular/cli/lib/config/schema.json&quot;,</code></p>
<p><code>&quot;project&quot;: {</code></p>
<p><code>&quot;name&quot;: &quot;ionic-with-angular-cli&quot;</code></p>
<p><code>},</code></p>
<p><code>&quot;apps&quot;: [</code></p>
<p><code>{</code></p>
<p><code>&quot;root&quot;: &quot;src&quot;,</code></p>
<p><code>&quot;outDir&quot;: &quot;dist&quot;,</code></p>
<p><code>&quot;assets&quot;: [</code></p>
<p><code>&quot;assets&quot;,</code></p>
<p><code>&quot;favicon.ico&quot;</code></p>
<p><code>],</code></p>
<p><code>&quot;index&quot;: &quot;index.html&quot;,</code></p>
<p><code>**&quot;main&quot;: &quot;app/main.ts&quot;,**</code></p>
<p><code>&quot;polyfills&quot;: &quot;polyfills.ts&quot;,</code></p>
<p><code>&quot;test&quot;: &quot;test.ts&quot;,</code> <code>...</code></p>
<p><code>}</code></p>
<h2 id="karma-conf-js"><a href="#karma-conf-js" class="headerlink" title="karma.conf.js"></a>karma.conf.js</h2><p>To run your tests, you’ll need a <code>karma.conf.js</code> file in your root directory.  Again, the easiest thing to do is to copy this file over from a project you created with the Angular CLI.</p>
<h2 id="tsconfig-json"><a href="#tsconfig-json" class="headerlink" title="tsconfig.json"></a>tsconfig.json</h2><p>You should already have a <code>tsconfig.json</code> file in your project root directory.  If you open it, you’ll see it has an exclude section that is excluding <code>node_modules</code>.  You’ll need to tell it to exclude <code>test.ts</code> and <code>*.spec.ts</code> files so it doesn’t pick up the test files during a normal compile cycle.</p>
<p><code>&quot;exclude&quot;: [</code></p>
<p><code>&quot;node_modules&quot;,</code></p>
<p><code>&quot;test.ts&quot;,</code></p>
<p><code>&quot;**/*.spec.ts&quot;</code></p>
<p><code>],</code></p>
<h2 id="polyfills-ts"><a href="#polyfills-ts" class="headerlink" title="polyfills.ts"></a>polyfills.ts</h2><p>The tests use the <code>polyfills.ts</code> file, so you’ll need to add one that was originally created using the Angular CLI.  This belongs in your <code>src</code> directory.</p>
<h2 id="test-ts"><a href="#test-ts" class="headerlink" title="test.ts"></a>test.ts</h2><p>Copy a <code>test.ts</code> file into your <code>src</code> directory from a project that you created with the <code>Angular CLI</code>.  If you don’t put this file in, you won’t be able to run any tests.</p>
<h2 id="tsconfig-spec-json"><a href="#tsconfig-spec-json" class="headerlink" title="tsconfig.spec.json"></a>tsconfig.spec.json</h2><p>The tests use <code>tsconfig.spec.json</code> located in the <code>src</code> directory.  The problem is, a standard <code>tsconfig.spec.json</code> file inherits from the <code>tsconfig.json</code> file we just modified above which doesn’t look at all like the <code>tsconfig.json</code> file in an Angular CLI project.  I found the easiest thing to do was to create a new copy of <code>tsconfig.spec.json</code> that is a merge of the two files in an Angular CLI project.  This worked at the time of this writing, if you run into trouble, you may need to merge the two files you started with on your own.  My result looks like this:</p>
<p><code>{</code></p>
<p><code>&quot;compileOnSave&quot;: false,</code></p>
<p><code>&quot;compilerOptions&quot;: {</code></p>
<p><code>&quot;outDir&quot;: &quot;../out-tsc/spec&quot;,</code></p>
<p><code>&quot;sourceMap&quot;: true,</code></p>
<p><code>&quot;declaration&quot;: false,</code></p>
<p><code>&quot;moduleResolution&quot;: &quot;node&quot;,</code></p>
<p><code>&quot;emitDecoratorMetadata&quot;: true,</code></p>
<p><code>&quot;experimentalDecorators&quot;: true,</code></p>
<p><code>&quot;target&quot;: &quot;es5&quot;,</code></p>
<p><code>&quot;typeRoots&quot;: [</code></p>
<p><code>&quot;node_modules/@types&quot;</code></p>
<p><code>],</code></p>
<p><code>&quot;lib&quot;: [</code></p>
<p><code>&quot;es2017&quot;,</code></p>
<p><code>&quot;dom&quot;</code></p>
<p><code>],</code></p>
<p><code>&quot;baseUrl&quot;: &quot;./&quot;,</code></p>
<p><code>&quot;module&quot;: &quot;commonjs&quot;,</code></p>
<p><code>&quot;types&quot;: [</code></p>
<p><code>&quot;jasmine&quot;,</code></p>
<p><code>&quot;node&quot;</code></p>
<p><code>]</code></p>
<p><code>},</code></p>
<p><code>&quot;files&quot;: [</code></p>
<p><code>&quot;test.ts&quot;</code></p>
<p><code>],</code></p>
<p><code>&quot;include&quot;: [</code></p>
<p><code>&quot;**/*.spec.ts&quot;,</code></p>
<p><code>&quot;**/*.d.ts&quot;</code></p>
<p><code>]</code></p>
<p><code>}</code></p>
<h2 id="typings-d-ts"><a href="#typings-d-ts" class="headerlink" title="typings.d.ts"></a>typings.d.ts</h2><p>I’m not sure this file was needed, but it was another file I found in an Angular CLI project that wasn’t in my Ionic CLI project, so I added it.  It goes in your <code>src</code> directory and is just a copy of the file that is in your Angular CLI project.</p>
<h2 id="pages"><a href="#pages" class="headerlink" title="pages"></a>pages</h2><p>You’ll notice that your <code>pages</code> directory is at the same level as your <code>src</code> directory which doesn’t comply with the Angular CLI.  I moved mine so that it is under the <code>src</code> directory just to keep things consistent.  You’ll need to fix up imports once you move it of course.</p>
<h2 id="Regenerate-Pages"><a href="#Regenerate-Pages" class="headerlink" title="Regenerate Pages"></a>Regenerate Pages</h2><p>Because the pages that got generated don’t conform to the style guide and don’t have any tests, I just regenerated mine and copied the relevant code into the newly generated files.</p>
<h2 id="Tests"><a href="#Tests" class="headerlink" title="Tests"></a>Tests</h2><p>At this point, you should have a project that looks a lot more like an Angular CLI project.  You’ll still use the Ionic command to do your regular build and development cycle and the ng commands for testing and generating new files.  Running tests works the same as you should already be used to from using Angular.  The one thing you will notice is that you’ll see a warning in your test: <code>Critical dependency: the request of a dependency is an expression</code> This is a known “error” that neither the Angular CLI group or the Ionic group seem interested in addressing. At this point, I haven’t tried any E2E tests using this setup so I don’t know if there are any additional tweaks that need to be made. You can find the code for this at this branch of a project I’m working on. <a href="//github.com/DaveMBush/ionic-crud/tree/Add-Angular-CLI">https://github.com/DaveMBush/ionic-crud/tree/Add-Angular-CLI</a></p>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://davembush.github.com/davembush/angular-ionic-and-angular-cli/" data-id="cjiweemst002evwhicxv8rta9" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/davembush/tags/angular/">angular</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/davembush/tags/angular-cli/">angular-cli</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/davembush/tags/ionic/">ionic</a></li></ul>


    </footer>
  </div>
  
</article>



  
    <article id="post-angular-ionic-putty-ssh-authorized-keys-format" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/davembush/angular-ionic-putty-ssh-and-authorized-keys-format/">Angular IONIC, Putty SSH, and authorized_keys Format</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/davembush/angular-ionic-putty-ssh-and-authorized-keys-format/" class="article-date"><time datetime="2017-11-07T16:29:21.000Z" itemprop="datePublished">2017-11-07</time></a>
</div>

    
    
  <div class="article-category">
    <a class="article-category-link" href="/davembush/categories/IONIC/">IONIC</a>
  </div>


  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>I started playing with IONIC last week.  Since I do all my development on a Windows computer, this has already lead to a particular Windows based challenge that I was able to track down and deduce the solution for.  But I was unable to find a solution that specifically addressed using IONIC, putty SSH, and authorized_keys Format, which is what someone is likely to search for when they see this issue. [caption id=”attachment_4495” align=”aligncenter” width=”800”]<img src="//blog.dmbcllc.com/wp-content/uploads/2017/10/2017-11-07.jpg" alt="Angular IONIC, Putty SSH, and authorized_keys" title="Angular IONIC, Putty SSH, and authorized_keys"> Photo via <a href="//visualhunt.com/re/64a968">VisualHunt</a>[/caption] </p>
<h2 id="Connect-to-the-dashboard"><a href="#Connect-to-the-dashboard" class="headerlink" title="Connect to the dashboard?"></a>Connect to the dashboard?</h2><p>When you setup an IONIC project, everything goes pretty much as planned until you get to the question “Do you want to connect to the dashboard?”  I’m going to assume you’ve answered that question in the affirmative and that you’ve already created an IONIC account and successfully logged in or you wouldn’t be here. The next thing that is likely to happen is that you’ll try to have it generate an SSH key for you.  But, since you don’t have OpenSSL installed, it failed.  The next thing you probably did was to search for the Windows install of OpenSSL only to find that it hasn’t been maintained in quite a while and that the recommended way of creating a public/private key pair is to use Putty.  Which you did. So, what brought you here is that you have a public key in a file that you are trying to upload to IONIC.  The error you are continuing to see is “<em>filename</em> does not appear to be a valid SSH public key. (Not in authorized_keys file format.)</p>
<h2 id="No-Public-Key"><a href="#No-Public-Key" class="headerlink" title="No Public Key?"></a>No Public Key?</h2><p>OK.  Maybe you got to this site and you don’t have a public/private key pair yet.  You don’t even know what putty is.  You can find some good instructions about installing and <a href="//www.chiark.greenend.org.uk/~sgtatham/putty/docs.html">using putty here</a>. You will be most interested in the section on using PuttyGen to create a public/private key pair (you want to use RSA, the default).</p>
<h2 id="Putty-to-authorized-keys"><a href="#Putty-to-authorized-keys" class="headerlink" title="Putty to authorized_keys"></a>Putty to authorized_keys</h2><p>And the question you have now is, “How do I convert my putty SSH public key into “authorized_keys format?”  Whatever that is. Well you are in luck because, I can tell you exactly what you need to do. First, open that public key text file you have in a text editor.  You’ll see it is in the format of: <code>---- BEGIN SSH2 PUBLIC KEY ----</code> <code>Comment: &quot;rsa-key-20171026&quot;</code> <code>AAAAB3NzaC1yc2EAAAABJQAAAQEAicxYxlgFjQDMtkuuCY3GsnkdWEy38NSgi7N8</code> <code>/SBj1ohas2GU/0bY2H6Inpg6lQ6oYmvaIy5rQZ8+pcOPQNLNo0EyWbWhmBfWI+b5</code> <code>XHg5F6eIhaTjKVViJG3tDe3V4boMvgE18Rzof8ZJSa7cH0kqL32SPqnQdgtpDNc5</code> <code>qjBHN+mQ5fMcxMM4YaViGtq8j6M7obt7oJrnVQWdPWQQYuo6TSm4LCjQ4/q77vqF</code> <code>L59IFFd6nUnEltpkrh8RXKu6By1+G4eN66AdpZ/h9Z41qwN/oJ2kOf0qqT1t6Wa6</code> <code>8RcgWxSIgMzE16imwB84o8p9DQtnEb7BVK0UXzt+Wp2ToC3arw==</code> <code>---- END SSH2 PUBLIC KEY ----</code> The first thing you want to do is to delete the first two lines and the last line.  Once that is done, remove the line feeds so that the remaining RSA key is all on one line. <code>AAAAB3NzaC1yc2EA...t+Wp2ToC3arw==</code> Now, prefix the line with “ssh-rsa “.  Make sure there is a space after “ssh-rsa” and before the body of the key. <code>ssh-rsa AAAAB3NzaC1yc2EA...t+Wp2ToC3arw==</code> Officially, this puts the key in “authorized_keys file format” but to get IONIC to accept it, you also need to put the email you used when you signed up for IONIC dashboard at the end of the key.  So, after the double equals that indicates the end of the key, add a space, and then your email address. Save the file.  Unless you like living dangerously, you should save it to another file.  Now upload the file to ionic using: <code>ionic ssh add</code> This command will prompt you for the file name, as before, but this time you’ll give it the file you just saved, and it should work.  The only reason I can think of why it might not is if you deleted too many characters when you were removing the line feeds.</p>
<h2 id="IONIC-Private-Key"><a href="#IONIC-Private-Key" class="headerlink" title="IONIC Private Key"></a>IONIC Private Key</h2><p>For some reason, IONIC only understands OpenSSL for both sides.  I wasted nearly a day trying to get PAgent working.  Don’t waste your time. Back in PuttyGen, there is a Conversions menu option.  Under that, what you want to select is the option “Export OpenSSH Key…”  Give it a filename etc. Now, back in the terminal window for your IONIC project, finish the setup as they’ve directed on their site, but just before you run “git push ionic master” run <code>ionic ssh use path_to_the_filename_you_just_exported.</code> Once you’ve done this, go to <code>c:\users\[username]\.ssh</code> and look for a file named “<code>config</code>“.  Open the file in an editor that understands files with no carriage returns and make sure the line that starts with “IdentityFile” has quotes around the path to the file if the path has a space in it.  On my computer it doesn’t, but I’ve seen reports from others that this has caused them hours of trouble. With all of that configured, now you can run <code>git push ionic master</code> If your private key has a password, it will prompt for the password and you are off to the races. Hope this helps someone!</p>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://davembush.github.com/davembush/angular-ionic-putty-ssh-and-authorized-keys-format/" data-id="cjiweemsr002cvwhi6xarsxgj" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/davembush/tags/angular-2/">angular 2</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/davembush/tags/ionic/">ionic</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/davembush/tags/putty/">putty</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/davembush/tags/ssh/">ssh</a></li></ul>


    </footer>
  </div>
  
</article>



  
    <article id="post-learned-using-angular-material" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/davembush/what-i-learned-using-angular-material/">What I Learned Using Angular Material</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/davembush/what-i-learned-using-angular-material/" class="article-date"><time datetime="2017-10-31T10:30:06.000Z" itemprop="datePublished">2017-10-31</time></a>
</div>

    
    
  <div class="article-category">
    <a class="article-category-link" href="/davembush/categories/Angular-2/">Angular 2</a>
  </div>


  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>This past week I took Angular Material for a spin.  In the process, I learned a few things you might find helpful.  Some may be helpful even if you aren’t interested in using Angular Material for your projects. [caption id=”attachment_4490” align=”aligncenter” width=”800”]<img src="//blog.dmbcllc.com/wp-content/uploads/2017/10/2017-10-31.png" alt="What I Learned Using Angular Material" title="What I Learned Using Angular Material"> Photo credit: <a href="//www.flickr.com/photos/30478819@N08/36098571263/">wuestenigel</a> via <a href="//visualhunt.com/re/3c147a">VisualHunt.com</a> / <a href="//creativecommons.org/licenses/by/2.0/"> CC BY</a>[/caption] </p>
<h2 id="Choose-Wisely"><a href="#Choose-Wisely" class="headerlink" title="Choose Wisely"></a>Choose Wisely</h2><p>Up until recently, I’ve been reluctant to try Angular Material for two basic reasons.  First, it didn’t seem quite ready for prime time.  I found out that it now has all of the components I would need for most of the applications I would want to develop.  Second, using Angular Material is a commitment.  Instead of writing primarily HTML, you write primarily angular material tags.  I thought this was a problem.  That I wouldn’t have the flexibility to switch between Angular Material and some other CSS framework.  But, as it turns out.  Angular Material doesn’t really lock me in any more than any other CSS framework or component library.  Which leads to the first lesson learned.  Choose your CSS frameworks and component library wisely.  If you decide to make a change mid-course, it is likely to suck up a lot of time from your project.  I would recommend doing some proof of concepts prior to committing to any component library or CSS framework.</p>
<h2 id="Less-Filling"><a href="#Less-Filling" class="headerlink" title="Less Filling"></a>Less Filling</h2><p>Because Angular Material is both a CSS framework and a component library, it turns out that writing templates using Angular Material is significantly terser than say, Bootstrap.  I don’t mean to imply that it produces less HTML.  Just that writing the templates tends to be a bit cleaner overall.</p>
<h2 id="import"><a href="#import" class="headerlink" title="@import"></a>@import</h2><p>I’ve written before about <a href="//blog.dmbcllc.com/adding-css-and-javascript-to-an-angular-2-cli-project/">how to include CSS in your Angular project</a>, but I’ve learned a new trick while implementing Angular Material. This might be a relative new thing with the Angular CLI, but apparently, you can @import local and external CSS in your styles.css file.  When I evaluated the code that gets built, I found that the build process knows to keep the external code external yet bundles the internal code with the project.  This is something you could use regardless of what CSS framework or component library you are using.</p>
<h2 id="Layout"><a href="#Layout" class="headerlink" title="Layout"></a>Layout</h2><p>As I suspected, a lot of layout expects you to use Flex CSS.  Since I already had decided to use Flex-Layout to manage my layout with Bootstrap, this was not a big surprise.  The Flex-Layout project started its life as part of the Angular JS Material project and split out as a separate project when both moved to support Angular.  At times, figuring out where to use what directive may require you to use Developer Tools.  But I didn’t find this to be any more of a deterrent than using CSS in any other platform.  Just keep in mind that some of the Flex CSS is already defined in the Material components.</p>
<h2 id="Creating-Components-from-Injectables"><a href="#Creating-Components-from-Injectables" class="headerlink" title="Creating Components from @Injectables"></a>Creating Components from @Injectables</h2><p>While creating my demo project, there were two places where I needed to create “snack bars” or dialogs.  In Angular Material, the way you accomplish this is by calling a method on an @Injectable.  aka, a Service.  This is interesting to me and I’m going to have to dig deeper to find out exactly how this works.</p>
<h2 id="Testing"><a href="#Testing" class="headerlink" title="Testing"></a>Testing</h2><p>The first time you write unit tests, you’ll get a warning that says, “Could not find Angular Material core theme…”.  To remove this error, you’ll need to open karma.conf.js and add a “files:” section right under the “plugins:” section.</p>
<p><code>files: [</code></p>
<p><code>{ pattern: &#39;./node_modules/@angular/material/prebuilt-themes/indigo-pink.css&#39;, included: true, watched: true }</code></p>
<p><code>],</code></p>
<p>You can add whatever pre-built theme you’d like.  I’ve added indigo-pink here.</p>
<h2 id="Common-declare-import-export"><a href="#Common-declare-import-export" class="headerlink" title="Common declare/import/export"></a>Common declare/import/export</h2><p>Strictly speaking, this isn’t Angular Material specific.  But it was because of Angular Material that I discovered this trick.  Again, because it isn’t Angular Material specific, you can use this in any of your Angular code that it makes sense. Angular Material requires you to import each of the component modules individually.  This allows tree shaking to be more effective.  Rather than put this code in <code>app.module.ts</code>, I created a <code>material-design.module.ts</code> file and imported it into my <code>app.module.ts</code>. Now, if you are familiar with how imports work, you’ll already know that the components that are part of a module you import are only available to the parent module’s components or below.  But we want the component to be available to any module that imports <code>material-design.module.ts</code>.  To do that, we need to export the same list of modules we imported. That sounded like too much repeating myself.  In an effort to make my code DRYer, I created a read only array with all my Material modules in it and then used the spread operator to include those in my imports and exports statement.</p>
<p><code>const materialDesignComponents: ReadonlyArray&lt;Type&lt;any&gt;&gt; = [</code></p>
<p><code>MatSidenavModule,</code></p>
<p><code>MatToolbarModule,</code></p>
<p><code>MatListModule,</code></p>
<p><code>...</code> ];</p>
<p><code>@NgModule({</code></p>
<p><code>imports: [</code></p>
<p><code>CommonModule,</code></p>
<p><code>...materialDesignComponents</code></p>
<p><code>],</code></p>
<p><code>exports: [</code></p>
<p><code>...materialDesignComponents</code></p>
<p><code>],</code></p>
<p><code>declarations: []</code></p>
<p><code>})</code></p>
<p><code>export class MaterialDesignModule { }</code></p>
<p>This saved me a lot of time, not just in typing, but in tracking down bugs because I simply forgot to include the modules in both places.</p>
<h2 id="Sample-Project"><a href="#Sample-Project" class="headerlink" title="Sample Project"></a>Sample Project</h2><p>If you are interested, you can find <a href="//github.com/DaveMBush/angular-material-demo">my sample project on GitHub</a>.</p>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://davembush.github.com/davembush/what-i-learned-using-angular-material/" data-id="cjiween4s00ftvwhi2v4n56fo" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/davembush/tags/angular-2/">angular 2</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/davembush/tags/angular-material/">angular material</a></li></ul>


    </footer>
  </div>
  
</article>



  
    <article id="post-implementing-ngrx-4" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/davembush/implementing-ngrx-4/">Implementing NgRX 4</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/davembush/implementing-ngrx-4/" class="article-date"><time datetime="2017-10-24T10:30:46.000Z" itemprop="datePublished">2017-10-24</time></a>
</div>

    
    
  <div class="article-category">
    <a class="article-category-link" href="/davembush/categories/Angular-2/">Angular 2</a>
  </div>


  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>There seems to be a lot of confusion about Implement NgRX 4 in an Angular application.  Some of it I’ve contributed to because NgRX 2 isn’t quite the same as NgRX 4 and as I’ve transitioned, I’ve learned better ways.  In other words, I was wrong and I’m correcting my mistake!  Below is the correct, NgRX approved way, of implementing NgRX 4. If you are looking for information about how to convert to NgRX 4 from NgRX 2, you can visit my previous article, <a href="//blog.dmbcllc.com/upgrade-ngrx-4-x/">How to Upgrade to NgRX 4</a>. Before we get started, make sure you have TypeScript 2.4.x or above installed in your local project.  The CLI may complain, depending on what version of it you are using.  But, NgRX 4 requires us to use TypeScript 2.4.x.  You should also have RxJS 5.4.x or above installed. You will also need to install @ngrx.  You can do this using the following NPM command: <code>npm install --save @ngrx/store @ngrx/effects</code> And finally, I’ve found that I need to use the –aot switch both when I’m using production and development builds, so you’ll want to add that to your scripts in your <code>package.json</code> file. [caption id=”attachment_4477” align=”aligncenter” width=”800”]<img src="//blog.dmbcllc.com/wp-content/uploads/2017/10/2017-10-24.jpg" alt="Implementing NgRX 4" title="Implementing NgRX 4"> Photo credit: <a href="//www.flickr.com/photos/cfaobam/12119410373/">cfaobam</a> via <a href="//visualhunt.com/re/300eff">VisualHunt.com</a> / <a href="//creativecommons.org/licenses/by/2.0/"> CC BY</a>[/caption] </p>
<h3 id="Actions"><a href="#Actions" class="headerlink" title="Actions"></a>Actions</h3><p>An Action is an object that contains a type variable and optionally, a payload.  Depending on how you code your action, the payload may or may not have “payload” as the variable name.  In NgRX version 2, payload was an optional variable.  To improve type checking, payload was removed from the Action interface. The official documentation for NgRX version 4 encourages us to create a class for each action we want to dispatch. Assuming we have a Wait component we want to display when a counter is incremented and that should be removed when the counter returns to zero, you might want a Start wait action and an End wait action.  So, you would create a wait.action.ts file that has two classes in it.  A Start action and an End action. import {Action} from ‘@ngrx/store’; export const START = ‘Wait.Start’; export class Start implements Action { readonly type = START; } export const END = ‘Wait.End’; export class End implements Action { readonly type = END; } While this violates the “one class per file” rule, it actually provides us the ability to group our Actions together in one file, as you will see soon. To use these actions in our code, we would import them as a bundle: <code>import * as Wait from &#39;./wait.actions&#39;;</code> This particular way of importing a packages groups all of the exported items under the variable named Wait.  Which allows us to dispatch the action using the store we’ve injected into our code using: <code>this.store.dispatch(new Wait.Start());</code> Start is an exported class from <code>wait.actions</code> that we’ve grouped under <code>Wait</code>. What makes this method of creating actions useful is that when we need to pass additional data along with our action, we can do that simply by adding parameters to our constructor. <code>export const ADD = &#39;Wait.Add&#39;;</code> <code>export class Add implements Action {</code> <code>readonly type = ADD;</code> <code>constructor(public payload: number){}</code> <code>}</code> We don’t even have to call the payload, “payload.”  How about calling it “value.” <code>export const ADD = &#39;Wait.Add&#39;;</code> <code>export class Add implements Action {</code> <code>readonly type = ADD;</code> <code>constructor(public value: number){}</code> <code>}</code> And if you need more than one payload item, you can pass in multiple parameters.</p>
<h3 id="Reducers"><a href="#Reducers" class="headerlink" title="Reducers"></a>Reducers</h3><p>Reducers are functions that allow us to change the state of our entity within our application Store.  Reducers respond to the actions that have been dispatched and return a new object based on the changes requested. To continue on with our Wait example, <code>wait.reducer.ts</code> might look like this: <code>import {ActionReducer} from &#39;@ngrx/store&#39;;</code> <code>import * as Wait from &#39;./wait.actions&#39;;</code> <code>// This could go in wait.actions.ts</code> <code>export type Action =</code> <code>Wait.Add | Wait.End | Wait.Start;</code> <code>export function waitReducer(</code> <code>state = 0, action: Action): number {</code> <code>switch(action.type) {</code> <code>case Wait.START:</code> <code>return state + 1;</code> <code>case Wait.END:</code> <code>return state - 1;</code> <code>case Wait.ADD:</code> <code>return state + action.payload;</code> <code>default:</code> <code>return state;</code> <code>}</code> <code>};</code> <code>export const WaitReducer:</code> <code>ActionReducer&lt;number&gt; = waitReducer;</code> The reason we write the <code>waitReducer</code> function and then assign it to the <code>WaitReducer</code> constant rather than putting the code all in one line is because the compiler will complain about our code otherwise. Notice that we have a ‘default’ in our switch statement.  Don’t forget to add this.  It isn’t an accident.  You see, when we register our Reducers and Effects with the store and then subsequently dispatch actions to them, all the reducers and effects get called.  In the case of reducers, if you don’t return something for each one of them, you’ll end up with a store that doesn’t know what kind of state it is in.  So, always return the current state as your default. The one thing that may not be obvious here is that the Reducer is a function.  Not a class.  This means you can’t inject other classes into it.  This is one of the reasons that the file is named <code>wait.reducer.ts</code> and not <code>wait.reducer**s**.ts</code>. But, Effects are different.</p>
<h3 id="Effects"><a href="#Effects" class="headerlink" title="Effects"></a>Effects</h3><p>Effects are classes.  Each Effect within the Effects class is a member variable.  So, we name our Effects file for Wait, <code>wait.effects.ts</code>. Now, remember I said that Effects were for things that caused side effects?  You may wonder, why kind of side effect does our Wait stuff need? Under normal circumstances, not any.  However, you can get into a situation in development mode where one of the safe guards Angular provides for you detects that you’ve changed the state of wait multiple times in a change detection loop.  Angular expects changes to be static. One way we can deal with this is to delay incrementing and decrementing to another change detection loop using setTimeout() indirectly. To do this, we are going to rip out the START and END case statements from our Reducer and add them into our Effects class. And then in <code>wait.effects.ts</code> <code>import { Observable } from &#39;rxjs/Rx&#39;;</code> <code>import { Injectable } from &#39;@angular/core&#39;;</code> <code>import { Actions, Effect } from`</code>‘@ngrx/effects’;<code></code>import * as Wait from ‘./wait.actions’;<code></code>@Injectable()<code></code>export class WaitEffects {<code></code>    @Effect()<code></code>    start$: Observable&lt;Wait.Add&gt; =<code></code>           this.actions$<code></code>        .ofType(Wait.START)<code></code>        .switchMap(() =&gt;<code></code>            Observable.timer(1).take(1)<code></code>        )<code></code>.map((): Wait.Add =&gt;<code></code>           (new Wait.Add(1)));<code></code>    @Effect()<code></code>    end$: Observable&lt;Wait.Add&gt; =<code></code>            this.actions$<code></code>        .ofType(Wait.END)<code></code>        .switchMap((action: Wait.End) =&gt;<code></code>            Observable.timer(1).take(1)<code></code>        )<code></code>.map((): Wait.Add =&gt;<code></code>          (new Wait.Add(-1)));<code></code>    constructor(private actions$: Actions){<code></code>    }<code></code>}<code>You can name the member variables whatever you want.  They never get used.</code>ofType()<code>is a filter that makes the observable stuff only fire for that particular type. The magic happens in the</code>Observable.timer(1).take(1)<code>.  Here we wait for one millisecond, take the first item out of the stream and immediately close the observable.  Once that completes, the</code>map()<code>returns a new action. Every Effect must return an action or you must tell the Effect that it won’t return an action.  Notice that we don’t dispatch the action.  That is done by NgRX for us.  We just return the action. To tell an Effect that no action will be returned, pass</code>{dispatch: false}<code>into</code>@Effect()<code>.</code>@Effect({dispatch: false}) …`</p>
<h3 id="Returning-Multiple-Actions-from-Effects"><a href="#Returning-Multiple-Actions-from-Effects" class="headerlink" title="Returning Multiple Actions from Effects"></a>Returning Multiple Actions from Effects</h3><p>At the other end of possibilities, you may need to return multiple Actions from an Effect.  One way to do this is by using mergeMap(). <code>.mergeMap((/* previous value here */) =&gt;</code> <code>{</code> <code>return [</code> <code>new ActionGroup.Action1(),</code> <code>new ActionGroup.Action2()</code> <code>];</code> <code>})</code></p>
<h3 id="Registration"><a href="#Registration" class="headerlink" title="Registration"></a>Registration</h3><p>Now, none of this is going to work if we don’t register our Reducers and Effects with the NgRX Store. If you look at a lot of the literature on how to write NgRX code, you’ll often see that they recommend that you put the code in AppModule.  That will work, but how much more effective to put the code for your Store in its own module.  So, I create a Module class called AppStores and put it in a file named <code>app.stores.ts</code>.  I know, technically it is a module and it should be <code>app-stores.module.ts</code>.  Using <code>app.stores.ts</code> isolates it from a normal module.  All I want to put in here is Store stuff. So, in my <code>app.stores.ts</code> file, I put code that looks like this: <code>import { WaitEffects }`</code>from ‘./wait.effects’;<code></code>import { AppState } from ‘./app.state’;<code></code>import { WaitReducer }<code>from &#39;./wait.reducer&#39;;` `import { NgModule } from &#39;@angular/core&#39;;` `import { StoreModule, ActionReducerMap }</code>from ‘@ngrx/store’;<code></code>import { EffectsModule }<code>from &#39;@ngrx/effects&#39;;` `const reducers: ActionReducerMap&lt;AppState&gt;</code>= {<code></code>    wait: WaitReducer<code></code>}<code></code>@NgModule({<code></code>    imports: [<code></code>      StoreModule.forRoot(reducers),<code></code>      EffectsModule.forRoot([WaitEffects])<code></code>    ]<code></code>  })<code></code>export class AppStore { }<code>And the AppState interface that I used for my reducer map looks like this:</code>export interface AppState {<code></code>    wait: number<code></code>}<code>A couple of things you should notice about this code.  First, the reducers object we create at the top of the file describes what our store looks like.  So far, we have an entity named “wait” that is controlled by our WaitReducer. Then to register the reducers with our application, we pass them on to</code>StoreModule.forRoot()<code>in the imports section of our module definition. Similarly, we must register our Effects with the application.  We do this by passing an array of Effects to</code>EffectsModule.forRoot()<code>in the imports section of our module definition. Of course, none of this code will even get included in your project unless you import this module into your AppModule class.</code>@NgModule({<code></code>  declarations: [<code></code>    AppComponent<code></code>  ],<code></code>  imports: [<code></code>    BrowserModule,<code></code>    <strong>AppStore</strong><code></code>  ],<code></code>  providers: [],<code></code>  bootstrap: [AppComponent]<code></code>})<code></code>export class AppModule { }`</p>
<h2 id="Retrieving-Data"><a href="#Retrieving-Data" class="headerlink" title="Retrieving Data"></a>Retrieving Data</h2><p>Retrieving an entity from a store is quite simple.  Leaving out the imports that a good editor should help you with, here is the relevant code: <code>export class AppComponent {</code> <code>wait: Observable&lt;number&gt;;</code> <code>constructor(store: Store&lt;AppState&gt;) {</code> <code>this.wait = store.select((s: AppState)`</code>=&gt; s.wait);<code></code>  }<code></code>}` And now you can subscribe to wait and whenever the value changes, you’ll get a notification and can do something with it.</p>
<h2 id="Lazy-Loading-NgRX"><a href="#Lazy-Loading-NgRX" class="headerlink" title="Lazy-Loading NgRX"></a>Lazy-Loading NgRX</h2><p>Prior to NgRX version 4, all our state stuff had to live in the root of the application.  This was problematic because it also meant we were unable to easily locate our Actions, Reducers and Effects with the Routes they belonged to.  So, we had feature level components but everything else was more function based.  That is, all our State stuff lived together in one directory separate from the feature they supported.  Ugly! But now, we can create Reducers and Effects that live with the feature we support.</p>
<h3 id="Always-Import-forRoot"><a href="#Always-Import-forRoot" class="headerlink" title="Always Import forRoot()"></a>Always Import forRoot()</h3><p>The first thing you’ll need to be aware of is that even if you aren’t storing any state at the application level, you will need to call <code>StoreModule.forRoot()</code> and <code>EffectsModule.forRoot()</code> with an empty object and array. <code>imports: [</code> <code>StoreModule.forRoot({}),</code> <code>EffectsModule.forRoot([])</code> <code>]</code></p>
<h3 id="AppState-vs-FeatureState"><a href="#AppState-vs-FeatureState" class="headerlink" title="AppState vs FeatureState"></a>AppState vs FeatureState</h3><p>You’ll remember that you’ll typically use an interface called AppState to define the structure of the Store for your application.  You are going to want to create a separate interface for each set of feature reducers you are loading.</p>
<h3 id="Feature-Name-as-AppState-Property"><a href="#Feature-Name-as-AppState-Property" class="headerlink" title="Feature Name as AppState Property"></a>Feature Name as AppState Property</h3><p>When you add a feature reducer, you’ll need to supply a name as the first parameter. <code>imports: [</code> <code>StoreModule.forFeature(&#39;featureName&#39;,</code> <code>featureReducers),</code> <code>...</code> <code>]</code> Where <code>featureReducers</code> is the map of reducers for the feature.  Like what we did for the root level reducers. This “featureName” becomes the name of the store entity you’ll need to select to get at the store entities in your feature reducers. Imagine you have a feature named “featureName” as we’ve coded above and your <code>featureReducer</code> object has a feature property named “sub”.  Not super original, but it will do for an example. To select “sub” from your store, you would use code that would look something like this: <code>store.select(s =&gt;`</code>s.featureName.sub);<code>This means that if you want to strongly type your selections using AppState, you will need to define a field in your AppState interface as “featureName” that is typed as the State interface for that feature.  Let’s call that FeatureState.</code>export interface FeatureState {<code></code>    sub: SubModel;<code></code>}<code>And then our AppState would look like this:</code>export interface AppState {<code></code>    featureName: FeatureState<code></code>}<code>And now we can write our select code like this:</code>store.select((x: AppState) =&gt; x.featureName.sub);<code>If you have Effects that go with your reducers, you&#39;ll also need to import them with</code>imports: [<code></code>  EffectsModule.forFeature([<code></code>    …list of effects here<code></code>  ])<code></code>]`</p>
<h3 id="Features-Without-AppState"><a href="#Features-Without-AppState" class="headerlink" title="Features Without AppState"></a>Features Without AppState</h3><p>As Yngve Bakken-Nilsen points out in his comments below, it is possible to access the feature state without putting it in your AppState.  And as I mention in my response, I’m not a big fan of this method generally because you lose a bit of type safety in the process.  But, there are times when you may have feature code that can’t know about the AppState.  For example, you may have code that lives in a library that needs to access the state slice.  Since it doesn’t know about the AppState of the application, this alternate method may be the only way you can access the code. To implement the access method, you use the <code>createFeatureSelector()</code>and createSelector() methods which you can import from @ngrx/store. The above code using these methods would look something like this: <code>const featureSelector = createFeatureSelector&lt;FeatureState&gt;(&#39;featureName&#39;); const subSelector = createSelector(featureSelector, (x: FeatureState) =&gt; x.sub)); store.select(subSelector);</code> Where store is injected using <code>constructor(store: Store&lt;FeatureState&gt;){}</code> Note: I’m not suggesting that you write your code like this.  If you are repeating the <code>createFeatureSelector()</code> <code>createSelector()</code> code in multiple places, you should look for a way of not repeating yourself.  I’ve put it all in one place here, so you can see how they methods tie together in the bigger picture.</p>
<h2 id="Get-Started-with-Angular-–-The-Book"><a href="#Get-Started-with-Angular-–-The-Book" class="headerlink" title="Get Started with Angular – The Book"></a>Get Started with Angular – The Book</h2><p>This article is adapted from my new book “<a href="/get-started-with-angular">Get Started With Angular</a>.”  It goes into a lot more detail about NgRX and has an exercise where you build a basic CRUD application that makes full use of NgRX.  Get it on Amazon.</p>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://davembush.github.com/davembush/implementing-ngrx-4/" data-id="cjiween1100bpvwhiny6kl51d" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/davembush/tags/NgRX/">NgRX</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/davembush/tags/angular-2/">angular 2</a></li></ul>


    </footer>
  </div>
  
</article>



  
    <article id="post-fail-tests-gracefully" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/davembush/ngrx-effects-design-patterns/">NgRX Effects Design Patterns</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/davembush/ngrx-effects-design-patterns/" class="article-date"><time datetime="2017-10-17T10:30:03.000Z" itemprop="datePublished">2017-10-17</time></a>
</div>

    
    
  <div class="article-category">
    <a class="article-category-link" href="/davembush/categories/none/">none</a>
  </div>


  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>Since I don’t seem to have a blogs worth of any one topic to write about, I thought maybe something more along the lines of a cluster of small tips and tricks might work.  Since I’ve been writing my Angular book over the last couple of weeks, there hasn’t been much new that I’ve discovered worth sharing.  But there are a few small discoveries I’ve made.  This week, they center around NgRX Effects. [caption id=”attachment_4471” align=”aligncenter” width=”800”]<img src="//blog.dmbcllc.com/wp-content/uploads/2017/10/2017.10.17.png" alt="NgRX Effects Design Patterns" title="NgRX Effects Design Patterns"> Photo via <a href="//visualhunt.com/re/79a90d">Visual hunt</a>[/caption] </p>
<h2 id="Returning-No-Actions"><a href="#Returning-No-Actions" class="headerlink" title="Returning No Actions"></a>Returning No Actions</h2><p>There have been times in the past where I didn’t want to return an Action from my Effect.  Not knowing any better, I just returned the Object Literal, <code>{type: &#39;noop&#39;}</code>.  But there is a much better way. BTW, did you know that unless you tell NgRX otherwise, all @Effects must return an Action? So, what is the better way?  It turns out that the guys who wrote NgRX already thought of the possibility that you wouldn’t want to return an action from an @Effect.  All you need to do is to pass the object literal <code>{dispatch: false}</code> to the @Effect() decoractor. <code>@Effect({dispatch: false})</code> <code>member$: Observable&lt;{}&gt; =</code> <code>thie.actions$ ...</code> Like I said, I needed this because I didn’t yet know about some of the other things I’m going to mention below.  My experience says, if you need this, you are probably doing something wrong.</p>
<h2 id="Strong-Typing"><a href="#Strong-Typing" class="headerlink" title="Strong Typing"></a>Strong Typing</h2><p>If you’ve read any of my other post about Angular, you’ll know I’m a very strong proponent of strongly typing everything.  Nowhere is this more useful than when creating the Effect chain.  By typing everything, I can easily tell that my code is written correctly.  Even while writing my book on how to get started with Angular, it has helped me figure out that I’m missing a closing bracket or parenthesis.  Not to mention it has told me exactly what block of code I had wrong.  I’ve probably saved hours of debugging time with this one simple enhancement to my coding practice.</p>
<h2 id="Chaining-Observables"><a href="#Chaining-Observables" class="headerlink" title="Chaining Observables"></a>Chaining Observables</h2><p>I’m almost ashamed to mention this next one.  But, I never really caught on that <code>switchMap()</code> was a silent subscriber.  Oh! So many places you can use this. If you’ve been using Effects, you’ve probably seen code that looks like this:</p>
<p><code>@Effect()</code></p>
<p><code>get$:Observable&lt;Edit.Update&gt; =</code></p>
<p><code>this.actions$</code></p>
<p><code>.ofType(Edit.GET)</code></p>
<p><code>.switchMap((action: Edit.Get): Observable&lt;{} | ReadonlyArray&lt;Contact&gt;&gt; =&gt;</code></p>
<p><code>this.contactsService.get(`</code>action.id)`</p>
<p><code>.map((x: ReadonlyArray&lt;EditForm&gt;):`</code>Edit.Update =&gt;`</p>
<p><code>newEdit.Update(x[0]));</code></p>
<p>But, do you know why it works? That <code>switchMap()</code> bit expects that you’ll return an observable.  It subscribes to it and passes the data inside the observable to the <code>map()</code> that follows.  Kind of like how the <code>async</code> pipe works in our templates. The cool thing about this is that you can chain subscriptions together using this.  It isn’t just some cleaver way of getting the results of a service into your final action that you will return.  I’ve used <code>switchMap()</code> to get data from the store and pass that on to a <code>switchMap()</code> that call my service with that data. The only thing you need to watch out for is that your observable is either a cold observable or that you call <code>.first()</code> so you it becomes a cold observable.  Otherwise, you’ll end up in an infinite loop.  Ask me how I know :).</p>
<h2 id="Grouping-Observables"><a href="#Grouping-Observables" class="headerlink" title="Grouping Observables"></a>Grouping Observables</h2><p>Chaining observables together using <code>switchMap()</code> works well when the output only needs to be used by the next function in the chain.  But what about when you need to use the results from two different observables at once.  There are a couple of different ways you might do this. One function you might consider using is <code>withLatestFrom()</code>. <code>firstObservable.withLatestFrom(secondObservable, ([firstResult, secondResult]) =&gt; // your code here)</code> or if you have more than two you need to combine, you can use <code>combineLatest()</code> Another way you might consider combining them is with <code>forkJoin()</code> although that might be the last tool you reach for.</p>
<h2 id="Single-Responsibility"><a href="#Single-Responsibility" class="headerlink" title="Single Responsibility"></a>Single Responsibility</h2><p>Another mistake I’ve been making is trying to make my Effect do too much.  If I restrict my effect to only doing one thing at a time and always returning one or more actions, they become much easier to manage.  Maybe this has only be my problem.  But once I saw what switchMap() could do for me, the light bulb went on in my brain.</p>
<h2 id="Returning-Multiple-Actions"><a href="#Returning-Multiple-Actions" class="headerlink" title="Returning Multiple Actions"></a>Returning Multiple Actions</h2><p>And speaking of returning one or more actions, it is possible to return multiple actions from an Effect using.</p>
<pre><code>.mergeMap(
    ( result: string[] ) =&gt; {
      return Observable.from([ new ActionOne( result ), new ActionTwo() ]);
    }
  )
</code></pre>
      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://davembush.github.com/davembush/ngrx-effects-design-patterns/" data-id="cjiweemz1009kvwhi5ty8ybax" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
      

    </footer>
  </div>
  
</article>



  
    <article id="post-ngrx-4-actions-class-vs-object-literal" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/davembush/ngrx-4-actions-class-vs-object-literal/">NgRX 4 Actions - Class vs Object Literal</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/davembush/ngrx-4-actions-class-vs-object-literal/" class="article-date"><time datetime="2017-10-10T10:30:58.000Z" itemprop="datePublished">2017-10-10</time></a>
</div>

    
    
  <div class="article-category">
    <a class="article-category-link" href="/davembush/categories/Angular-2/">Angular 2</a>
  </div>


  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>When NgRX 4 came out and I discovered that the “right” way of creating Actions is to use TypeScript classes and not Object Literals, I was a bit surprised.  Why would you use a Class that requires you to use the “new” keyword?  Why would you put multiple classes in one file?  This is insane! [caption id=”attachment_4463” align=”aligncenter” width=”800”]<img src="//blog.dmbcllc.com/wp-content/uploads/2017/10/2017-10-10.png" alt="NgRX 4 Actions - Class vs Object Literal" title="NgRX 4 Actions - Class vs Object Literal"> Photo credit: <a href="//www.flickr.com/photos/dkobras/8342620023/">dkobras</a> via <a href="//visualhunt.com/re/7df37f">Visual hunt</a> / <a href="//creativecommons.org/licenses/by-sa/2.0/"> CC BY-SA</a>[/caption] </p>
<h2 id="Options"><a href="#Options" class="headerlink" title="Options"></a>Options</h2><p>An Action is an object that contains a type variable and optionally, a payload. Depending on how you code your action, the payload may or may not have “payload” as the variable name. In NgRX version 2, payload was an optional variable. To improve type checking, payload was removed from the Action interface. The official documentation for NgRX version 4 encourages us to create a class for each action we want to dispatch. Suppose you have a Wait reducer that needs a Start action and an End action.  The code might look something like: <code>import {Action} from &#39;@ngrx/store&#39;;</code> <code>export const START = &#39;Wait.Start&#39;;</code> <code>export class Start implements Action</code> <code>{</code> <code>readonly type = START;</code> <code>}</code> <code>export const END = &#39;Wait.End&#39;;</code> <code>export class End implements Action {</code> <code>readonly type = END;</code> <code>}</code> To use this code in our reducer or effects you would import like this:</p>
<p><code>import * as Wait from &#39;./wait.actions&#39;;</code></p>
<p>And then we would dispatch the action using the store we’ve injected into our code. We’ll cover that later. But for now, the dispatch basically looks like this: <code>this.store.dispatch(new Wait.Start());</code> If you need to pass other information to an Action, your constructor can accept them: <code>export const ACTION_WITH_MESSAGE = &#39;Wait.ActionWithMessage&#39;;</code> <code>export class ActionWithMessage implements Action {</code> <code>readonly type = ACTION_WITH_MESSAGE;</code> <code>constructor(public message: string) {}</code> <code>}</code> This allows us to access the action payload as <code>Wait.message</code> instead of <code>Wait.payload</code>. Contrast this to putting the same code in a class with static methods as I’ve explained in previous articles:</p>
<ul>
<li><a href="//blog.dmbcllc.com/upgrade-ngrx-4-x/">How to Upgrade to NgRX 4</a></li>
<li><a href="//blog.dmbcllc.com/how-to-really-use-ngrx/">How to use NgRX</a></li>
</ul>
<p><code>export class Wait {</code> <code>const START = &#39;Wait.Start&#39;;</code> <code>const END = &#39;Wait.Start&#39;;</code> <code>const ACTION_WITH_MESSAGE = &#39;Wait.ActionWithMessage&#39;;</code> <code>start() {</code> <code>return {type: Wait.START};</code> <code>}</code> <code>end() {</code> <code>return {type: Wait.END};</code> <code>}</code> <code>actionWithMessage(message: string) {</code> <code>return {</code> <code>type: Wait.ACTION_WITH_MESSAGE,</code> <code>payload: message};</code> <code>}</code> <code>}</code> In summary, we can have multiple classes and new them up.  Or we can have one class with multiple static methods that return object literals.</p>
<h2 id="Advantage-Object-Literal"><a href="#Advantage-Object-Literal" class="headerlink" title="Advantage Object Literal"></a>Advantage Object Literal</h2><p>The main advantage to using the object literal way is that you don’t need to create an object.  You also stay with the “One class, one file” model that is so common in Angular. On the surface, this seems to be a clear winner.</p>
<h2 id="Advantage-Classes"><a href="#Advantage-Classes" class="headerlink" title="Advantage Classes"></a>Advantage Classes</h2><p>But, because of the way we import the class bundles, the way we end up using the code looks nearly the same.  The main difference is that we must instantiate the class.  But we also get the option of having a different variable type for each action, we aren’t forced to use a variable named “payload” to hold all the associated data.  Further, if you need multiple payloads, you can do that.  You aren’t limited by how many parameters/member variables each of your Action classes use.  When using Effects, we can type the return value of the Effect to the Action we want it to return. In fact, it is this type safety that is the main reason we should be creating Actions using the Class method instead of the object literal method.</p>
<h2 id="Type-Safety-in-Reducers"><a href="#Type-Safety-in-Reducers" class="headerlink" title="Type Safety in Reducers"></a>Type Safety in Reducers</h2><p><code>import {ActionReducer} from &#39;@ngrx/store&#39;;</code> <code>import * as Wait from &#39;./wait.actions&#39;;</code> <code>// This could go in wait.actions.ts</code> <strong><code>export type Action =</code></strong> <strong><code>Wait.End | Wait.Start;</code></strong> <code>export function waitReducer(</code> <code>state = 0, **action: Action**): number {</code> <code>switch(action.type) {</code> <code>case Wait.START:</code> <code>return state + 1;</code> <code>case Wait.END:</code> <code>return state - 1;</code> <code>default:</code> <code>return state;</code> <code>}</code> <code>};</code> <code>export const WaitReducer:</code> <code>ActionReducer&lt;number&gt; = waitReducer;</code> We’ve ensured that the only Actions we will get are from Wait.</p>
<h2 id="Type-Safety-in-Effects"><a href="#Type-Safety-in-Effects" class="headerlink" title="Type Safety in Effects"></a>Type Safety in Effects</h2><p><code>import * as Wait from &#39;./wait.actions&#39;;</code> <code>@Injectable()</code> <code>export class WaitEffects {</code> <code>@Effect()</code> <code>start$: Observable&lt;**Wait.Add**&gt; =</code> <code>this.actions$</code> <code>.ofType(Wait.START)</code> <code>.switchMap((action: Wait.Add) =&gt;</code> <code>Observable.timer(1).take(1)</code> <code>)</code> <code>.map((): Wait.Add =&gt;</code> <code>(**{type: Wait.ADD, payload: 1}**));</code> <code>@Effect()</code> <code>end$: Observable&lt;**Wait.Add**&gt; =</code> <code>this.actions$</code> <code>.ofType(Wait.END)</code> <code>.switchMap((action: Wait.End) =&gt;</code> <code>Observable.timer(1).take(1)</code> <code>)</code> <code>.map((): Wait.Add =&gt;</code> <code>(**{type: Wait.ADD, payload: -1}**));</code> <code>constructor(private actions$: Actions){</code> <code>}</code> <code>}</code> We’ve ensured that the only Action that get returned from either Effect is the Add action.</p>
<h2 id="Tweak-Object-Literal-Implementation"><a href="#Tweak-Object-Literal-Implementation" class="headerlink" title="Tweak Object Literal Implementation"></a>Tweak Object Literal Implementation</h2><p>Now, you might think, “I can get all that type safety by creating a separate interface for each action type.  And this would be true.  But this would be even more files and the only thing to be gained is that your Action object gets created faster because you are using Object Literals.  I’m not sure the advantage is worth the pain.</p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>If you are converting an NgRX 2 site to NgRX 4, you’ll probably want to follow the advice I originally gave for upgrading.  But, once you’ve upgraded, you’ll want to move to using Classes so that you can take advantage of the stronger typings this will afford you.</p>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://davembush.github.com/davembush/ngrx-4-actions-class-vs-object-literal/" data-id="cjiweennf016pvwhiccr4uxvb" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/davembush/tags/NgRX/">NgRX</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/davembush/tags/angular-2/">angular 2</a></li></ul>


    </footer>
  </div>
  
</article>



  
    <article id="post-ngrx-clean-data-aggregation" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/davembush/using-ngrx-to-cleanly-aggregate-data/">Using NgRX to Cleanly Aggregate Data</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/davembush/using-ngrx-to-cleanly-aggregate-data/" class="article-date"><time datetime="2017-10-03T10:30:50.000Z" itemprop="datePublished">2017-10-03</time></a>
</div>

    
    
  <div class="article-category">
    <a class="article-category-link" href="/davembush/categories/Angular-2/">Angular 2</a>
  </div>


  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>For the last 18 months, I’ve been working for an organization that has what some might consider a unique requirement.  Because of where our application’s data is sourced, we need to aggregate data on the client side rather than on the server.  What this means is that for any one screen, we may make multiple calls to the server to grab all the data we need.  Fortunately, because we adopted NgRX early in our adoption of Angular, we could avoid a lot of the headaches associated with client-side aggregation. [caption id=”attachment_4457” align=”aligncenter” width=”800”]<img src="//blog.dmbcllc.com/wp-content/uploads/2017/09/2017-10-03.png" alt="Using NgRX to Cleanly Aggregate Data" title="Using NgRX to Cleanly Aggregate Data"> Photo credit: <a href="//www.flickr.com/photos/gsfc/14486243743/">NASA Goddard Photo and Video</a> via <a href="//visualhunt.com/re/296da9">Visualhunt</a> / <a href="//creativecommons.org/licenses/by/2.0/"> CC BY</a>[/caption] </p>
<h2 id="The-Problem"><a href="#The-Problem" class="headerlink" title="The Problem"></a>The Problem</h2><p>There are multiple ways this problem might manifest itself in an application.  But one of the most common is a basic search screen that displays a list of results.  Everything is simple when your data comes back with all the data you need.  But in our case, the data that is returned might contain all but one or two fields that we need.  Those fields exist in other end points.  To keep the basic problem small, let’s just assume that you search for a list of records.  That search returns 10 items.  For each of those records, you now need to make two more calls to retrieve the content of the two missing fields.  This means that to get a complete result set back, you need to make a total of 21 calls.  The problem becomes even worse if you have a total of 100 records, or you now have 3 fields that you need to retrieve for each row.</p>
<h2 id="The-Old-Way"><a href="#The-Old-Way" class="headerlink" title="The Old Way"></a>The Old Way</h2><p>Prior to using NgRX, the main way we might solve this problem would be to introduce callback hell, or promise hell if you are that lucky.</p>
<ul>
<li>Make a call for the original list</li>
<li>When the list gets returned<ul>
<li>Iterate through the records and<ul>
<li>Make a call for Child Record One<ul>
<li>When callback returns, add the new value to the parent record</li>
</ul>
</li>
<li>Make a call for Child Record Two<ul>
<li>When the callback returns, add the new value to the parent record</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Once all the calls have returned, return the list so it can be displayed.</li>
</ul>
<p>As you can see, this not only becomes difficult to manage, but it also introduces a system that is going to be perceived as slow. But, now, we can do better.</p>
<h2 id="Using-NgRX"><a href="#Using-NgRX" class="headerlink" title="Using NgRX"></a>Using NgRX</h2><p>By using NgRX, we use a series of Effects to retrieve our data, typically via a Service.  When the effect is done, it returns the results to a reducer which puts them in our store entity for us. The basic work flow looks like something like this:</p>
<ul>
<li>Dispatch an action to get the main results</li>
<li>Effect hears the action and makes a call for the top-level list</li>
<li>When the list returns,<ul>
<li>Iterate through the records and<ul>
<li>we dispatch an action to get Child Record One</li>
<li>we dispatch an action to get Child Record Two</li>
</ul>
</li>
</ul>
</li>
<li>Return an Action that will use a reducer to fill our list</li>
<li>Child Record One Effect hears the actions for each of the rows</li>
<li>When each of the values are retrieved the Effect returns an Action that uses a Reducer to put the value in the store</li>
<li>Child Record Two Effect hears the actions for each of the rows</li>
<li>When each of the values are retrieved, the Effect returns an Action that uses a Reducer to put the value in the store</li>
</ul>
<p>You’ll notice, we no longer have the nesting mess that we had using the old way and we can list our results as soon as the first set of data is returned.</p>
<h2 id="Meanwhile-back-on-our-View"><a href="#Meanwhile-back-on-our-View" class="headerlink" title="Meanwhile, back on our View"></a>Meanwhile, back on our View</h2><p>Now, there are two ways you can deal with displaying this information in your view and it all depends on what you are doing. The easy way is to just let the View display the information as it comes back.  Most of the time this will work.  If you need to filter your data in the display once it comes back, you will need to decide if data that doesn’t have the child fields yet should, or should not be displayed. Another quirk I had to deal with was that we were displaying child rows with child rows.  Letting the data display as we got it back gave the screen a kind of exploding effect.  For this, I added a debounceTime(500) to the store observer so that the screen only updated once all the data had been retrieved.  Using the pattern above was still easier to reason about than the old way, we just didn’t get the added benefit of being able to see the data as it was being retrieved.</p>
<h2 id="Watch-Out"><a href="#Watch-Out" class="headerlink" title="Watch Out!"></a>Watch Out!</h2><p>One of the wrong ways you might be tempted to use this pattern would be to chain all the child stuff in one effect and dispatch actions to your reducers from within the one Effect.  This would be a mistake.  Sure, it would work.  But now because your effect is doing more than one thing, your code becomes MUCH harder to reason about.  While each of your Effects may ultimately call the same reducer function, or not, you definitely want to have a separate set of Actions and Effects that retrieve the data from the server.</p>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://davembush.github.com/davembush/using-ngrx-to-cleanly-aggregate-data/" data-id="cjiweennl016svwhiamknu8c8" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/davembush/tags/NgRX/">NgRX</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/davembush/tags/angular-2/">angular 2</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/davembush/tags/design-patterns/">design patterns</a></li></ul>


    </footer>
  </div>
  
</article>



  
    <article id="post-thoughts-upgrading-angular" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/davembush/upgrade-to-angular-from/">Upgrade to Angular from...</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/davembush/upgrade-to-angular-from/" class="article-date"><time datetime="2017-09-26T10:30:23.000Z" itemprop="datePublished">2017-09-26</time></a>
</div>

    
    
  <div class="article-category">
    <a class="article-category-link" href="/davembush/categories/Angular-2/">Angular 2</a>
  </div>


  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>As I’ve been interviewing for a new contract, the question, “How do we Upgrade to Angular from …?” has come up several times.  And as I’ve thought about the question, several patterns have emerged. [caption id=”attachment_4451” align=”aligncenter” width=”800”]<img src="//blog.dmbcllc.com/wp-content/uploads/2017/09/2017-09-26.jpg" alt="Upgrade Angular from ..." title="Upgrade Angular from ..."> Photo credit: <a href="//www.flickr.com/photos/archer10/12414442945/">archer10 (Dennis) 102M Views</a> via <a href="//visualhunt.com/re/426124">Visualhunt</a> / <a href="//creativecommons.org/licenses/by-sa/2.0/"> CC BY-SA</a>[/caption] </p>
<h2 id="From-a-Portal"><a href="#From-a-Portal" class="headerlink" title="From a Portal"></a>From a Portal</h2><p>The first time I was asked this question, the team I was talking with had an existing Web 1.0 site setup using WebSphere Portal.  Not something that you can easily plug any Single Page Application (SPA) into. But all is not lost. One of the easiest ways to solve the problem is to create a reverse proxy.  One popular tool for this is mod_proxy for the Apache server.  If you are using IIS, you could use URL Rewrite rules to setup a reverse proxy. In either case, you will need to setup rules that ensure that anyone trying to access a URL that is still on the old portal site would still be able to access that directly.  Once that is in place, you would create one page, or maybe a set of related pages, at a time and stand them up on another server.  Then you would change your rules so that anyone trying to access the old URLs that are no longer being served by the old site get redirected to the new SPA application. Now, this sounds pretty simple.  But, I imagine keeping everything in sync as you go might be more of a pain that you might imagine.  If you have pages that link to each other, you’ll need to convert links to routes as you go.  Say you convert page one.  It still has links to the old site.  Not a big problem.  But as the pages it is linking to now become part of the SPA, you’ll want to convert those links to route directives.  One way you might mitigate this issue is to convert pages with the fewest links out first.  It might help to create a graph, or at least a spreadsheet, to help you manage the interdependent relationships. And added advantage of this setup is that any pages in the portal that have relatively static content, and any resources, can be cached, or even moved, to the proxy server where they will probably be served up faster than the original portal.</p>
<h2 id="From-a-Web-1-0-Site"><a href="#From-a-Web-1-0-Site" class="headerlink" title="From a Web 1.0 Site"></a>From a Web 1.0 Site</h2><p>Switching from an existing Web 1.0 site might be a bit easier.  Although, using the proxy method there still might be the best choice.  Many of the same issues exist.  But in the case of an existing Web 1.0 site that doesn’t depend on a portal, you’ll probably have greater control over the server.  Again, you are probably running the site on Apache, nginx, or IIS.  In all of those cases, you can setup a rule that says, “if you can’t find the URL, load up this page over here instead.”  Where “this page over here” is your Angular site you are converting to.  You’ll need to implement something like this anyhow for your Angular SPA to work correctly, so this is probably the least amount of extra work to get you where you need to be. Then, you convert a page or a set of related pages at a time like I described in the Portal implementation.</p>
<h2 id="From-Another-Framework"><a href="#From-Another-Framework" class="headerlink" title="From Another Framework"></a>From Another Framework</h2><p>Let’s say that you are moving from React, or some other framework to Angular.  I know of a company that is doing just this.  The wrinkle is, they have no plans on converting their existing pages to Angular.  This makes the transition relatively simple.  You setup rules on your server, similar to how you would setup a conversion from a Web 1.0 site.  “URLs that look like this, go to the old index.html page and URLs that look like that go to the new index.html page.” Once again, you’ll need to keep track of routes as you change from one to the other.  But it is manageable.</p>
<h2 id="Converting-AngularJS-to-Angular"><a href="#Converting-AngularJS-to-Angular" class="headerlink" title="Converting AngularJS to Angular"></a>Converting AngularJS to Angular</h2><p>Yes, I know ngUpgrade exist.  But, if you don’t need to use it, why would you.  ngUpgrade exist so you can embed Angular in AngularJS or AngularJS in Angular.  But, it might make more sense to create a new SPA for Angular and have the two sites reference each other similar to how you would do this for a Web 1.0 site or if you were converting from an entirely different framework. The reason I recommend using the two-site method first is because Angular really is a different framework.  There are similarities between AngularJS and Angular.  But that is all they are.  What if you just pretended they weren’t at all related.  That the ngUpdate bridge didn’t exist.  Wouldn’t that make life just a bit easier in the long run?  I think it would.</p>
<h2 id="What-do-You-Think"><a href="#What-do-You-Think" class="headerlink" title="What do You Think?"></a>What do You Think?</h2><p>What do you think?  Do you have experience converting to Angular from an older technology?  What problems did you face?  How did you solve them?  Let me know in the comments.</p>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://davembush.github.com/davembush/upgrade-to-angular-from/" data-id="cjiweenz301dwvwhi3v16g0lu" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/davembush/tags/angular-2/">angular 2</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/davembush/tags/portal/">portal</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/davembush/tags/react-js/">react.js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/davembush/tags/web-1-0/">web 1.0</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/davembush/tags/web-2-0/">web 2.0</a></li></ul>


    </footer>
  </div>
  
</article>



  
    <article id="post-one-tweak-improved-angular-code" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/davembush/this-one-tweak-improved-my-angular-code/">This One Tweak Improved my Angular Code</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/davembush/this-one-tweak-improved-my-angular-code/" class="article-date"><time datetime="2017-09-12T10:30:10.000Z" itemprop="datePublished">2017-09-12</time></a>
</div>

    
    
  <div class="article-category">
    <a class="article-category-link" href="/davembush/categories/Angular-2/">Angular 2</a>
  </div>


  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>I made a tweak to my Angular code process over the last month or so that has resulted in greater productivity in my development environment and fewer bugs. Now, I didn’t make this change because I thought it would improve my productivity.  At least that wasn’t the primary reason.  I made the change because I thought it would reduce the chance of introducing bugs into my code.  And while it does reduce the number of bugs in my code, the result has been generally improved productivity. What is this great secret? [caption id=”attachment_4441” align=”aligncenter” width=”800”]<img src="//blog.dmbcllc.com/wp-content/uploads/2017/09/2017-09-12.jpg" alt="This One Tweak Improved my Angular Code" title="This One Tweak Improved my Angular Code"> Photo credit: <a href="//www.flickr.com/photos/sheila_sund/36859429262/">docoverachiever</a> via <a href="//visualhunt.com/re/d75fb5">Visual Hunt</a> / <a href="//creativecommons.org/licenses/by/2.0/"> CC BY</a>[/caption] </p>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><p>Before I tell you the secret, I want to tell you how I got here.  Yesterday, I was listening to a podcast that was reviewing another framework with the creators of that framework.  All during the podcast they were comparing their framework to Angular and React.  Fine, compare and contrast is good.  Except, they were comparing and contrasting something they knew really well, their framework, to something they had a lesser understanding of.  So, in the process, one of their complaints about Angular was that Angular doesn’t take full advantage of TypeScript.  Or, it doesn’t take as full advantage of TypeScript as their framework does. As I listened to this I realized that most Angular developers probably aren’t taking as full advantage of TypeScript as they could.  I think this is by design.  But, it is too our hurt.  Fortunately, we can turn things on that Angular leaves turned off.</p>
<h2 id="Type-Safety"><a href="#Type-Safety" class="headerlink" title="Type Safety"></a>Type Safety</h2><p>Now, if you are like most developers I know, you just want to get your code working.  And so, you don’t pay attention to things like Linters.  And you have learned enough TypeScript to get your code working.  This is especially true of those who are coming from “old school” JavaScript. Now, I’m going to challenge you to do two things.  First, use TSLint.  Next, make the rules as rigid as possible.</p>
<h3 id="TSLint"><a href="#TSLint" class="headerlink" title="TSLint"></a>TSLint</h3><p>If you are using the Angular CLI, TSLint is built in.  To run TSLint, all you need to do is to run <code>npm run lint</code> On the command line. This will verify that you haven’t made any really stupid syntax mistakes by default. Next, the editor you are using should have a way of hooking TSLint up to the editor so that you can tell you have a problem in your code as you write your code.  If your editor doesn’t have a way of doing this, find a new editor.  The two editors I recommend are VS Code and WebStorm.  Each have their own strengths and weaknesses.</p>
<h3 id="Rules"><a href="#Rules" class="headerlink" title="Rules"></a>Rules</h3><p>The rules that come with the Angular CLI are, in my opinion, too relaxed.  They are strong enough to not annoy JavaScript programmers.  They protect you from making really stupid TypeScript programming errors.  But, they don’t help you write code that you have a high assurance will work correctly the first time without running it. We are going to fix this. The main thing we want to do is that we want to tighten up type checking.  So, instead of using the defaults that either let variables be anything or default them to the type they are assigned to when they are declared if that can be determined, we are going to force variables to be declared.</p>
<h2 id="Why-This-Helps"><a href="#Why-This-Helps" class="headerlink" title="Why This Helps"></a>Why This Helps</h2><p>When I first made this kind of change, I was doing it to <a href="//blog.dmbcllc.com/typescript-functional-programming/">improve my NgRX code</a>.  Once I did that, I immediately saw that by enforcing type safety, I could easily tell if the functions I was using in my Observable chains was going to end up returning what I thought it was going to.  This means, I can write my code and if I don’t get any tslint warnings in my editor, I can have a high degree of certainty that the code will run correctly once I compile it and run it. Maybe you think type safety is for sissies.  OK then, you can continue to run your code multiple times to find the same error that I can find before I ever run the code.  I think we all know who will be more productive. Once I saw this productivity gain, I determined to add type safety to my entire project.  This took much less time than you would expect and I was able to apply the rules incrementally so that I was not disrupting the progress of the project I was working on.</p>
<h2 id="Implementation"><a href="#Implementation" class="headerlink" title="Implementation"></a>Implementation</h2><p>The implementation is actually pretty simple.  The first thing you are going to want to do is that you’ll want to change the npm lint script from: <code>&quot;lint&quot;: &quot;ng lint&quot;</code> to <code>&quot;lint&quot;: &quot;ng lint --type-check --fix&quot;</code> This does two things.  First it allows us to change to tslint rules to use rules that require type checking.  And second it will cause the tslint to fix any problems it finds that it can fix automatically. Next, you’ll want to install tslint-immutable, which will allow us to add in rules for immutability that I mentioned in my previous post that I linked to above.  As of this writing, I’m using version 4.1.0 <code>npm install --save-dev tslint-immutable</code> Next, open up tslint.json which should be at the root of your application. Inside this file, right before the rulesDirectory section, add this code: <code>&quot;extends&quot;: [&quot;tslint-immutable&quot;],</code> This will allow us to access the immutable rules we just added with <code>npm install</code>.</p>
<h3 id="typedef"><a href="#typedef" class="headerlink" title="typedef"></a>typedef</h3><p>The first thing we want to do is that we want to force everything to have a type definition. <code>&quot;typedef&quot;: [true,</code> <code>&quot;call-signature&quot;,</code> <code>&quot;arrow-call-signature&quot;,</code> <code>&quot;parameter&quot;,</code> <code>&quot;arrow-parameter&quot;,</code> <code>&quot;property-declaration&quot;,</code> <code>&quot;variable-declaration&quot;,</code> <code>&quot;member-variable-declaration&quot;,</code> <code>&quot;object-destructuring&quot;,</code> <code>&quot;array-destructuring&quot;</code> <code>],</code> The one place where you might have a problem is that by default, the no-inferable-types rule is turned on, which is what we want.  Currently, tslint is not smart enough to know that no-inferable-types should take precedence over typedef.  So, you’ll need to occasionally exclude the rule using the <a href="//palantir.github.io/tslint/usage/rule-flags/">tslint comment exclusion</a>.  I exclude the typedef when I run into this problem. If you are interested, you can google each of the typedef declarations (rather than linking to them and have the links go stale).</p>
<h3 id="no-any"><a href="#no-any" class="headerlink" title="no-any"></a>no-any</h3><p>Now that we are forcing everything to have a type definition, the next thing you want to do is that you’ll want to disallow using “any” as a type definition.  Otherwise, why force the type definition at all?  I’d love to be able to disallow “object” as well, but there is currently no definition for that so until someone creates that rule, you’ll just have to use discipline.</p>
<p><code>&quot;no-any&quot;: true,</code></p>
<p>You may complain that sometimes you want to have the variable really be anything.  Anything?  Really?  I bet most of the time what you really want to be able to do is that you’ll want to define the variable as one of two, maybe three types.  You can achieve this definition as of TypeScript 2.4, by using the pipe operator.</p>
<p><code>var stringOrNumber: string | number;</code></p>
<h3 id="no-unused-variable"><a href="#no-unused-variable" class="headerlink" title="no-unused-variable"></a>no-unused-variable</h3><p>To keep your code clean, the next rule you want to enable is to disallow creating variables that you aren’t using.  This will have the side effect of cleaning up your import statements as well. <code>&quot;no-unused-variable&quot;: true,</code> Those are all the rules I use that impact type safety.  Here are a few more you might want to consider adding.</p>
<h3 id="Cyclomatic-Complexity"><a href="#Cyclomatic-Complexity" class="headerlink" title="Cyclomatic Complexity"></a>Cyclomatic Complexity</h3><p>Cyclomatic Complexity is a measure of how complicated your functions and methods are.  While the default implementation for this is 20, I find that if I’ve written a function that is that complex, even I have trouble understanding it any more.  While keeping my complexity lower than 10 contributes to extremely readable code.  Yes, there are times when there really isn’t any good way of breaking the code into smaller chunks.  But that is rare and code comment exclusions will let you handle those exceptions. <code>&quot;cyclomatic-complexity&quot;: [true, 10],</code></p>
<h2 id="Optional-Rules"><a href="#Optional-Rules" class="headerlink" title="Optional Rules"></a>Optional Rules</h2><p>Some other rules you might want to consider adding in that could improve your code include:</p>
<h3 id="array-type-generic"><a href="#array-type-generic" class="headerlink" title="array-type generic"></a>array-type generic</h3><p>Coming from a C# background, I prefer to define my arrays as Array<t> instead of T[].  By default nothing is defined.  If it is just you working on the code, it probably doesn’t matter than much.  But on a team, I find consistency useful. <code>&quot;array-type&quot;: [true, &quot;generic&quot;],</code></t></p>
<h3 id="readonly-array"><a href="#readonly-array" class="headerlink" title="readonly-array"></a>readonly-array</h3><p>For my NgRX code, I like to have readonly-array turned on to ensure immutability.  I’ve found that I rarely need to turn this off in the rest of my code since NgRX is where I would be mutating anything that isn’t local to a function.  So, I just turn this rule on globally. <code>&quot;readonly-array&quot;: [true, &quot;ignore-local&quot;],</code></p>
<h2 id="Final-Notes"><a href="#Final-Notes" class="headerlink" title="Final Notes"></a>Final Notes</h2><p>I mentioned above that if you are using TypeScript 2.4.n, you can use the pipe operator to combine types.  You also get stronger type checking if you use that version.  However, if you are using codelyzer, as of this writing, you’ll have trouble if you use TypeScript 2.4.n with a version of Codelyzer greater than 3.0.1.  I keep trying the newer versions to see if this issue has been corrected.  Anyhow, your mileage may vary moving your code to TypeScript 2.4.n.</p>
<h2 id="My-TSLint-file"><a href="#My-TSLint-file" class="headerlink" title="My TSLint file"></a>My TSLint file</h2><p>For those who are curious, my full tslint.json file is below. <code>{</code> <code>&quot;extends&quot;: [&quot;tslint-immutable&quot;],</code> <code>&quot;rulesDirectory&quot;: [</code> <code>&quot;node_modules/codelyzer&quot;</code> <code>],</code> <code>&quot;rules&quot;: {</code> <code>&quot;typedef&quot;: [true,</code> <code>&quot;call-signature&quot;,</code> <code>&quot;arrow-call-signature&quot;,</code> <code>&quot;parameter&quot;,</code> <code>&quot;arrow-parameter&quot;,</code> <code>&quot;property-declaration&quot;,</code> <code>&quot;variable-declaration&quot;,</code> <code>&quot;member-variable-declaration&quot;,</code> <code>&quot;object-destructuring&quot;,</code> <code>&quot;array-destructuring&quot;</code> <code>],</code> <code>&quot;array-type&quot;: [true, &quot;generic&quot;],</code> <code>&quot;readonly-keyword&quot;: false,</code> <code>&quot;readonly-array&quot;: [true, &quot;ignore-local&quot;],</code> <code>&quot;no-let&quot;: false,</code> <code>&quot;no-any&quot;: true,</code> <code>&quot;cyclomatic-complexity&quot;: [true, 10],</code> <code>&quot;no-unused-variable&quot;: true,</code> <code>&quot;arrow-return-shorthand&quot;: true,</code> <code>&quot;callable-types&quot;: true,</code> <code>&quot;class-name&quot;: true,</code> <code>&quot;comment-format&quot;: [</code> <code>true,</code> <code>&quot;check-space&quot;</code> <code>],</code> <code>&quot;curly&quot;: true,</code> <code>&quot;eofline&quot;: true,</code> <code>&quot;forin&quot;: true,</code> <code>&quot;import-blacklist&quot;: [true, &quot;rxjs&quot;],</code> <code>&quot;import-spacing&quot;: true,</code> <code>&quot;indent&quot;: [</code> <code>true,</code> <code>&quot;spaces&quot;,</code> <code>4</code> <code>],</code> <code>&quot;interface-over-type-literal&quot;: true,</code> <code>&quot;label-position&quot;: true,</code> <code>&quot;max-line-length&quot;: [</code> <code>true,</code> <code>140</code> <code>],</code> <code>&quot;member-access&quot;: false,</code> <code>&quot;member-ordering&quot;: [</code> <code>true,</code> <code>&quot;static-before-instance&quot;,</code> <code>&quot;variables-before-functions&quot;</code> <code>],</code> <code>&quot;no-arg&quot;: true,</code> <code>&quot;no-bitwise&quot;: false,</code> <code>&quot;no-console&quot;: [</code> <code>true,</code> <code>&quot;debug&quot;,</code> <code>&quot;info&quot;,</code> <code>&quot;time&quot;,</code> <code>&quot;timeEnd&quot;,</code> <code>&quot;trace&quot;</code> <code>],</code> <code>&quot;no-construct&quot;: true,</code> <code>&quot;no-debugger&quot;: true,</code> <code>&quot;no-duplicate-super&quot;: true,</code> <code>&quot;no-duplicate-variable&quot;: true,</code> <code>&quot;no-empty&quot;: false,</code> <code>&quot;no-empty-interface&quot;: true,</code> <code>&quot;no-eval&quot;: true,</code> <code>&quot;no-inferrable-types&quot;: true,</code> <code>&quot;no-misused-new&quot;: true,</code> <code>&quot;no-non-null-assertion&quot;: true,</code> <code>&quot;no-shadowed-variable&quot;: true,</code> <code>&quot;no-string-literal&quot;: false,</code> <code>&quot;no-string-throw&quot;: true,</code> <code>&quot;no-switch-case-fall-through&quot;: true,</code> <code>&quot;no-unnecessary-initializer&quot;: true,</code> <code>&quot;no-trailing-whitespace&quot;: true,</code> <code>&quot;no-unused-expression&quot;: true,</code> <code>&quot;no-use-before-declare&quot;: true,</code> <code>&quot;no-var-keyword&quot;: true,</code> <code>&quot;object-literal-sort-keys&quot;: false,</code> <code>&quot;one-line&quot;: [</code> <code>true,</code> <code>&quot;check-open-brace&quot;,</code> <code>&quot;check-catch&quot;,</code> <code>&quot;check-else&quot;,</code> <code>&quot;check-whitespace&quot;</code> <code>],</code> <code>&quot;prefer-const&quot;: true,</code> <code>&quot;quotemark&quot;: [</code> <code>true,</code> <code>&quot;single&quot;</code> <code>],</code> <code>&quot;radix&quot;: true,</code> <code>&quot;semicolon&quot;: [</code> <code>&quot;always&quot;</code> <code>],</code> <code>&quot;triple-equals&quot;: [</code> <code>true,</code> <code>&quot;allow-null-check&quot;</code> <code>],</code> <code>&quot;typedef-whitespace&quot;: [</code> <code>true,</code> <code>{</code> <code>&quot;call-signature&quot;: &quot;nospace&quot;,</code> <code>&quot;index-signature&quot;: &quot;nospace&quot;,</code> <code>&quot;parameter&quot;: &quot;nospace&quot;,</code> <code>&quot;property-declaration&quot;: &quot;nospace&quot;,</code> <code>&quot;variable-declaration&quot;: &quot;nospace&quot;</code> <code>}</code> <code>],</code> <code>&quot;typeof-compare&quot;: true,</code> <code>&quot;unified-signatures&quot;: true,</code> <code>&quot;variable-name&quot;: false,</code> <code>&quot;whitespace&quot;: [</code> <code>true,</code> <code>&quot;check-decl&quot;,</code> <code>&quot;check-operator&quot;,</code> <code>&quot;check-separator&quot;,</code> <code>&quot;check-type&quot;</code> <code>],</code> <code>&quot;directive-selector&quot;: [true, &quot;attribute&quot;, &quot;app&quot;, &quot;camelCase&quot;],</code> <code>&quot;component-selector&quot;: [true, &quot;element&quot;, &quot;app&quot;, &quot;kebab-case&quot;],</code> <code>&quot;use-input-property-decorator&quot;: true,</code> <code>&quot;use-output-property-decorator&quot;: true,</code> <code>&quot;use-host-property-decorator&quot;: true,</code> <code>&quot;no-input-rename&quot;: true,</code> <code>&quot;no-output-rename&quot;: true,</code> <code>&quot;use-life-cycle-interface&quot;: true,</code> <code>&quot;use-pipe-transform-interface&quot;: true,</code> <code>&quot;component-class-suffix&quot;: true,</code> <code>&quot;directive-class-suffix&quot;: true,</code> <code>&quot;no-access-missing-member&quot;: true,</code> <code>&quot;templates-use-public&quot;: true,</code> <code>&quot;invoke-injectable&quot;: true</code> <code>}</code> <code>}</code></p>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://davembush.github.com/davembush/this-one-tweak-improved-my-angular-code/" data-id="cjiweenos017fvwhihu4obr62" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/davembush/tags/angular-2/">angular 2</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/davembush/tags/typescript/">typescript</a></li></ul>


    </footer>
  </div>
  
</article>



  


  <div id="page-nav">
    <nav><ul class="pagination"><li><a class="page-prev" rel="prev" href="/davembush/davembush/"><i class="fa fa-chevron-left"></i> Prev</a></li><li><a class="page-number" href="/davembush/davembush/">1</a></li><li class="active"><span class="page-number">2</span></li><li><a class="page-number" href="/davembush/davembush/page/3/">3</a></li><li><a class="page-number" href="/davembush/davembush/page/4/">4</a></li><li class="disabled"><span class="page-space">&hellip;</span></li><li><a class="page-number" href="/davembush/davembush/page/31/">31</a></li><li><a class="page-next" rel="next" href="/davembush/davembush/page/3/">Next <i class="fa fa-chevron-right"></i></a></li></ul></nav>
  </div>



        </div>
        <div class="col-sm-3 col-sm-offset-1 blog-sidebar">
          
  
  <div class="sidebar-module">
    <h4>Recents</h4>
    <ul class="sidebar-module-list">
      
        <li>
          <a href="/davembush/vmware-s-clarity-design-system-for-angular/">VMWare&#39;s Clarity Design System for Angular</a>
        </li>
      
        <li>
          <a href="/davembush/the-full-stack-developer-myth/">The Full Stack Developer Myth</a>
        </li>
      
        <li>
          <a href="/davembush/how-you-do-anything/">How you do Anything ...</a>
        </li>
      
        <li>
          <a href="/davembush/property-based-testing-in-angular-with-jsverify/">Property Based Testing in Angular with jsVerify</a>
        </li>
      
        <li>
          <a href="/davembush/property-based-testing-revealed-a-better-way-to-test/">Property Based Testing Revealed - A Better Way to Test</a>
        </li>
      
    </ul>
  </div>


  
  <div class="sidebar-module">
    <h4>Archives</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2018/03/">March 2018</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2018/02/">February 2018</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2018/01/">January 2018</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2017/12/">December 2017</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2017/11/">November 2017</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2017/10/">October 2017</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2017/09/">September 2017</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2017/08/">August 2017</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2017/07/">July 2017</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2017/06/">June 2017</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2017/05/">May 2017</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2017/04/">April 2017</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2017/03/">March 2017</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2017/02/">February 2017</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2017/01/">January 2017</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2016/12/">December 2016</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2016/11/">November 2016</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2016/10/">October 2016</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2016/09/">September 2016</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2016/08/">August 2016</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2016/07/">July 2016</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2016/06/">June 2016</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2016/05/">May 2016</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2016/04/">April 2016</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2016/03/">March 2016</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2016/02/">February 2016</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2016/01/">January 2016</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2015/12/">December 2015</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2015/11/">November 2015</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2015/10/">October 2015</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2015/09/">September 2015</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2015/08/">August 2015</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2015/07/">July 2015</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2015/06/">June 2015</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2015/05/">May 2015</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2015/04/">April 2015</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2015/03/">March 2015</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2015/02/">February 2015</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2015/01/">January 2015</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2014/12/">December 2014</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2014/11/">November 2014</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2014/10/">October 2014</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2014/09/">September 2014</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2014/08/">August 2014</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2014/07/">July 2014</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2014/06/">June 2014</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2014/05/">May 2014</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2014/04/">April 2014</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2014/03/">March 2014</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2014/02/">February 2014</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2014/01/">January 2014</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2013/12/">December 2013</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2013/11/">November 2013</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2013/10/">October 2013</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2013/09/">September 2013</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2013/08/">August 2013</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2013/07/">July 2013</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2013/06/">June 2013</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2013/05/">May 2013</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2013/03/">March 2013</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2013/02/">February 2013</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2013/01/">January 2013</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2012/12/">December 2012</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2012/09/">September 2012</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2012/08/">August 2012</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2012/04/">April 2012</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2010/10/">October 2010</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2010/08/">August 2010</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2010/04/">April 2010</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2010/03/">March 2010</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2009/12/">December 2009</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2009/11/">November 2009</a><span class="sidebar-module-list-count">7</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2009/10/">October 2009</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2009/09/">September 2009</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2009/08/">August 2009</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2009/07/">July 2009</a><span class="sidebar-module-list-count">8</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2009/06/">June 2009</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2009/05/">May 2009</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2009/04/">April 2009</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2009/03/">March 2009</a><span class="sidebar-module-list-count">6</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2009/02/">February 2009</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2009/01/">January 2009</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2008/12/">December 2008</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2008/11/">November 2008</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2008/08/">August 2008</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2008/07/">July 2008</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2008/06/">June 2008</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2008/05/">May 2008</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2008/04/">April 2008</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2008/02/">February 2008</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2008/01/">January 2008</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2007/11/">November 2007</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/davembush/archives/2007/10/">October 2007</a><span class="sidebar-module-list-count">1</span></li></ul>
  </div>




        </div>
    </div>
  </div>
  <footer class="blog-footer">
  <div class="container">
    <div id="footer-info" class="inner">
      &copy; 2018 Dave M Bush<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

  

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>



<script src="/davembush/js/script.js"></script>

</body>
</html>
